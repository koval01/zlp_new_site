{"version":3,"file":"core.js","names":["_this","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","call","step","next","_e2","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","minLen","_arrayLikeToArray","Object","prototype","toString","slice","constructor","name","from","test","iter","len","arr2","site_domains","prod","domain_site","dev","development_hosts","cart_cookie","channels","links_lt","link","launcher_platforms","mac","linux","windows","gitOwner","gitLauncherRepo","lock_of","coins_sell_mode","selector_card_skin_displayed","donate_services_array","notify_hidden","glob_players","glob_events_status","allow_display_login_hint","timer_notify","swiper_comments","payment_url_global","checked_coupon","failed_coupon","crypto_token","tooltip_instance","events_page_state","donate_displayed","modal_displayed","freeze_crypto","freeze_monitoring","lock_sticker_switch","gameServerUpdater_setter","work_domain_v","products_by_serverid","glob_auth_player_data","current_c_item","current_c_item_name","telegram_cookie_token","first_init_head_adapt","first_init_head_adapt_vova","current_item_type","client_ip","avatar_loaded","telegram_glob_session","auth_data","response","telegram_social_bot","debug_lock_init","telegram_auth_enabled","feedback_module_enabled","feedback_tg_auth_skip","tokens_system_enabled","initHost","keys","window","location","hostname","linkHash","hash","substring","prepare_img_link","img_link","replace","replaceAll","time_correction","date","userTimezoneOffset","getTimezoneOffset","Date","getTime","time_in_moscow_get","arguments","undefined","toLocaleString","timeZone","getOffset","timezone","timeZoneName","match","console","error","concat","formatDate","now","diff","sec","Math","floor","getNoun","min","hour","d","getDate","getMonth","getFullYear","getHours","getMinutes","map","component","join","utf8_to_b64","str","btoa","unescape","encodeURIComponent","b64_to_utf8","decodeURIComponent","escape","atob","randDiaps","max","random","getPlatform","navigator","platform","indexOf","isChrome","userAgent","vendor","downloadLauncher","getGitLauncherReleases","links_","debug","notify","split","generateRandomHex","size","getAvatarColorIDforTG","user_id","result","base","parseInt","getHash","substr","reduce","item","parts","re_check","callback","grecaptcha","ready","execute","re_token","action","then","token_update","shuffle","array","currentIndex","randomIndex","_ref","alternateSort","list","minIndex","minVal","j","temp","getImageLightness","imageSrc","calculate","img","document","createElement","src","crossOrigin","style","display","body","appendChild","colorSum","onload","canvas","width","height","ctx","getContext","drawImage","_imageData","getImageData","_","data","imageData","r","g","b","avg","x","brightness","remove","is_apple_platform","validateEmail","email","String","toLowerCase","url_builder_","base_url","submit_data_","url","URL","searchParams","set","href","countProperties","obj","number","one","two","five","abs","getCrypto","requestCall","success","token","backend_host","get_events_","events","get_yt_video_","video_id","skip","get_news_","source","messages","get_rules_private_server","appendPostsNews","iframe","loading_done","setTimeout","sl","getElementById","container_news","parentNode","removeChild","template","c","innerHTML","addEventListener","frame","url_ob","checked","createSwiper","Swiper","spaceBetween","loop","observer","observeParents","preventClicks","preventClicksPropagation","autoplay","delay","pagination","el","clickable","navigation","prevEl","nextEl","text_modify_enable","text_size_static","add_news_in_array","posts","adaptive_news_text","array_","reverse","_loop","text","text_els","datetime","datetime_utc","cover","toLocaleDateString","toLocaleTimeString","minute","selector_bg","backgroundImage","selector_text","classList","add","fontSize","text_len","innerText","text_split","font_size","fix_float_fs","_float","correction_float","correction_font","max_val","parseFloat","padding","calculate_text_position","identifier_sl","switch_val","getComputedStyle","getPropertyValue","maxHeight","position","paddingBottom","paddingRight","event","style_","toFixed","background","closeButtonDonateAdaptive","minHeight","donateSwitchContainer","container","querySelector","style_sticker","style_main","opacity","update_zIndex","variable","zIndex","button","setAttribute","checkTelegramAuthData","tg_success","removeAttribute","overflowY","scrollTo","top","behavior","paddingTop","openTelegramAuthModal","get_game_server_data","_data_error","ok","string_","initCrypto","monitoring_game_server_update","online","clearInterval","selector","gameServerUpdater","setInterval","initEventsList","row_container","loader_","switch_button_","row_class","events_block_load","sort","a","keyA","date_start","keyB","st_date","end_date","date_end","time_in_moscow","badge","template_","title","get_donate_services","services","create_payment","customer","products","server_id","coupon","payment","donatePayMethodSelector","pay_method","success_url","tg_auth_data","getTelegramAuth","generateGiftLink","payment_id","check_coupon","code","testImage","tester","Image","reInitTelegramAuth","loadPlayerAvatar","avatar","def_selector","url_generator","back","exec_","avatar_selector","avatar_style","_unused","raw_link","includes","raw","skip_cache","openLoginHint","player_data","player","skin","NICKNAME","avatar_init","getIPClient","ip","cloudflareTraceJSON","dict","_iterator","_step","k","p","cloudflareTrace","id","target_commitish","author","login","draft","assets","links","_i","_Object$keys","_p","_iterator2","_step2","browser_download_url","setLauncherLinks","button_template","d_links","_i2","_keys","checkFeedbackStatus","sendFeedback","sendFeedbackAction","textarea","button_lock","lock","check_data","send_data","checkPayment","tokens_send","getPaymentHistory","getPlayersSkins","players","enabled","skins","appendServices","size_classes","get_product_type","type","donate_check_services_cart","click_data","price","count","description","service_id","push","_name","padding_desc","desc_template","item_butt_template","click_template","JSON","stringify","button_title","description_other","image","checkPrivateServerBuy","elem","ids","_i3","log","switchEventsPages","button_name","news_page","events_page","news_button","events_button","redirect_","ytVideoSetter","only_iframe","local_load","load_iframe","params","get_link","muted","controls","set_video","video","x720","_i4","_Array$from","getElementsByClassName","getAttribute","marginBottom","check_modal_","close_r","modal_close_","getElementsByTagName","cont","marginTop","modal","modal_open_","onclick_lock","onclick","target","switch_modal_containers","mode","info_params","span","info","service","service_coins","finish_donate","_array","_mode","content","discount_calculate","discount","get_cookie_cart","cookie_cart","parse","Cookies","get","updateCartCount","groupAlreadyInCart","user_cart","cart","choice","balance","displayTokens","v2","Number","isInteger","base_selector","balance_value","container_number","balance_number","card_holder","balance_value_card","balance_choice","cardSelector","template_tokens","select_card_skin","path","sendTokensModalOpen","comment_show_action","close","comment_text","comment_show","on","checkFunction","stop_key","_iterator3","_step3","PRIVATE_SERVER","selector_button","initComments","playersGet","searchPlayer","comment","fontWeight","transition","correction_height","clientHeight","overflow","buildPlayersSwiper","slidesPerView","breakpoints","badges_get","badges_paste","players_array","_iterator4","_step4","player_in","selectSkin","Nick","Value","_i5","_loop2","getBadges","badges","badge_local","getClan","player_badges_","player_clan","head","desc","buildDonateHistorySwiper","updateDonateTime","selectors","querySelectorAll","select","time_","updated_at","product","donate_bg_preload","bg_ls","setSticker","stickers_count","custom_path","setRandomStickerLand","pageYOffset","updateStickerPosition","innerWidth","left","donate_element_click","product_data","exclude_types","text_template","items_count_donate","count_hint","add_to_cart","switch_","_update_count","product_in_cart","hasOwnProperty","group_error","count_state","only_dig","_calculate_price","_price","currenct_in_cart","template_counter_i","isNaN","sign","donate_get_service_by_id","donateResetPaymentState","repeat","coupon_reset","coupon_sl","inputs","vl","trim","update_inputs","_sl","donate_cart","cart_parsed","product_count_in_cart","max_item_count","local_prm","_p2","els_","initDonate","donate_cart_button","els","selector_","_loop3","donateFlushCart","setAvatar","user","photoTG","photo_url","avatarSelector","first_name","last_name","toUpperCase","checkAuthAndDisplayDonate","onTelegramAuth","autoAuthTelegramObserver","debugWriteTelegramAuth","cookie_field","couponCheck","coins","selector_c","input","coupon_notfd","check_coupon_valid","input_lock","donateCartCall","donate_enable_coupon","get_data_service","generatePaymentLink","sum","max_sum","_d_service","callback_data","zalupa_pay","zalupa_pay_finish_modal","enable_modal_result_sc","payment_action_bt","open","cart_dom","succ_text","cont_ok","build_modal_wind","flush_inputs_donate","services_cookie","services_origin","_i6","nickname_update","cart_keys","selectors_payment","sum_price","_i7","coupon_container","sum_container","donateCoinsPay","donateModalCall","type_item","item_id","customer_field","email_container_classL","modal_payment_text","selector_method_pay","payment_text_form","item_name","update_title","descriptor","donate_sum_title","desc_get","randomNick","fldSelect","linksSet","fisrt_el_mrg","mrg","token_","initLanding","finishLoad","heart","observerSystemTheme","mode_list","theme_switch","updateTheme","root","_loop4","matchMedia","matches","callSucessPayModal","glob_func_payment_data","item_nm_payment_result","item_type_","product_name","t","update_pm_desc","img_product","name_product","name_selector","buildPayment","status","private_gift_button","item_type","system_template","payment_system","sum_template","enrolled","prepend","created_at","parsed_time","template_invite_link","private_invite","enable_modal","successPay","displayPromotion","main","promotion","active","s_text","paddingLeft","adaptiveDisplayLand","updater","header_height","offsetHeight","vova_pc_version","vova_pc_version_mask","clipboardFunc","field_selector","notify_text","copyText","setSelectionRange","clipboard","writeText","spClownLoad","buttons","spClownShow","donateContainerHash","observerContainerHash","rulesModalOpen","rules","rulesPrivateContainerHash","openAdminContact","max_len","label","space","maxLength","update_len_counter","adminsContactContainerHash","hash_array","skip_check","script_telegram_widget","telegram_bot_username","initJarallax","jarallax","speed","initTooltip","tooltipTriggerList","tooltipList","tooltipTriggerEl","bootstrap","Tooltip","update","initSmoothScrollObserver","scrollerObject","SmoothScroll","callScroller","identifier","animateScroll","offset","onhashchange","privateServerModuleInit","tonyComeBack","update_days","days_count","date1","date2","differenceInTime","differenceInDays","button_contact_land","button_auth","telegram_auth_avatar","initCore","preloader","wait","move_wait","script_core"],"sources":["../assets/js/core.js"],"sourcesContent":["/**\n * @suppress {uselessCode}\n */\n\n\"use strict\";\nconst site_domains = {\n    prod: domain_site,\n    dev: development_hosts[0],\n    test: development_hosts[1],\n};\nconst cart_cookie = \"cart_box\";\nconst channels = 2;\nconst links_lt = [\n    {\n        name: \"twitch\",\n        link: \"https://www.twitch.tv/bratishkinoff\"\n    },\n    {\n        name: \"youtube\",\n        link: \"https://www.youtube.com/channel/UC_-kIftWIXsTrVXZy0lJdXQ\"\n    },\n    {\n        name: \"telegram\",\n        link: \"https://t.me/zalupaonline\"\n    },\n    {\n        name: \"discord\",\n        link: \"https://discord.com/invite/89squad\"\n    },\n    {\n        name: \"tiktok\",\n        link: \"https://www.tiktok.com/@nebratishkin\"\n    }\n];\nconst launcher_platforms = {\n    mac: \"dmg\",\n    linux: \"deb\",\n    windows: \"msi\"\n}\nconst gitOwner = \"Zalupa-Online\";\nconst gitLauncherRepo = \"launcher-releases\";\nconst lock_of = true;\nconst coins_sell_mode = true;\n\nvar selector_card_skin_displayed = \"\";\nvar donate_services_array = [];\nvar notify_hidden = true;\nvar glob_players = [];\nvar glob_events_status = false;\nvar allow_display_login_hint = true;\nvar timer_notify;\nvar swiper_comments;\nvar payment_url_global;\nvar checked_coupon = \"\";\nvar failed_coupon = \"\";\nvar crypto_token = \"\";\nvar tooltip_instance;\nvar events_page_state = \"news\";\nvar donate_displayed = false;\nvar modal_displayed = false;\nvar freeze_crypto = false;\nvar freeze_monitoring = false;\nvar lock_sticker_switch = false;\nvar gameServerUpdater_setter;\nvar work_domain_v = \"zalupa.online\";\nvar products_by_serverid = [];\nvar glob_auth_player_data = [];\nvar current_c_item = 0;\nvar current_c_item_name = \"\";\nvar telegram_cookie_token = \"telegram_auth\";\nvar first_init_head_adapt = 0;\nvar first_init_head_adapt_vova = 0;\nvar current_item_type = 0;\nvar client_ip = \"\";\nvar avatar_loaded = false;\nvar telegram_glob_session = {\n    auth_data: null, response: null\n};\n\nconst telegram_social_bot = \"https://t.me/ZalupaScBot\";\nconst debug_lock_init = false;\nconst telegram_auth_enabled = true;\nconst feedback_module_enabled = false;\nconst feedback_tg_auth_skip = true;\nconst tokens_system_enabled = true;\n\n\nconst initHost = () => {\n    const keys = Object.keys(site_domains);\n    for (let i = 0; i < keys.length; i++) {\n        if (site_domains[keys[i]] === window.location.hostname) {\n            work_domain_v = site_domains[keys[i]];\n        }\n    }\n}\nconst linkHash = () => {\n    return window.location.hash.substring(1);\n}\nconst prepare_img_link = (img_link) => {\n    return img_link.replace(\"https://\", \"//\").replaceAll(/\\//g, \"\\\\/\");\n}\nconst time_correction = (date) => {\n    const userTimezoneOffset = -date.getTimezoneOffset() * 60000;\n    return new Date(date.getTime() - userTimezoneOffset);\n}\nconst time_in_moscow_get = (date = null) => {\n    if (!date) {\n        date = new Date();\n    }\n    return new Date(date.toLocaleString(\"en-US\", {\n        timeZone: \"Europe/Moscow\",\n    }));\n}\nconst getOffset = (date, timezone) => {\n    try {\n        -new Date(date).toLocaleString([], {\n            timeZone: timezone,\n            timeZoneName: 'shortOffset'\n        }).match(/(?:GMT|UTC).+/)[0] * 60;\n    } catch (e) {\n        console.error(`getOffset : ${e}`);\n        return 0;\n    }\n}\nconst formatDate = (date, now = null) => {\n    let diff = new Date() - date;\n    if (now) {\n        diff = now - date;\n    }\n\n    if (diff < 1000) {\n        return 'прямо сейчас';\n    }\n\n    let sec = Math.floor(diff / 1000);\n\n    if (sec < 60) {\n        return sec + ` ${getNoun(sec, \"секунду\", \"секунды\", \"секунд\")} назад`;\n    }\n\n    let min = Math.floor(diff / (1000 * 60));\n    if (min < 60) {\n        return min + ` ${getNoun(min, \"минуту\", \"минуты\", \"минут\")} назад`;\n    }\n\n    let hour = Math.floor(diff / (1000 * 60 * 60));\n    if (hour < 24) {\n        return hour + ` ${getNoun(hour, \"час\", \"часа\", \"часов\")} назад`;\n    }\n\n    let d = date;\n    d = [\n        '0' + d.getDate(),\n        '0' + (d.getMonth() + 1),\n        '' + d.getFullYear(),\n        '0' + d.getHours(),\n        '0' + d.getMinutes()\n    ].map(component => component.slice(-2));\n\n    return d.slice(0, 3).join('.') + ' ' + d.slice(3).join(':');\n}\nconst utf8_to_b64 = (str) => {\n    return window.btoa(unescape(encodeURIComponent(str)));\n}\nconst b64_to_utf8 = (str) => {\n    return decodeURIComponent(escape(window.atob(str)));\n}\nconst randDiaps = (max = 10) => {\n    return Math.floor(Math.random() * max) + 1;\n}\nconst getPlatform = () => {\n    if (navigator.platform.indexOf(\"Mac\") === 0 || navigator.platform === \"iPhone\") {\n        return \"mac\";\n    }\n    if (navigator.platform.indexOf(\"Linux\") === 0) {\n        return \"linux\";\n    }\n    return \"windows\";\n}\nconst isChrome = () => {\n    return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n}\nconst downloadLauncher = () => {\n    getGitLauncherReleases(function(links_) {\n        const link = links_[getPlatform()];\n\n        window.location = link;\n        console.debug(`Init downloading file from url : ${link}`);\n\n        if (!isChrome()) {\n            notify(`Сейчас тебе скачаем файл <span class=\"text-gradient-primary\">${\n                link.split(\"/\").slice(-1)[0]\n            }</span>`);\n        }\n    });\n}\nconst generateRandomHex = size => [...Array(size)].map(\n    () => Math.floor(Math.random() * 16).toString(16)\n).join('');\nconst getAvatarColorIDforTG = (user_id) => {\n    var result = 0;\n    var base = 1;\n    while (user_id > 0) {\n        result += (user_id % 7) * base;\n        base *= 10;\n        user_id = Math.floor(user_id / 7);\n    }\n    return parseInt(result.toString().slice(-1));\n}\nconst getHash = (link) => {\n    const hash = window.location.hash.substr(1);\n    return Object.keys(hash.split(\"&\").reduce((result, item) => {\n        const parts = item.split(\"=\");\n        result[parts[0]] = parts[1];\n        return result;\n    }, {}))[0];\n}\nconst re_check = (callback) => {\n    grecaptcha.ready(() => {\n        grecaptcha.execute(re_token, {\n            action: \"submit\",\n        }).then((token_update) => {\n            callback(token_update);\n        });\n    });\n}\nconst shuffle = (array) => {\n    let currentIndex = array.length,\n        randomIndex;\n    while (currentIndex !== 0) {\n        randomIndex = Math.floor(Math.random() * currentIndex);\n        currentIndex--;\n        [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex],];\n    }\n    return array;\n}\nconst alternateSort = (list) => {\n    let minIndex = 0;\n    let minVal = 0;\n    for (let i = 0; i < list.length; i++) {\n        minIndex = i;\n        minVal = list[i];\n        for (let j = i + 1; j < list.length; j++) {\n            if (list[j] < minVal) {\n                minVal = list[j];\n                minIndex = j;\n            }\n        }\n        if (minVal < list[i]) {\n            const temp = list[i];\n            list[i] = list[minIndex];\n            list[minIndex] = temp;\n        }\n    }\n}\nconst getImageLightness = (imageSrc, callback, calculate = true) => {\n    const img = document.createElement(\"img\");\n    img.src = imageSrc;\n    img.crossOrigin = \"Anonymous\";\n    img.style.display = \"none\";\n    document.body.appendChild(img);\n    let colorSum = 0;\n    if (calculate) {\n        img.onload = () => {\n            const canvas = document.createElement(\"canvas\");\n            canvas.width = this.width;\n            canvas.height = this.height;\n            const ctx = canvas.getContext(\"2d\");\n            try {\n                ctx.drawImage(this, 0, 0);\n                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n            } catch (_) {\n                callback(null);\n                return;\n            }\n            const data = imageData.data;\n            let r, g, b, avg;\n            for (let x = 0, len = data.length; x < len; x += 4) {\n                r = data[x];\n                g = data[x + 1];\n                b = data[x + 2];\n                avg = Math.floor((r + g + b) / 3);\n                colorSum += avg;\n            }\n            const brightness = Math.floor(colorSum / (this.width * this.height));\n            callback(brightness);\n            img.remove();\n        };\n    }\n}\nconst is_apple_platform = () => {\n    const mac = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);\n    if (mac) {\n        return true;\n    }\n}\nconst validateEmail = (email) => {\n    return String(email).toLowerCase().match(/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);\n}\nconst url_builder_ = (base_url, submit_data_) => {\n    const url = new URL(base_url);\n    for (let i = 0; i < submit_data_.length; i++) {\n        url.searchParams.set(submit_data_[i].name, submit_data_[i].value);\n    }\n    return url.href;\n}\nconst countProperties = (obj) => {\n    return Object.keys(obj).length;\n}\nconst getNoun = (number, one = \"игрок\", two = \"игрока\", five = \"игроков\") => {\n    let n = Math.abs(number);\n    n %= 100;\n    if (n >= 5 && n <= 20) {\n        return five\n    }\n    n %= 10;\n    if (n === 1) {\n        return one\n    }\n    if (n >= 2 && n <= 4) {\n        return two\n    }\n    return five;\n}\nconst getCrypto = (callback) => {\n    re_check((token_update) => {\n        requestCall((r) => {\n            if (r.success) {\n                callback(r.token);\n            } else {\n                callback(\"\");\n            }\n        }, `${backend_host}/crypto`, \"POST\", true, {\n            token: token_update,\n        });\n    });\n}\nconst get_events_ = (callback) => {\n    re_check((token_update) => {\n        requestCall((r) => {\n            callback(r.events);\n        }, `${backend_host}/events`, \"POST\", true, {\n            token: token_update,\n        });\n    });\n}\nconst get_yt_video_ = (callback, video_id, skip = false) => {\n    if (!skip) {\n        re_check((token_update) => {\n            requestCall(\n                (r) => {\n                    callback(r.body);\n                }, `${backend_host}/youtube_get`, \"POST\", true, {\n                    token: token_update,\n                    video_id: video_id,\n                });\n        });\n    } else {\n        callback(null);\n    }\n}\nconst get_news_ = (callback, source) => {\n    re_check((token_update) => {\n        requestCall((r) => {\n            callback(r.messages);\n        }, `${backend_host}/channel_parse?choice=${source}`, \"POST\", true, {\n            token: token_update,\n        });\n    });\n}\nconst get_rules_private_server = (callback) => {\n    requestCall((r) => {\n        callback(r);\n    }, \"assets/data/private_server_rules.json\", \"GET\", true);\n}\nconst appendPostsNews = (iframe=true) => {\n    const loading_done = () => {\n        setTimeout(\n            () => {\n                const sl = document.getElementById(\"telegram_block_load\");\n                const container_news = document.getElementById(\"news_zlp_buttons\");\n                try {\n                    sl.parentNode.removeChild(sl);\n                    container_news.style.display = \"\";\n                } catch (_) {}\n            }, 150);\n    };\n    if (iframe) {\n        const template = `\n        <div class=\"shadow-vertical-overlay vertical-top-shadow\" style=\"width:100vw!important\"></div>\n        <div class=\"shadow-vertical-overlay vertical-bottom-shadow\" style=\"width:100vw!important\"></div>\n        <iframe \n            style=\"min-height:450px;width:100vw\" \n            id=\"tg-iframe-view\"\n            src=\"https://telegram-worker.zalupa.online/zalupaonline\" \n            onload=\"try{document.getElementById('telegram_block_load').remove()} catch {}\">\n        </iframe>`;\n        const c = document.getElementById(\"news-c-container\");\n        c.innerHTML = template + c.innerHTML;\n        loading_done();\n\n        document.getElementById(\"theme-mode\").addEventListener('change', function() {\n            const frame = document.getElementById(\"tg-iframe-view\");\n            const url_ob = new URL(frame.src);\n\n            if (this.checked) {\n                url_ob.hash = \"#dark\";\n            } else {\n                url_ob.hash = \"#light\";\n            }\n            frame.src = url_ob.href;\n        });\n    } else {\n        const createSwiper = () => {\n            new Swiper(\"#news_swipe_container\", {\n                spaceBetween: 12,\n                loop: true,\n                observer: true,\n                observeParents: true,\n                preventClicks: false,\n                preventClicksPropagation: false,\n                autoplay: {\n                    delay: 1000 * 10,\n                },\n                pagination: {\n                    el: \"#news_swiper_pagination\",\n                    clickable: true,\n                },\n                navigation: {\n                    prevEl: \"#prev_news\",\n                    nextEl: \"#next_news\",\n                },\n            });\n        };\n        const text_modify_enable = true;\n        const text_size_static = true;\n        const add_news_in_array = (posts) => {\n            const adaptive_news_text = true;\n            const array_ = document.getElementById(\"news_swipe_array\");\n            posts = posts.reverse();\n            for (let i = 0; i < posts.length; i++) {\n                const text = posts[i].text;\n                const text_els = text.split(\" \");\n                const datetime = new Date(posts[i].datetime_utc);\n                if (!posts[i].cover) {\n                    posts[i].cover = \"assets/images/spawn.webp\";\n                }\n                array_.innerHTML = array_.innerHTML + `\n                    <div class=\"swiper-slide h-auto px-2\" style=\"max-height: 40vh !important;display: ${\n                    text_els.length >= 5 ? 'block' : 'none'\n                }\">\n                        <figure class=\"card h-100 position-relative border-0 news-figure\" id=\"news_figure_${i}\">\n                            <div class=\"background-news\" id=\"background-news-${i}\">\n                                <div class=\"background-news-overlay\" id=\"news-overlay-${i}\">\n                                    <div class=\"background-news-overlay-dark-mode\">\n                                        <div \n                                        style=\"z-index:6;top:35.1%;height:65%\"\n                                        class=\"shadow-vertical-overlay shadow-vertical-overlay-news vertical-bottom-shadow\"\n                                        ></div>\n                                        <blockquote class=\"card-body mt-2 mb-3 news-text-container\">\n                                            <p class=\"fs-md mb-0 news-text h6\" id=\"news_text_${i}\" style=\"font-family:sans-serif\">\n                                                    ${text}</p>\n                                            <div class=\"news-bottom-container\" style=\"z-index:8\">\n                                                <a class=\"btn btn-primary shadow-primary btn-lg news-button-view\"\n                                                   href=\"${posts[i].link}\" target=\"_blank\">\n                                                        Подробнее</a>\n                                            </div>\n                                        </blockquote>\n                                    </div>\n                                </div> \n                            </div>\n                        </figure>\n                        <span class=\"news-date-text\">\n                            ${datetime.toLocaleDateString()} \n                            ${datetime.toLocaleTimeString(\"ru-RU\", {\n                    hour: \"2-digit\", minute: \"2-digit\",\n                })}\n                        </span>\n                    </div>\n                `;\n                const selector_bg = document.getElementById(`background-news-${i}`);\n                selector_bg.style.backgroundImage = `url(${posts[i].cover})`;\n                if (text_modify_enable) {\n                    const selector_text = document.getElementById(`news_text_${i}`);\n                    selector_text.style.width = \"100%\";\n                    selector_text.classList.add(\"text-light\");\n                    if (text_size_static) {\n                        selector_text.style.fontSize = 'calc(1.35vw + .75vh)';\n                    } else {\n                        const text_len = selector_text.innerText.length;\n                        const text_split = selector_text.innerText.split(\" \");\n                        const font_size = ((text_len - -8) * .4) / 100;\n                        const fix_float_fs = (\n                            float, font_size, correction_float = .55,\n                            correction_font = .26, max_val = .94\n                        ) => {\n                            float = float < correction_float ? correction_float * (\n                                font_size / correction_font\n                            ) : float\n                            return max_val ? (float < max_val ? float : max_val) : float\n                        }\n                        selector_text.style.fontSize = `calc(${\n                            fix_float_fs(parseFloat(1.96 - font_size), font_size)\n                        }vw + ${\n                            fix_float_fs(parseFloat(2.16 - font_size), font_size)\n                        }vh + ${\n                            fix_float_fs(parseFloat(2 - font_size), font_size)\n                        }vmin)`;\n                        selector_text.style.padding = `${\n                            fix_float_fs(parseFloat(\n                                1.45 - font_size\n                            ), font_size, .22, 1.05)\n                        }rem`;\n                        const calculate_text_position = () => {\n                            if (!adaptive_news_text) {\n                                return;\n                            }\n                            // local init var\n                            const identifier_sl = `news_text_${i}`;\n                            const switch_val = 10;\n                            const selector_text = document.getElementById(identifier_sl);\n                            const font_size = parseFloat(\n                                window.getComputedStyle(selector_text, null)\n                                    .getPropertyValue('font-size')\n                                    .replace(\"px\", \"\")\n                            );\n                            selector_text.style.maxHeight = \"32vh\";\n                            if (font_size > switch_val) {\n                                selector_text.style.position = \"absolute\";\n                                selector_text.style.display = \"inline-block\";\n                                selector_text.style.paddingBottom = \"5rem\";\n                                selector_text.style.paddingRight = \"3rem\";\n                            } else {\n                                selector_text.style.position = \"\";\n                                selector_text.style.display = \"\";\n                                selector_text.style.paddingBottom = \"\";\n                                selector_text.style.paddingRight = \"\";\n                            }\n                        }\n                        addEventListener('resize', (event) => calculate_text_position());\n                        // setInterval(calculate_text_position, 50);\n                    }\n                }\n                getImageLightness(posts[i].cover, (brightness) => {\n                    const style_ = `#000000${\n                        (((parseFloat(brightness) / 255.0) * 100.0)\n                            .toFixed() + 64)\n                            .toString(16)\n                            .slice(0, 2)\n                    }`;\n                    document.getElementById(`news-overlay-${i}`).style.background = style_;\n                });\n            }\n            if (posts) {\n                createSwiper();\n                loading_done();\n            }\n        };\n        get_news_((posts) => {\n            add_news_in_array(posts);\n        }, 1);\n    }\n}\nconst closeButtonDonateAdaptive = () => {\n    if (!is_apple_platform()) {\n        document.getElementById(\"exit-button-container-donate\").style.minHeight = \"100%\";\n    }\n}\nconst donateSwitchContainer = (display) => {\n    const container = document.querySelector(\".donate-global-container\");\n    const style_sticker = document.getElementById(\"super-klassniy-sticker-0\").style;\n    const style_main = document.querySelector(\"main\").style;\n    style_sticker.opacity = 0;\n    const update_zIndex = (variable) => {\n        setTimeout(() => {\n            container.style.zIndex = variable;\n        }, 850);\n    };\n    if (!donate_displayed || display) {\n        const button = document.getElementById(\"donateButtonLandingTop\");\n        button.setAttribute(\"disabled\", \"\");\n        notify(\"Переходим к донату...\");\n\n        closeButtonDonateAdaptive();\n\n        checkTelegramAuthData(function (tg_success) {\n            button.removeAttribute(\"disabled\");\n            if (tg_success) {\n                document.body.style.overflowY = \"hidden\";\n                window.scrollTo({\n                    top: 0,\n                    behavior: \"smooth\",\n                });\n                container.style.minHeight = \"\";\n                update_zIndex(\"\");\n                donate_displayed = true;\n                location.hash = \"#donate\";\n                style_main.paddingTop = \"50px\";\n            } else {\n                openTelegramAuthModal(true);\n            }\n        });\n    } else {\n        container.style.minHeight = \"0\";\n        container.style.zIndex = \"-1\";\n        document.body.style.overflowY = \"\";\n        donate_displayed = false;\n        location.hash = \"#\";\n        style_main.paddingTop = \"0\";\n    }\n}\nconst get_game_server_data = (callback) => {\n    const _data_error = (ok = false) => {\n        let string_ = \"\";\n        if (ok) {\n            string_ = \"\";\n        } else {\n            string_ = \"Не удается обновить информацию о сервере...\";\n        }\n        document.getElementById(\"error_get_server_status\").innerText = string_;\n    };\n    console.debug(`crypto_token.length: ${crypto_token.length}`);\n    if (crypto_token) {\n        requestCall((r) => {\n            setTimeout(\n                () => {\n                    freeze_monitoring = false;\n                }, 800);\n            if (r.success) {\n                callback(r.body);\n            } else {\n                crypto_token = \"\";\n            }\n        }, `${backend_host}/server`, \"POST\", true, {\n            crypto_token: crypto_token\n        });\n    } else {\n        initCrypto();\n        freeze_monitoring = false;\n    }\n}\nconst monitoring_game_server_update = () => {\n    if (!freeze_monitoring) {\n        freeze_monitoring = true;\n        get_game_server_data((data) => {\n            if (data.online) {\n                if (typeof gameServerUpdater_setter !== \"undefined\") {\n                    clearInterval(gameServerUpdater_setter);\n                }\n                const selector = document.getElementById(\"server_online_status\");\n                selector.classList.remove(\"loading-dots\");\n                selector.innerHTML = `Сейчас играет <span class=\"text-primary fw-semibold\">${data.online}</span>\n            <i class=\"emoji male-emoji\" style=\"margin-left: -.35rem!important;background-image:url('assets/images/emoji/male.png')\"><b>♂</b></i>\n            ${getNoun(data.online)}\n            <i class=\"emoji male-emoji\" style=\"background-image:url('assets/images/emoji/male.png')\"><b>♂</b></i>\n            `;\n            }\n        });\n    }\n}\nconst gameServerUpdater = () => {\n    monitoring_game_server_update();\n    gameServerUpdater_setter = setInterval(monitoring_game_server_update, 650);\n    setInterval(monitoring_game_server_update, 6000);\n}\nconst initEventsList = () => {\n    const row_container = document.getElementById(\"events-row-container\");\n    const loader_ = document.getElementById(\"events_block_load\");\n    const switch_button_ = document.getElementById(\"events-c-button\");\n    const row_class = [\"row-cols-md-2\", \"row-cols-lg-2\", \"row-cols-xl-3\"];\n\n    get_events_((data) => {\n        switch_button_.removeAttribute(\"disabled\");\n        if (data && data.length) {\n            glob_events_status = true;\n            events_block_load.remove();\n            data.sort((a, b) => {\n                const keyA = new Date(a.date_start),\n                    keyB = new Date(b.date_start);\n                if (keyA < keyB) return -1;\n                if (keyA > keyB) return 1;\n                return 0;\n            });\n            for (let i = 0; i < data.length; i++) {\n                if (3 > i > 0) {\n                    row_container.classList.add(row_class[i]);\n                }\n                const st_date = time_correction(new Date(data[i].date_start));\n                const end_date = time_correction(new Date(data[i].date_end));\n                const time_in_moscow = time_in_moscow_get();\n                let badge = \"\";\n                if (st_date > time_in_moscow) {\n                    badge = \"Скоро\";\n                } else if (time_in_moscow > end_date) {\n                    badge = \"Завершено\";\n                }\n                const template_ = `\n                    <div class=\"col\">\n                        <div class=\"object-block-col\">\n                            <h1>${data[i].title}</h1>\n                            <h4 class=\"text-primary\" style=\"margin-top: -1.2rem\">${badge}</h4>\n                            <h6 style=\"margin-top: -1rem\">С <span class=\"text-primary\">\n                                ${st_date.toLocaleDateString(\"ru-RU\")} ${\n                                    (\"0\" + st_date.getHours()).slice(-2)}:${\n                                        (\"0\" + st_date.getMinutes()).slice(-2)}\n                                </span> по <span class=\"text-primary\">\n                                ${end_date.toLocaleDateString(\"ru-RU\")} ${\n                                    (\"0\" + end_date.getHours()).slice(-2)}:${\n                                        (\"0\" + end_date.getMinutes()).slice(-2)}\n                                </span></h6>\n                            <p>${data[i].text}</p>\n                        </div>\n                    </div>\n                `;\n                row_container.innerHTML = row_container.innerHTML + template_;\n            }\n        }\n    });\n}\nconst get_donate_services = (callback) => {\n    re_check((token_update) => {\n        requestCall((r) => {\n            callback(r.services);\n        }, `${backend_host}/donate/services`, \"POST\", true, {\n            token: token_update,\n        });\n    });\n}\nconst create_payment = (callback, customer, products, server_id, email = \"\", coupon = \"\") => {\n    re_check((token_update) => {\n        requestCall((r) => {\n            callback(r.payment);\n        }, `${backend_host}/donate/payment/create`, \"POST\", true, {\n            customer: customer,\n            products: products,\n            email: email,\n            coupon: ((donatePayMethodSelector() !== 2) ? coupon : null),\n            token: token_update,\n            server_id: server_id,\n            pay_method: donatePayMethodSelector(),\n            success_url: `https://${work_domain_v}`,\n            tg_auth_data: getTelegramAuth(true)\n        });\n    });\n}\nconst generateGiftLink = (callback, payment_id) => {\n    getCrypto((crypto_token) => {\n        callback(`${backend_host}/gift/private_server?` + `payment_id=${payment_id}&` + `crypto_token=${\n            encodeURIComponent(crypto_token)}&` + `sign=${generateRandomHex(24)}`);\n    })\n}\nconst check_coupon = (callback, coupon) => {\n    re_check((token_update) => {\n        requestCall((r) => {\n            if (r.coupon && r.success) {\n                callback(r.coupon);\n            } else {\n                callback(null);\n            }\n        }, `${backend_host}/donate/coupon`, \"POST\", true, {\n            code: coupon,\n            token: token_update,\n            pay_method: donatePayMethodSelector()\n        });\n    });\n}\nconst testImage = (url) => {\n    const tester = new Image();\n    // tester.addEventListener('load', TSimageFound);\n    tester.addEventListener('error', reInitTelegramAuth);\n    tester.src = url;\n}\nconst loadPlayerAvatar = (avatar, def_selector=\"telegram-auth-avatar\", url_generator=false, back=false) => {\n    const exec_ = () => {\n        let avatar_selector = null;\n        let avatar_style = null;\n\n        if (!url_generator) {\n            try {\n                avatar_selector = document.getElementById(def_selector);\n                avatar_selector.style;\n            } catch {}\n\n            console.debug(`Load avatar : ${avatar}`);\n            document.getElementById(\"tg-user-avatar-text\").innerText = \"\";\n        }\n\n        for (let i = 0; i < 10; i++) {\n            if (!crypto_token && back) {\n                initCrypto();\n            } else {\n                let raw_link = \"\";\n                if (back) {\n                    raw_link = `${\n                        backend_host\n                    }/profile/avatar/?texture_hash=${\n                        avatar\n                    }&crypto_token=${\n                        encodeURIComponent(crypto_token)\n                    }&tg_auth=${\n                        encodeURIComponent(getTelegramAuth(true))\n                    }`;\n                } else {\n                    raw_link = `//communication.zalupa.online/tiles/faces/32x32/${avatar}.png`;\n                }\n\n                const link = prepare_img_link(raw_link);\n\n                testImage(raw_link);\n\n                if (!url_generator) {\n                    avatar_selector.setAttribute(\n                        \"style\", `background-image: url(\"${link}\");border-radius:.${\n                            def_selector.includes(\"card-avatar\") ? 35 : 15}rem;`\n                    );\n                } else {\n                    return link;\n                }\n\n                return;\n            }\n        }\n    }\n\n    exec_();\n}\nconst reInitTelegramAuth = () => {\n    checkTelegramAuthData(function (_) {\n    });\n}\nconst checkTelegramAuthData = (callback, skip = false, raw = false, skip_cache = false) => {\n    const auth_data = getTelegramAuth(true);\n    if (auth_data) {\n        if (telegram_glob_session.auth_data === auth_data && !skip_cache) {\n            callback(telegram_glob_session.response.success);\n            return;\n        }\n        console.debug(`skip pos : ${skip}`);\n        if (!skip) {\n            re_check((token_update) => {\n                requestCall((r) => {\n                    if (r) {\n                        console.debug(r);\n                        if (!r.success) {\n                            // location.href = telegram_social_bot;\n                            // console.log(\"Redirect to \" + telegram_social_bot);\n                            openLoginHint();\n                            callback(false);\n                        } else {\n                            const avatar = document.getElementById(\"telegram-auth-avatar\");\n                            /*\n                                data-bs-toggle=\"tooltip\" data-bs-placement=\"bottom\"\n                                title=\"TITLE_TEXT\"\n                            */\n                            glob_auth_player_data = r.player_data;\n                            console.debug(r);\n                            // const orderedData = getTelegramAuth();\n                            if (r.player_data) {\n                                const player = r.player_data;\n                                const skin = player.NICKNAME;\n                                const avatar_init = () => {\n                                    if (\n                                        !avatar.style.backgroundImage || avatar.style.backgroundImage.length < 1\n                                    ) {\n                                        loadPlayerAvatar(skin);\n                                        loadPlayerAvatar(skin, \"card-avatar-object\");\n                                        avatar_loaded = true;\n                                    }\n                                }\n\n                                avatar_init();\n                                avatar.setAttribute(\"data-bs-toggle\", \"tooltip\");\n                                avatar.setAttribute(\"data-bs-placement\", \"bottom\");\n                                avatar.setAttribute(\"title\", player[\"NICKNAME\"]);\n\n                                setInterval(function () {\n                                    avatar_init();\n                                }, 300);\n\n                                allow_display_login_hint = false;\n                            }\n                            telegram_glob_session = {\n                                auth_data: auth_data,\n                                response: r\n                            };\n                            callback(raw ? r : r.success);\n                        }\n                    } else {\n                        callback(false);\n                    }\n                }, `${backend_host}/telegram/auth/check`, \"POST\", true, {\n                    token: token_update,\n                    tg_auth_data: auth_data\n                });\n            });\n        } else {\n            callback(true);\n        }\n    } else {\n        callback(false);\n    }\n}\nconst getIPClient = (callback) => {\n    // getIPClient(function () {});\n    requestCall(\n        (r) => {\n            if (r && r.success) {\n                client_ip = r.ip;\n                callback(r.ip);\n            } else {\n                callback(null);\n            }\n        }, `${backend_host}/ip`, \"GET\", true);\n}\nconst cloudflareTraceJSON = (text) => {\n    const keys = text.split(\"\\n\");\n    let dict = {};\n    for (const k of keys) {\n        p = k.split(\"=\");\n        dict[p[0]] = p[1];\n    }\n    console.debug(dict);\n    return dict;\n}\nconst cloudflareTrace = (callback) => {\n    requestCall(\n        (r) => {\n            if (r) {\n                callback(cloudflareTraceJSON(r));\n            } else {\n                callback(null);\n            }\n        }, `https://cloudflare.com/cdn-cgi/trace`, \"GET\", false);\n}\nconst getGitLauncherReleases = (callback) => {\n    requestCall(\n        (r) => {\n            if (\n                r && r.id && r.target_commitish === \"main\" &&\n                r.author.login === \"hevav\" &&\n                !r.draft && r.assets.length\n            ) {\n                let links = {};\n                for (let p of Object.keys(launcher_platforms)) {\n                    for (let a of r.assets) {\n                        if (a.name.split(\".\").slice(-1)[0] === launcher_platforms[p]) {\n                            links[p] = a.browser_download_url;\n                        }\n                    }\n                }\n                callback(links);\n            } else {\n                callback([]);\n            }\n        }, `https://api.github.com/repos/${gitOwner}/${gitLauncherRepo}/releases/latest`,\n        \"GET\", true\n    );\n}\nconst setLauncherLinks = () => {\n    const button_template = (link, name) => {return `\n        <a href=\"${link}\" style=\"text-transform:capitalize\"\n           class=\"btn btn-primary shadow-primary mt-3 m-1\" download=\"\">\n        ${name.toLowerCase()}</a>\n    `};\n    const selector = document.getElementById(\"zalupa-launcher-links\");\n\n    getGitLauncherReleases(function (d_links) {\n        const keys = Object.keys(d_links);\n        for (let k of keys) {\n            selector.innerHTML = selector.innerHTML + button_template(d_links[k], k);\n        }\n    });\n}\nconst checkFeedbackStatus = (callback) => {\n    const auth_data = getTelegramAuth(true);\n    if (auth_data) {\n        re_check((token_update) => {\n            requestCall(\n                (r) => {\n                    if (r) {\n                        callback(r.success);\n                    } else {\n                        callback(false);\n                    }\n                }, `${backend_host}/feedback/check`, \"POST\", true, {\n                    token: token_update,\n                    tg_auth_data: auth_data\n                });\n        });\n    }\n}\nconst sendFeedback = (callback, text) => {\n    const auth_data = getTelegramAuth(true);\n    if (auth_data) {\n        re_check((token_update) => {\n            requestCall(\n                (r) => {\n                    if (r) {\n                        callback(r.success);\n                    } else {\n                        callback(false);\n                    }\n                }, `${backend_host}/feedback/send`, \"POST\", true, {\n                    text: text,\n                    token: token_update,\n                    tg_auth_data: auth_data\n                });\n        });\n    }\n}\nconst sendFeedbackAction = () => {\n    const button = document.getElementById(\"send-feedback-button\");\n    const textarea = document.getElementById(\"admin-message\");\n    const text = textarea.value;\n    if (text.length < 20) {\n        notify(\"Сообщение очень короткое!\");\n        return;\n    }\n    const button_lock = (lock = true) => {\n        if (lock) {\n            button.setAttribute(\"disabled\", \"\");\n        } else {\n            button.removeAttribute(\"disabled\");\n        }\n        button.innerText = lock ? \"Ожидайте...\" : \"Отправить\";\n    }\n    button_lock();\n    checkFeedbackStatus((check_data) => {\n        if (check_data) {\n            sendFeedback(\n                (send_data) => {\n                    if (send_data) {\n                        notify(\"Сообщение отправлено админам.\");\n                    } else {\n                        notify(\"Ошибка на стороне сервера, попробуйте позже.\");\n                    }\n                    button_lock(false);\n                }, text);\n        } else {\n            button_lock(false);\n            notify(\"Не удалось пройти проверку, попробуйте позже.\");\n        }\n    });\n}\nconst checkPayment = (callback, payment_id) => {\n    re_check((token_update) => {\n        requestCall((r) => {\n            callback(r.payment);\n        }, `${backend_host}/donate/payment_get`, \"POST\", true, {\n            payment_id: parseInt(payment_id),\n            token: token_update,\n            tokens_send: coins_sell_mode,\n        });\n    });\n}\nconst getPaymentHistory = (callback) => {\n    re_check((token_update) => {\n        requestCall((r) => {\n            try {\n                callback(r.payment);\n            } catch (_) {\n                callback(null);\n                return;\n            }\n        }, `${backend_host}/donate/payment_history`, \"POST\", true, {\n            token: token_update\n        });\n    });\n}\nconst getPlayersSkins = (callback, players, enabled=false) => {\n    if (!enabled) {\n        callback(null);\n        return;\n    }\n    re_check((token_update) => {\n        requestCall((r) => {\n            callback(r.skins);\n        },\n            `${backend_host}/profile/skins/get`,\n            \"POST\", true, {\n            token: token_update,\n            players: players\n        });\n    });\n}\nconst appendServices = () => {\n    get_donate_services((services) => {\n        donate_services_array = services;\n        const size_classes = [\"row-cols-sm-2\", \"row-cols-md-3\", \"row-cols-lg-4\"];\n        const sl = document.getElementById(\"donate_items_list\");\n        const get_product_type = (name, type) => {\n            name = name.toLowerCase();\n            type = type.toLowerCase();\n            /*\n                1 - токены\n                2 - проходка\n                3 - слоты\n            */\n            if (name.includes(\"токен\") && type === \"currency\") {\n                return 1;\n            } else if (name.includes(\"слот\") && type === \"currency\") {\n                return 3;\n            } else if (name.includes(\"проходка\") && type === \"other\") {\n                return 2;\n            }\n        }\n        if (!services.length) {\n            sl.innerHTML = '<span class=\"text-center\">Не удалось получить список товаров.</span>';\n        } else {\n            donate_check_services_cart();\n            for (let i = 0; i < services.length; i++) {\n                const click_data = {\n                    name: services[i].name,\n                    price: services[i].price,\n                    count: services[i].number,\n                    description: services[i].description,\n                    type: services[i].type,\n                    service_id: services[i].id,\n                    server_id: services[i].server_id,\n                };\n                products_by_serverid.push(services[i]);\n                let _name = \"\";\n                // const _desc = \"\";\n                let padding_desc = \"p-3\";\n                let desc_template = `\n                    <p class=\"mb-0\">\n                        ${services[i].price} \n                        ${getNoun(services[i].price, \"рубль\", \"рубля\", \"рублей\")} \n                        = \n                        ${services[i].number} \n                        ${getNoun(services[i].number, \"единица\", \"единицы\", \"единиц\")}\n                    </p>\n                    <p class=\"fs-sm mb-0\">${services[i].description}</p>\n                `;\n                let item_butt_template = '';\n                if (i && size_classes.length >= i) {\n                    sl.classList.add(size_classes[i - 1]);\n                }\n                let click_template = `onClick=\"donate_element_click(${JSON.stringify(click_data)})\"`;\n                if (!coins_sell_mode) {\n                    _name = services[i].name;\n                } else {\n                    let button_title = \"Приобрести\";\n                    let description_other = \"Товар без описания.\";\n                    if (services[i].description) {\n                        description_other = services[i].description\n                    }\n                    if (services[i].name.toLowerCase().includes(\"токен\")) {\n                        _name = `${services[i].price} ${\n                            getNoun(services[i].price, \"рубль\", \"рубля\", \"рублей\")\n                        } = <span class=\"text-primary\">${services[i].number} ${\n                            getNoun(services[i].number, \"токен\", \"токена\", \"токенов\")\n                        }</span>`;\n                        padding_desc = \"p-0\";\n                        desc_template = `\n                        <p class=\"mb-0 token-description-dnt\">\n                            Игровая валюта, которую можно получить как в игре, так и за поддержку проекта.\n                        </p>`;\n                        click_template = \"\";\n                    } else if (services[i].name.toLowerCase().includes(\"слот\")) {\n                        _name = `${services[i].price} ${\n                            getNoun(services[i].price, \"рубль\", \"рубля\", \"рублей\")\n                        } = <span class=\"text-primary\">${services[i].number} ${\n                            getNoun(services[i].number, \"слот\", \"слота\", \"слотов\")\n                        }</span>`;\n                        padding_desc = \"p-0\";\n                        desc_template = `\n                        <p class=\"mb-0 token-description-dnt\">\n                            ${description_other}\n                        </p>`;\n                        click_template = \"\";\n                    } else if (services[i].type = \"other\") {\n                        _name = `\n                        <span class=\"text-primary\">${services[i].name}</span>,\n                        ${services[i].price} ${\n                            getNoun(services[i].price, \"рубль\", \"рубля\", \"рублей\")\n                        }`;\n                        padding_desc = \"p-0\";\n                        desc_template = `\n                        <p class=\"mb-0 token-description-dnt\">\n                            ${description_other}\n                        </p>`;\n                        click_template = \"\";\n                    }\n                    item_butt_template = `\n                        <button class=\"btn btn-primary shadow-primary btn-shadow-hide btn-lg min-w-zl donate-item-butt-bottom\" \n                            onclick=\"donateModalCall(\n                                ${get_product_type(click_data.name, click_data.type)}, ${click_data.service_id}\n                            )\">\n                            ${button_title}\n                        </button>`;\n                }\n                services[i].image = prepare_img_link(services[i].image);\n                sl.innerHTML = sl.innerHTML + `\n                    <div class=\"col\" id=\"donate_item_${services[i].id}\">\n                        <div class=\"card border-0 bg-transparent\" ${click_template}>\n                          <div class=\"position-relative container-item-donate-n\">\n                            <div class=\"parent-image-shadow donate_item_hover\" \n                                id=\"donate_item_hover_${services[i].id}\">\n                                <div class=\"imageContainer item-levitaion-dec\">\n                                    <div \n                                    class=\"foregroundImg\" \n                                    style=\"background-image: url(${services[i].image})\"\n                                    ></div>\n                                    <div \n                                    class=\"backgroundImg\" \n                                    style=\"background-image: url(${services[i].image})\"\n                                    ></div>                               \n                                 </div>\n                            </div>\n                            <div class=\"card-img-overlay d-flex flex-column align-items-center \n                                        justify-content-center rounded-3\" \n                                 style=\"margin: auto\">\n                            </div>\n                          </div>\n                          <div class=\"card-body text-center ${padding_desc}\">\n                                <h3 class=\"fs-lg fw-semibold pt-1 mb-2\">${_name}</h3>\n                                ${desc_template}\n                                ${item_butt_template}\n                          </div>\n                        </div>\n                    </div>\n                `;\n            }\n            checkPrivateServerBuy();\n            setTimeout(\n                () => {\n                    const elem = document.getElementById(\"donate_block_load\");\n                    const ids = [\n                        \"donate_items_list\", \"donate-header-container\",\n                        \"donate-test-mode-enb\", \"donate-cart-container\"\n                    ];\n                    try {\n                        elem.parentNode.removeChild(elem);\n                    } catch (_) {\n                    }\n                    for (let i = 0; i < ids.length; i++) {\n                        try {\n                            document.getElementById(ids[i]).style.display = \"\";\n                        } catch (e) {\n                            console.log(`Donate block loader error. Details: ${e}`);\n                        }\n                    }\n                }, 100);\n        }\n    });\n}\nconst switchEventsPages = (button_name) => {\n    const news_page = document.getElementById(\"news-c-container\");\n    const events_page = document.getElementById(\"events-c-container\");\n    const news_button = document.getElementById(\"news-c-button\");\n    const events_button = document.getElementById(\"events-c-button\");\n    if (button_name !== events_page_state) {\n        if (button_name === \"events\") {\n            if (glob_events_status) {\n                news_page.style.display = \"none\";\n                events_page.style.display = \"block\";\n                news_button.removeAttribute(\"disabled\");\n                events_button.setAttribute(\"disabled\", \"\");\n                events_page.style.top = \"0\";\n                news_page.style.top = \"-2rem\";\n                events_page_state = \"events\";\n            } else {\n                notify(\"Сейчас ивентов нет...\")\n            }\n        } else if (button_name === \"news\") {\n            news_page.style.display = \"block\";\n            events_page.style.display = \"none\";\n            news_button.setAttribute(\"disabled\", \"\");\n            events_button.removeAttribute(\"disabled\");\n            events_page.style.top = \"-2rem\";\n            news_page.style.top = \"0\";\n            events_page_state = \"news\";\n        }\n    }\n}\nconst redirect_ = (url) => {\n    return window.location.replace(url);\n}\nconst ytVideoSetter = (skip = false, only_iframe = false, local_load = true) => {\n    const load_iframe = (el, video_id, params) => {\n        el.innerHTML = `\n            <iframe src=\"https://www.youtube.com/embed/${video_id}\" title=\"YouTube video player\"\n                frameborder=\"0\" class=\"video-container-yt\" id=\"ytframe_${video_id}\"\n                allow=\"accelerometer; ${\n                    params.autoplay != null ? \"autoplay\" : \"\"\n                }; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                allowfullscreen=\"\" loading=\"lazy\"></iframe>\n        `;\n    }\n    const get_link = (el, video_id, url, params) => {\n        el.innerHTML = `\n            <video class=\"video-container\" preload=\"none\" id=\"ytframe_${video_id}\" \n                    poster=\"/assets/images/videos/${video_id}.webp\" \n                  ${\n                    params.autoplay != null ? 'autoplay=\"\"' : \"\"\n                } ${\n                    params.muted != null ? 'muted=\"\"' : \"\"\n                } ${\n                    params.loop != null ? 'loop=\"\"' : \"\"\n                } ${\n                    params.controls != null ? 'controls=\"\"' : \"\"\n                } style=\"object-fit: contain\">\n                <source src=\"${url}\" type=\"video/mp4\">\n            </video>\n        `;\n    }\n    const set_video = (el, video_id, params) => {\n        if (local_load) {\n            get_link(el, video_id, `//files.zalupa.online/videos/${video_id}.mp4`, params);\n        } else {\n            if (only_iframe) {\n                load_iframe(el, video_id, params);\n            } else {\n                const video = get_yt_video_(\n                    (data) => {\n                        if (data && data.video.x720.url && !skip) {\n                            get_link(el, params, data.video.x720.url);\n                        } else {\n                            load_iframe(el, video_id, params);\n                        }\n                    }, video_id, skip);\n            }\n        }\n    };\n    for (let el of Array.from(document.getElementsByClassName(\"ytVideoSetter\"))) {\n        const video_id = el.getAttribute(\"video_id\");\n        if (video_id && video_id.length && video_id.length < 20) {\n            set_video(el, video_id, {\n                autoplay: el.getAttribute(\"autoplay\"),\n                muted: el.getAttribute(\"muted\"),\n                loop: el.getAttribute(\"loop\"),\n                controls: el.getAttribute(\"controls\"),\n            });\n            if (el.getAttribute(\"bottomzero\")) {\n                document.getElementById(`ytframe_${video_id}`).style.marginBottom = \"0\";\n            }\n        }\n    }\n}\nconst check_modal_ = () => {\n    const close_r = () => {\n        if (!modal_displayed) {\n            modal_close_();\n        }\n    }\n    setInterval(close_r, 250);\n}\nconst modal_close_ = () => {\n    if (modal_displayed) {\n        document.body.classList.remove(\"modal-open\");\n        document.getElementById(\"scroll_butt_container\").style.display = \"\";\n        document.getElementsByTagName(\"html\")[0].style.overflowY = \"\";\n        const cont = document.querySelector(\".modal-content\");\n        cont.classList.remove(\"emoji-pay-back\");\n        cont.style.marginTop = \"2em\";\n        const modal = document.getElementById(\"donate_item_modal\");\n        modal.style.opacity = 0;\n        setTimeout(() => {\n            modal.style.display = \"none\";\n        }, 350);\n        modal_displayed = false;\n    }\n}\nconst modal_open_ = (onclick_lock = false) => {\n    modal_displayed = true;\n    document.body.classList.add(\"modal-open\");\n    document.getElementById(\"scroll_butt_container\").style.display = \"none\";\n    document.getElementsByTagName(\"html\")[0].style.overflowY = \"hidden\";\n    try {\n        document.getElementById(\"private_gift_button_modal\").remove()\n    } catch (_) {\n    }\n    const modal = document.getElementById(\"donate_item_modal\");\n    modal.style.display = \"block\";\n    setTimeout(() => {\n        modal.style.opacity = 1;\n        document.querySelector(\".modal-content\").style.marginTop = 0;\n    }, 50);\n    if (!onclick_lock) {\n        window.onclick = (event) => {\n            if (event.target === modal) {\n                modal_close_();\n            }\n        }\n    }\n}\nconst switch_modal_containers = (mode = \"service\", info_params = {}) => {\n    const span = document.getElementsByClassName(\"close_b\")[0];\n    const info = document.getElementById(\"modal-info-container-c\");\n    const service = document.getElementById(\"modal-donate-container-c\");\n    const service_coins = document.getElementById(\"modal-donate-finish-container-b\");\n    const success = document.getElementById(\"modal-donate-success-container\");\n    const finish_donate = document.getElementById(\"modal-donate-finish-container-c\");\n    const title = document.querySelector(\".modal-title\");\n    const _array = [{\n        name: \"service\",\n        selector: service,\n        title: \"Товар\",\n    },\n        {\n            name: \"service_coins\",\n            selector: service_coins,\n            title: \"Оплата пожертвования\",\n        },\n        {\n            name: \"info\",\n            selector: info,\n            title: \"Сообщение\",\n        },\n        {\n            name: \"success\",\n            selector: success,\n            title: \"Чек\",\n        },\n        {\n            name: \"donate_finish\",\n            selector: finish_donate,\n            title: \"Корзина\",\n        },\n    ];\n    for (let i = 0; i < _array.length; i++) {\n        let _mode = \"none\";\n        if (mode === _array[i].name) {\n            _mode = \"block\";\n            title.innerText = _array[i].title;\n        }\n        _array[i].selector.style.display = _mode;\n    }\n    if (mode === \"info\") {\n        title.innerText = info_params.title;\n        if (info_params.content.length) {\n            document.getElementById(\"info-content-modal\").innerHTML = info_params.content;\n        }\n    }\n    span.onclick = () => {\n        modal_close_();\n    };\n}\nconst discount_calculate = (price, discount) => {\n    discount = discount / 100;\n    return (price * discount).toFixed();\n}\nconst get_cookie_cart = () => {\n    let cookie_cart = {};\n    try {\n        cookie_cart = JSON.parse(Cookies.get(cart_cookie));\n    } catch (_) {\n    }\n    return cookie_cart;\n}\nconst updateCartCount = () => {\n    document.getElementById(\"count_cart_items_dn\").innerText =\n        countProperties(get_cookie_cart());\n}\nconst groupAlreadyInCart = (user_cart) => {\n    const cart = Object.keys(user_cart);\n    for (let i = 0; i < donate_services_array.length; i++) {\n        if (donate_services_array[i].type === \"group\") {\n            if (cart.includes(donate_services_array[i].id.toString())) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n\nconst donatePayMethodSelector = () => {\n    const choice = parseInt(document.getElementById(\"donate-pay-method\").value);\n    const balance = document.getElementById(\"tokens-balance-choice-dnt-container\");\n\n    if (choice == 2) {\n        balance.style.marginTop = \"1em\";\n        balance.style.opacity = 1;\n        document.getElementById(\"donate-coins-payment\").innerHTML = \"\";\n\n        checked_coupon = \"\";\n        failed_coupon = \"\";\n    } else {\n        balance.style.marginTop = \"-1.8em\";\n        balance.style.opacity = 0;\n    }\n    return choice;\n}\n\nconst displayTokens = (v2=true) => {\n    const balance = glob_auth_player_data[\"BALANCE\"];\n\n    if (!tokens_system_enabled) {\n        return;\n    }\n    document.querySelector(\".zalupa-card-container\").style.display = \"\";\n\n    if (Number.isInteger(balance)) {\n        if (!v2) {\n            const base_selector = document.querySelector(\".balance-container\");\n            const balance_value = document.querySelector(\".balance-value\");\n\n            base_selector.style.display = \"\";\n            balance_value.innerText = balance;\n        } else {\n            const container_number = document.getElementById(\"numberZalupaCard\");\n\n            if (!document.querySelector(\".ZalupaCardInput\")) {\n                container_number.innerHTML = container_number.innerHTML + `\n                    <input class=\"ZalupaCardInput\" style=\"display:none\" value=\"${glob_auth_player_data[\"UUID\"]}\">\n                `;\n            }\n\n            const balance_number = document.querySelector(\".number-card-zalupa\");\n            const card_holder = document.querySelector(\".card-holder-zalupa\");\n            const balance_value_card = document.querySelector(\".balance-value-card\");\n            const balance_choice = document.getElementById(\"tokens-balance-choice-dnt\");\n            const cardSelector = \"input.ZalupaCardInput\";\n\n            const template_tokens = `<span class=\"text-primary\">${balance}</span> ${\n                getNoun(balance, \"токен\", \"токена\", \"токенов\")}`;\n\n            balance_choice.innerHTML = `У тебя ${template_tokens}`;\n\n            balance_number.setAttribute(\n                \"onclick\",\n                `clipboardFunc(\n                    \"${cardSelector}\", \n                    \"Номер твоей <span class=\\\\\"text-primary\\\\\" style=\\\\\"font-weight:800\\\\\">ZalupaCard</span> скопирован в буфер обмена.\"\n                )`\n            );\n\n            document.querySelector(cardSelector).value = glob_auth_player_data[\"UUID\"];\n            balance_number.innerText = glob_auth_player_data[\"UUID\"];\n            card_holder.innerText = glob_auth_player_data[\"NICKNAME\"];\n            balance_value_card.innerHTML = template_tokens;\n\n            document.getElementById(\"card-zalupa\").style.backgroundImage =\n                `url(\"${select_card_skin(balance)}\")`;\n        }\n    }\n}\nconst select_card_skin = (balance) => {\n    const skins = {\n        0: \"clay\",\n        50: \"red_mashroom\",\n        100: \"tube_coral\",\n        150: \"gray_glazed_terracotta\",\n        200: \"bee_nest\",\n        350: \"bamboo\",\n        500: \"gilded_blackstone\",\n        750: \"raw_gold\",\n        1000: \"nether_wart\",\n        1500: \"sculk_crystal\",\n        2000: \"rainforced_deepslate\",\n        3000: \"tinted_glass\",\n        4000: \"chiseled_quartz\",\n        5000: \"tnt\",\n        6500: \"warped_stem\",\n        8000: \"respawn_anchor\",\n        10000: \"dark_prismarine\",\n        12000: \"nether\",\n        15000: \"netherite\"\n    };\n    let keys = Object.keys(skins);\n    keys = keys.reverse();\n    const path = \"./assets/images/card_skins\";\n    for (let i = 0; i < keys.length; i++) {\n        const selector = skins[keys[i]];\n        if (balance >= parseInt(keys[i])) {\n            if (selector_card_skin_displayed !== selector) {\n                console.debug(selector);\n                selector_card_skin_displayed = selector;\n            }\n            return prepare_img_link(`${path}/${selector}.png`);\n        }\n    }\n    return prepare_img_link(`${path}/clay.png`);\n}\nconst sendTokensModalOpen = () => {\n    notify(\"Э брат, не завезли пока. Кнопочку не трож\");\n}\nconst comment_show_action = (id, close = false) => {\n    const comment_text = document.getElementById(`comment_text_${id}`);\n    const comment_show = document.getElementById(`comment_show_${id}`);\n    swiper_comments.on(\"slideChange\", () => {\n        comment_show_action(id, true);\n    });\n    if (close || comment_text.getAttribute(\"fullShowComment\") === \"1\") {\n        comment_text.style.height = \"100px\";\n        comment_text.setAttribute(\"fullShowComment\", \"0\");\n        comment_show.innerText = \"Раскрыть\";\n    } else {\n        comment_text.style.height = \"100%\";\n        comment_text.setAttribute(\"fullShowComment\", \"1\");\n        comment_show.innerText = \"Скрыть\";\n    }\n}\nconst checkPrivateServerBuy = () => {\n    const checkFunction = () => {\n        const stop_key = \"Проходка\";\n\n        for (let item of donate_services_array) {\n            // console.debug(`checkPrivateServerBuy : item = ${item.name} / id = ${item.id}`);\n            if (item.name === stop_key && glob_auth_player_data.PRIVATE_SERVER) {\n                const selector_button = document.querySelector(\n                    `#donate_item_${item.id}>div>div.card-body>button`);\n\n                selector_button.innerText = \"Куплено\";\n                selector_button.setAttribute(\"disabled\", \"\");\n                selector_button.removeAttribute(\"onclick\");\n                // открывать чек об оплате (если есть)\n            }\n        }\n    }\n\n    checkFunction();\n    setInterval(checkFunction, 600);\n}\nconst initComments = () => {\n    const array_ = document.getElementById(\"comment_swipe_array\");\n    const createSwiper = () => {\n        swiper_comments = new Swiper(\"#comment_swipe_container\", {\n            spaceBetween: 12,\n            loop: true,\n            observer: true,\n            observeParents: true,\n            preventClicks: false,\n            preventClicksPropagation: false,\n            autoplay: {\n                delay: 3000,\n            },\n            pagination: {\n                el: \".swiper-pagination\",\n                clickable: true,\n            },\n            navigation: {\n                prevEl: \"#prev_comment\",\n                nextEl: \"#next_comment\",\n            },\n        });\n    };\n    const playersGet = (callback) => {\n        requestCall((r) => {\n            callback(r);\n        }, \"assets/data/players.json\", \"GET\", true);\n    };\n    const searchPlayer = (players, name) => {\n        for (let i = 0; i < players.length; i++) {\n            if (players[i].name === name) {\n                return players[i];\n            }\n        }\n    };\n    requestCall((r) => {\n            const comment = r;\n            shuffle(comment);\n            playersGet((players) => {\n                for (let i = 0; i < comment.length; i++) {\n                    const player = searchPlayer(players, comment[i].name);\n                    array_.innerHTML = array_.innerHTML + `\n                        <div class=\"swiper-slide h-auto px-2\">\n                            <figure class=\"card h-100 position-relative border-0 shadow-sm py-3 p-0 p-xxl-4 my-0\">\n                                <span class=\"btn btn-primary btn-lg shadow-primary pe-none position-absolute top-0 start-0 translate-middle-y ms-4 ms-xxl-5 zlp-comment-icon\">\n                                  <i class=\"bx bxs-quote-left\"></i>\n                                  Залупный комментарий\n                                </span>\n                                <blockquote id=\"comment_block_${i}\" class=\"card-body mt-2 mb-2\" \n                                            style=\"transition: .8s height\">\n                                    <p id=\"comment_text_${i}\" class=\"fs-md mb-0\">\n                                            «${comment[i].text}»</p>\n                                    <span id=\"comment_show_${i}\" onclick=\"comment_show_action(${i})\" \n                                          class=\"pt-1 comment-show-button\">\n                                            Раскрыть</span>\n                                </blockquote>\n                                <figcaption class=\"card-footer d-flex align-items-center border-0 pt-0 mt-n2 mt-lg-0\">\n                                    <div>\n                                        <b class=\"fw-semibold lh-base mb-0\">${comment[i].name}</b>\n                                    </div>\n                                </figcaption>\n                            </figure>\n                        </div>\n                    `;\n\n                    const\n                        comment_text =\n                            document\n                                .getElementById(\n                                    `comment_text_${i}`\n                                );\n                    const\n                        comment_show =\n                            document\n                                .getElementById(\n                                    `comment_show_${i}`\n                                );\n\n                    comment_show\n                        .style\n                        .fontWeight =\n                        \"400\";\n                    comment_text\n                        .style\n                        .transition =\n                        \"height .8s cubic-bezier(1, -.3, 0, 1.21) 0s\";\n                    comment_text\n                        .setAttribute(\n                            \"fullShowComment\",\n                            \"0\"\n                        );\n                    const\n                        correction_height =\n                            12;\n\n                    if (comment_text\n                            .clientHeight >\n                        100 +\n                        correction_height\n                    ) {\n                        comment_text\n                            .style\n                            .height =\n                            \"100px\";\n                        comment_text\n                            .style\n                            .overflow =\n                            \"hidden\";\n                    } else {\n                        comment_show\n                            .style\n                            .display =\n                            \"none\";\n                    }\n                }\n            });\n\n            createSwiper();\n        },\n        \"assets/data/comments.json\",\n        \"GET\", true);\n}\n\nconst buildPlayersSwiper = () => {\n    const array_ = document\n        .getElementById(\n            \"players-swiper-array\");\n\n    const createSwiper = () => {\n        try {\n            document.getElementById(\"players_block_load\").remove();\n        } catch (_) {\n        }\n        new Swiper(\n            \"#players_swipe_container\", {\n                slidesPerView: 1,\n                spaceBetween: 24,\n                autoplay: {\n                    delay: 2000,\n                },\n                loop: true,\n                observer: true,\n                observeParents: true,\n                preventClicks: false,\n                pagination: {\n                    el: \".swiper-pagination\",\n                    clickable: true,\n                },\n                breakpoints: {\n                    600: {\n                        slidesPerView: 2,\n                    },\n                    920: {\n                        slidesPerView: 3,\n                    },\n                    1200: {\n                        slidesPerView: 4,\n                    },\n                    1600: {\n                        slidesPerView: 5,\n                    },\n                    2000: {\n                        slidesPerView: 6,\n                    }\n                },\n            });\n    };\n\n    const badges_get = (\n        callback) => {\n        requestCall((r) => {\n                callback(r);\n            },\n            \"assets/data/badges.json\",\n            \"GET\", true);\n    };\n\n    // try {\n    //     // preload\n    //     loadPlayerAvatar(generateRandomHex(32), \"\", true);\n    // } catch {}\n\n    badges_get((badges_paste) => {\n        requestCall((r) => {\n                const player = r;\n                shuffle(player);\n\n                let players_array = [];\n                for (let player_in of player) {\n                    players_array.push(player_in.name);\n                }\n\n                const selectSkin = (player, skins) => {\n                    if (skins.length < players_array.length) {\n                        for (let i = 0; i < (players_array.length - skins.length); i++) {\n                            skins.push({Nick: \"\", Value: \"\"});\n                        }\n                    }\n                    for (let i = 0; i < skins.length; i++) {\n                        if (player.toLowerCase() === skins[i].Nick.toLowerCase()) {\n                            return skins[i].Value;\n                        }\n                    }\n                    return \"11228873ae0acb8c1abb9f2ed92b7ef29b7e03a534e4d67ad7435ee759e4cf54\";\n                }\n\n                getPlayersSkins(function (skins) {\n                    // console.log(skins);\n                    for (let i = 0; i < player.length; i++) {\n                        const\n                            getBadges = () => {\n                                    let result = \"\";\n                                    player[i].badges.sort();\n                                    for (let s = 0; s < player[i].badges.length; s++) {\n                                        const badge_local = player[i].badges[s];\n                                        if (\n                                            badge_local && badge_local.length &&\n                                            badge_local !== \"verified\" &&\n                                            !badge_local.includes(\"clan-\"))\n                                        {\n                                            result = result + `\n                                        <div class=\"player_badge\" \n                                            style=\"background-image: url(./assets/images/emoji/${badges_paste[badge_local].item}.png)\"\n                                            data-bs-toggle=\"tooltip\" data-bs-placement=\"bottom\" \n                                            title=\"${badges_paste[badge_local].title}\">\n                                        </div>\n                                    `;\n                                        }\n                                    }\n                                    return result;\n                                }\n\n                        const getClan = () => {\n                            for (let s = 0; s < player[i].badges.length; s++) {\n                                if (player[i].badges[s].includes(\"clan-\")) {\n                                    return player[i].badges[s].replace(\"clan-\", \"\");\n                                }\n                            }\n                        }\n\n                        glob_players.push(player[i].name);\n\n                        // const player_badges_ = getBadges();\n                        // const player_clan = getClan();\n                        const player_badges_ = \"\";\n                        const player_clan = \"\";\n\n                        player[i].head = prepare_img_link(player[i].head);\n                        //loadPlayerAvatar(selectSkin(player[i].name, skins), \"\", true)\n\n                        array_.innerHTML = array_.innerHTML + `\n                        <div class=\"swiper-slide text-center\">\n                            <span class=\"d-block py-5\">\n                                <div class=\"player_head_container\">\n                                    <div \n                                        class=\"player-head d-block mx-auto\" \n                                        style=\"background-image: url(${player[i].head});border-radius:.75em\"\n                                    ></div>\n                                </div>\n                                <div class=\"card-body p-3\">\n                                    <h3 class=\"fs-lg fw-semibold pt-1 mb-2\">\n                                        ${player[i].name}\n                                    </h3>\n                                    <p class=\"fs-sm mb-0\" style=\"text-align:center\">${player[i].desc}</p>\n                                </div>\n                            </span>\n                        </div>\n                    `;\n                    // ${player_clan ? `<div\n                    //                     class=\"player_clan_badge\"\n                    //                     data-bs-toggle=\"tooltip\" data-bs-placement=\"top\"\n                    //                     title=\"${player_clan}\"\n                    // ></div>` : \"\"}\n\n                    // ${player[i].badges.includes(\"verified\") ? `\n                    //     <i class=\"verified-icon\"\n                    //     data-bs-toggle=\"tooltip\" data-bs-placement=\"top\"\n                    //     title=\"Подтвержденный\"> ✔</i>\n                    // ` : \"\"}\n                    }\n\n                    createSwiper();\n                }, players_array, false);\n            },\n            \"assets/data/players.json\",\n            \"GET\", true);\n    });\n}\n\nconst buildDonateHistorySwiper = () => {\n    const array_ = document\n        .getElementById(\n            \"payments-history-swiper-array\");\n\n    const createSwiper = () => {\n        new Swiper(\n            \"#payments_history_container\", {\n                slidesPerView: 1,\n                spaceBetween: 24,\n                autoplay: {\n                    delay: 1500,\n                },\n                loop: true,\n                observer: true,\n                observeParents: true,\n                preventClicks: false,\n                pagination: {\n                    el: \".payments-history-pagination\",\n                    clickable: true,\n                },\n                breakpoints: {\n                    320: {\n                        slidesPerView: 2,\n                    },\n                    600: {\n                        slidesPerView: 3,\n                    },\n                    920: {\n                        slidesPerView: 4,\n                    },\n                    1200: {\n                        slidesPerView: 5,\n                    },\n                    1600: {\n                        slidesPerView: 6,\n                    },\n                    1900: {\n                        slidesPerView: 7,\n                    },\n                    2100: {\n                        slidesPerView: 8,\n                    },\n                    2500: {\n                        slidesPerView: 9,\n                    },\n                },\n            });\n    };\n\n    const updateDonateTime = () => {\n        const selectors = document.querySelectorAll(\"#item-donate-history-desc>time\");\n        for (let i = 0; i < selectors.length; i++) {\n            const select = selectors[i];\n            const time_ = select.getAttribute(\"datetime\");\n\n            select.innerHTML = formatDate(new Date(time_), time_in_moscow_get());\n        }\n    }\n\n    getPaymentHistory(function (data) {\n        if (!data || !data.length) {\n            return;\n        }\n        for (let i = 0; i < data.length; i++) {\n            const date = new Date(data[i].updated_at);\n            data[i].product.image = prepare_img_link(data[i].product.image);\n            array_\n                .innerHTML =\n                array_\n                    .innerHTML + `\n                    <div class=\"swiper-slide text-center\">\n                        <span class=\"d-block py-3\">\n                            <div class=\"player_head_container\">\n                                <div \n                                    class=\"player-head d-block mx-auto\" \n                                    style=\"background-image: url(${data[i].product.image});height:65px!important\"\n                                ></div>\n                            </div>\n                            <div class=\"card-body p-3\">\n                                <h5 class=\"h5 fs-6 fw-semibold pt-1 mb-2\">\n                                    ${data[i].product.name}\n                                </h5>\n                                <p class=\"fs-sm mb-0\" id=\"item-donate-history-desc\">\n                                    <span class=\"text-gradient-primary fw-bold\">${data[i].customer}</span>\n                                    <br/>\n                                    <time datetime=\"${\n                    date.toString()\n                }\"></time>\n                                </p>\n                            </div>\n                        </span>\n                    </div>\n                `;\n        }\n        document.getElementById(\"last_donate_block_load\").remove();\n        createSwiper();\n        setInterval(updateDonateTime, 1000);\n    });\n}\n\nconst donate_bg_preload = () => {\n    const bg_ls = [\"emoji-background-donate-light\", \"emoji-background-donate\"];\n    for (let i = 0; i <= bg_ls; i++) {\n        getImageLightness(`assets/images/${i}.png`, undefined, false);\n    }\n}\n\nconst setSticker = (stickers_count = 0, id = 0, custom_path = null) => {\n    let path = `assets/images/stickers/sticker${randDiaps(stickers_count)}.webp`;\n    if (custom_path) {\n        path = custom_path;\n    } else if (lock_sticker_switch) {\n        return;\n    }\n    const link = prepare_img_link(path);\n    document.getElementById(`super-klassniy-sticker-${id}`).style.backgroundImage = `url(${link})`;\n}\nconst setRandomStickerLand = () => {\n    const stickers_count = 32;\n    const selector = document.getElementById(\"super-klassniy-sticker-0\");\n\n    for (let i = 0; i <= stickers_count; i++) {\n        getImageLightness(`assets/images/stickers/sticker${i}.webp`, undefined, false);\n    }\n\n    setInterval(function () {\n        if (window.pageYOffset > 1600 || donate_displayed) {\n            selector.style.opacity = 0;\n        } else if (!donate_displayed && window.pageYOffset <= 1600) {\n            setTimeout(function () {\n                selector.style.opacity = .4;\n            }, 800);\n        } else {\n            selector.style.opacity = .4;\n        }\n    }, 30);\n\n    const updateStickerPosition = () => {\n        if (window.innerWidth >= 992) {\n            selector.style.top = `${randDiaps(85)}%`;\n            selector.style.left = `${randDiaps(85)}%`;\n        } else {\n            selector.style.top = `${randDiaps(100)}%`;\n            selector.style.left = `${randDiaps(75)}%`;\n        }\n    }\n\n    setSticker(stickers_count);\n    setInterval(setSticker, 6000, stickers_count);\n\n    updateStickerPosition();\n    setInterval(updateStickerPosition, 3000);\n}\nconst donate_element_click = (\n    product_data) => {\n    switch_modal_containers(\n        \"service\");\n    const exclude_types = [\"group\"];\n    const desc = document\n        .getElementById(\n            \"donate_item_select_text\"\n        );\n    const text_template = `Товар <span class=\"text-primary fw-semibold\">${product_data.name}</span>,\n            цена ${product_data.count} ${getNoun(product_data.count, \"единицы\", \"единиц\", \"единиц\")}\n        <span class=\"text-primary fw-semibold\">\n            ${product_data.price}\n            ${getNoun(product_data.price, \"рубль\", \"рубля\", \"рублей\")}\n        </span>.\n    `;\n    const items_count_donate =\n        document\n            .getElementById(\n                \"items_count_donate\");\n    const count_hint = document\n        .getElementById(\n            \"donate_count_text_hint\"\n        );\n    const add_to_cart = document\n        .getElementById(\n            \"donate_button_add_to_cart\"\n        );\n    const cookie_cart =\n        get_cookie_cart();\n    let switch_ = false;\n\n    const _update_count = () => {\n        add_to_cart\n            .setAttribute(\n                \"onClick\",\n                `donate_cart(${product_data.service_id}, ${items_count_donate.value})`\n            );\n    };\n\n    items_count_donate.value = 1;\n\n    _update_count();\n\n    const product_in_cart =\n        cookie_cart\n            .hasOwnProperty(product_data\n                .service_id\n                .toString());\n\n    if ((exclude_types.includes(\n                product_data.type\n            ) ||\n            product_data.type ===\n            \"group\") &&\n        groupAlreadyInCart(\n            cookie_cart)\n    ) {\n        switch_modal_containers(\n            \"info\");\n        switch_ = true;\n        let group_error = \"\";\n\n        if (product_data.type ===\n            \"group\") {\n            group_error =\n                \"Вы уже выбрали привилегию. Удалите её из корзины, если хотите выбрать другую.\";\n        } else if (\n            product_in_cart) {\n            group_error = `Ошибка, вы можете добавить товар \n                <span class=\"text-primary fw-semibold\">${product_data.name}</span> \n                только один раз.`;\n        } else {\n            group_error =\n                \"Мы не знаем почему, но эта ошибка вызвана по неизвестным причинам.\";\n        }\n\n        document.getElementById(\n            \"donate_info_block_text\"\n        )\n            .innerHTML =\n            group_error;\n    }\n\n    let count_state = \"block\";\n\n    if (exclude_types.includes(\n        product_data.type)) {\n        count_state = \"none\";\n    }\n\n    items_count_donate.style\n        .display =\n        count_state;\n    count_hint.style.display =\n        count_state;\n\n    const only_dig = () => {\n        const value =\n            items_count_donate\n                .value;\n        items_count_donate\n            .value =\n            value.replace(\n                /\\D+/g,\n                \"\");\n    };\n\n    const _calculate_price =\n        () => {\n            only_dig();\n\n            if (!exclude_types\n                .includes(\n                    product_data\n                        .type\n                )) {\n                let _price =\n                    parseInt(\n                        items_count_donate\n                            .value) *\n                    product_data\n                        .price;\n\n                const\n                    currenct_in_cart =\n                        cookie_cart[\n                            product_data\n                                .service_id\n                            ];\n                let template_counter_i =\n                    \"\";\n\n                if (isNaN(_price) ||\n                    1 >\n                    Math.sign(\n                        _price)) {\n                    _price = 0;\n                }\n\n                if (\n                    currenct_in_cart) {\n                    template_counter_i\n                        = `\n                    Уже в корзине - \n                        <span class=\"text-primary fw-semibold\">\n                            ${currenct_in_cart}\n                        </span>\n                `;\n                }\n\n                desc.innerHTML = `${text_template}\n                    <br/>\n                    Стоимость - \n                        <span class=\"text-primary fw-semibold\">\n                            ${_price} \n                            ${getNoun(_price, \"рубль\", \"рубля\", \"рублей\")}\n                        </span>\n                    <br/>\n                    ${template_counter_i}\n                `;\n\n                _update_count();\n            }\n        };\n\n    desc.innerHTML = text_template;\n\n    _calculate_price();\n\n    items_count_donate\n        .addEventListener(\n            \"input\",\n            (_) => {\n                _calculate_price();\n            });\n    modal_open_();\n}\n\nconst donate_get_service_by_id = (\n    id) => {\n    for (let i = 0; i <\n    donate_services_array\n        .length; i++) {\n        if (donate_services_array[i]\n            .id === parseInt(id)) {\n            return donate_services_array[\n                i];\n        }\n    }\n\n    return null;\n}\n\nconst donateResetPaymentState = (type =\n                                     1, repeat = false,\n                                 coupon_reset =\n                                     false) => {\n    const coupon_sl = document\n        .getElementById(\n            \"donate-coins-payment\");\n    const inputs = [\n        \"donate_sum\",\n        \"donate_customer_c\",\n        \"donate_email_c\",\n        \"coupon-input-c\",\n        \"donate-pay-method\"\n    ]\n    let sl = \"_c\";\n    let vl = document\n        .getElementById(\n            \"donate_sum\")\n        .value.trim();\n    if (!coins_sell_mode) {\n        sl = \"\";\n        vl = 0;\n    }\n    const button = document\n        .getElementById(\n            \"payment-button-donate\" +\n            sl\n        );\n    const update_inputs = () => {\n        for (let i = 0; i < inputs.length; i++) {\n            const sl = document.getElementById(inputs[i]);\n            if (inputs[i].includes(\"coupon\") && !coupon_reset) {\n                // pass\n            } else if (inputs[i].includes(\"method\")) {\n                sl.value = 1;\n            } else {\n                sl.value = \"\";\n            }\n        }\n    }\n    if (coupon_reset) {\n        coupon_sl.innerHTML = \"\";\n        update_inputs();\n        checked_coupon = \"\";\n        failed_coupon = \"\";\n    }\n    button.setAttribute(\"onClick\",\n        `generatePaymentLink(${type}, ${(type === 2) ? 1 : vl})`\n    );\n    button.removeAttribute(\n        \"disabled\");\n    button.innerText = repeat ?\n        \"Повторить\" : \"Дальше\";\n}\n\nconst donate_cart = (product, count,\n                     remove = false) => {\n    const cart = Cookies.get(\n        cart_cookie);\n    const cart_parsed =\n        get_cookie_cart();\n    let product_count_in_cart = 0;\n    const max_item_count = 30000;\n    const local_prm =\n        '<span style=\"color: #a4a6ff\">';\n\n    try {\n        const p = cart_parsed[\n            product];\n\n        if (Number.isInteger(p)) {\n            product_count_in_cart\n                = +p;\n        }\n    } catch (_) {\n    }\n\n    if (!Number.isInteger(\n        product) || !\n        Number.isInteger(count)) {\n        return;\n    } else if (1 > Math.sign(\n        count)) {\n        notify(\n            \"Количество не может быть равно нулю или меньше\"\n        );\n        return;\n    } else if (\n        product_count_in_cart +\n        count > max_item_count) {\n        notify(\n            `Максимальное количество - ${local_prm}${max_item_count}</span>`\n        );\n        return;\n    }\n\n    if (!cart) {\n        Cookies.set(cart_cookie,\n            JSON\n                .stringify({}));\n    }\n\n    const els_ = JSON.parse(Cookies\n        .get(\n            cart_cookie));\n    const product_data =\n        donate_get_service_by_id(\n            product);\n\n    if (remove) {\n        delete els_[product];\n        notify(\n            `Товар ${local_prm} ${product_data.name}</span> убран из корзины`\n        );\n    } else {\n        if (els_[product]) {\n            els_[product] = els_[\n                product] + count;\n            notify(`В корзину добавлено ${local_prm} ${count} \n                    </span>\n                    ${getNoun(count, \"единица\", \"единицы\", \"единиц\")} \n                    товара ${local_prm} ${product_data.name} \n                    </span>`);\n        } else {\n            els_[product] = count;\n            notify(\n                `Товар ${local_prm} ${product_data.name}</span> добавлен в корзину`\n            );\n        }\n    }\n\n    Cookies.set(cart_cookie, JSON\n        .stringify(els_));\n    modal_close_();\n    initDonate();\n    updateCartCount();\n    donateResetPaymentState();\n}\n\nconst donate_cart_button = (\n    els = {}) => {\n    const selector_ = document\n        .querySelectorAll(\n            \".donate-cart-button-cn\"\n        );\n\n    if (coins_sell_mode) {\n        return;\n    }\n\n    for (let i = 0; i < selector_.length; i++) {\n        const sl = selector_[i].style;\n\n        if (countProperties(els)) {\n            sl.display = \"flex\";\n            setTimeout(() => {\n                sl.opacity = 1;\n                sl.marginTop = \"15px\";\n                selector_[i].removeAttribute(\"disabled\");\n            }, 50);\n        } else {\n            selector_[i].setAttribute(\"disabled\", \"\");\n            sl.opacity = 0;\n            sl.marginTop = \"-50px\";\n            setTimeout(() => {\n                sl.display = \"none\";\n            }, 350);\n        }\n    }\n}\n\nconst donateFlushCart = () => {\n    Cookies.remove(cart_cookie);\n    donate_cart_button({});\n    notify(\"Корзина очищена\");\n}\n\nconst setAvatar = (user) => {\n    const photoTG = false;\n    const selector = document.getElementById(\n        \"telegram-auth-avatar\").style;\n    if (user.photo_url && photoTG) {\n        selector.backgroundImage = `url(${user.photo_url})`;\n    } else {\n        selector.background =\n            `linear-gradient(343deg, var(--telegram-bgcolor${\n                getAvatarColorIDforTG(user.id)\n            }-top) 0%, var(--telegram-bgcolor${\n                getAvatarColorIDforTG(user.id)\n            }-bottom) 100%)`;\n        const avatarSelector = document.getElementById(\"tg-user-avatar-text\");\n        try {\n            avatarSelector.innerText =\n                `${user.first_name.slice(0, 1)}${user.last_name ? user.last_name.slice(0, 1) : \"\"}`\n                    .toUpperCase();\n        } catch (_) {\n            avatarSelector.innerHTML = \"N/A\";\n        }\n    }\n}\n\nconst checkAuthAndDisplayDonate = () => {\n    checkTelegramAuthData(function (response) {\n        if (response.player_data.NICKNAME) {\n            donateSwitchContainer();\n        }\n    }, false, true);\n}\n\nconst onTelegramAuth = (user) => {\n    Cookies.set(\n        telegram_cookie_token,\n        utf8_to_b64(JSON\n            .stringify(\n                user)));\n    modal_close_();\n    notify(\n        `Вы успешно авторизовались как <span class=\"text-gradient-primary\">${\n            user.first_name} ${user.last_name ? user.last_name : \"\"}</span>`\n    );\n\n    autoAuthTelegramObserver();\n    // checkAuthAndDisplayDonate();\n}\n\nconst debugWriteTelegramAuth = (data) => {\n    Cookies.set(telegram_cookie_token, data);\n}\n\nconst getTelegramAuth = (raw =\n                             false) => {\n    const cookie_field = Cookies\n        .get(\n            telegram_cookie_token);\n    if (cookie_field) {\n        if (raw) {\n            return cookie_field;\n        } else if (cookie_field) {\n            return JSON.parse(\n                b64_to_utf8(\n                    cookie_field\n                ));\n        }\n    }\n}\n\nconst couponCheck = (coins = false) => {\n    let selector_c = \"\";\n    if (coins_sell_mode) {\n        selector_c = \"-c\";\n    }\n\n    const input = document\n        .getElementById(\n            \"coupon-input\" +\n            selector_c);\n    const button = document\n        .getElementById(\n            \"coupon-button\" +\n            selector_c\n        );\n    let code = \"\";\n\n    try {\n        code = input.value.trim()\n            .toUpperCase();\n    } catch (_) {\n    }\n\n    const coupon_notfd = () => {\n        notify(\n            `Купон <span class=\"text-primary fw-semibold\">${failed_coupon}</span> не найден`\n        );\n    };\n\n    const check_coupon_valid =\n        (products, product) => {\n            if (products) {\n                for (let i = 0; i <\n                products\n                    .length; i++\n                ) {\n                    if (products[i]\n                            .id ===\n                        current_c_item\n                    ) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n\n    if (!code.length) {\n        notify(\n            \"Вы не указали купон\");\n        return;\n    } else if (code.length > 20) {\n        notify(\n            \"Купон слишком длинный\");\n        return;\n    } else if (!/^[A-z\\d_]+$/.test(\n        code)) {\n        notify(\n            \"Купон указан неверно\");\n        return;\n    } else if (checked_coupon ===\n        code) {\n        notify(\n            \"Этот купон уже используется\"\n        );\n        return;\n    } else if (failed_coupon ===\n        code) {\n        coupon_notfd();\n        return;\n    }\n\n    const input_lock = (lock =\n                            false) => {\n        if (lock) {\n            input.setAttribute(\n                \"disabled\",\n                \"\");\n            button.setAttribute(\n                \"disabled\",\n                \"\");\n            button.innerText =\n                \"Проверяем\";\n        } else {\n            input\n                .removeAttribute(\n                    \"disabled\");\n            button\n                .removeAttribute(\n                    \"disabled\");\n            button.innerText =\n                \"Проверить\";\n        }\n    };\n\n    input_lock(true);\n    if (donatePayMethodSelector() !== 2) {\n        check_coupon((r) => {\n            // console.log(`check_coupon = ${typeof r}`);\n            if (r) {\n                const call =\n                    () => {\n                        checked_coupon\n                            =\n                            code;\n                        notify(\n                            `Купон <span class=\"text-primary fw-semibold\">${code}</span> действительный`\n                        );\n                    };\n                if (!coins_sell_mode) {\n                    call();\n                    donateCartCall\n                    (\n                        code,\n                        false\n                    );\n                } else if (\n                    check_coupon_valid(\n                        r\n                            .products,\n                        current_c_item\n                    )) {\n                    call();\n                    const sl =\n                        document\n                            .getElementById(\n                                \"donate-coins-payment\"\n                            );\n                    sl.innerHTML = `<li class=\"list-group-item d-flex justify-content-between bg-light\">\n                        <div class=\"text-primary\">\n                            <h6 class=\"my-0 text-start\">Купон</h6>\n                            <small class=\"text-start\" style=\"float: left\">${code}</small>\n                        </div>\n                        <span class=\"text-muted text-end\" style=\"width: 30%\">\n                            ${r.discount}%</span>\n                    </li>`;\n                } else {\n                    notify(\n                        \"Этот купон недействительный\"\n                    );\n                }\n            } else {\n                failed_coupon =\n                    code;\n                coupon_notfd();\n            }\n\n            input_lock();\n        }, code);\n    } else {\n        notify(\"Купон недоступен для Zalupa Pay\");\n        input_lock();\n    }\n}\n\nconst donate_enable_coupon = (enabled =\n                                  true) => {\n    const input = document\n        .getElementById(\n            \"coupon-input\");\n    const button = document\n        .getElementById(\n            \"coupon-button\");\n\n    if (enabled) {\n        input.setAttribute(\n            \"placeholder\",\n            \"BRFF\");\n        button.setAttribute(\n            \"onClick\",\n            \"couponCheck()\");\n        input.removeAttribute(\n            \"disabled\");\n        button.removeAttribute(\n            \"disabled\");\n    } else {\n        input.setAttribute(\n            \"disabled\",\n            \"\");\n        input.setAttribute(\n            \"placeholder\",\n            \"Сейчас недоступно\");\n        button.setAttribute(\n            \"disabled\",\n            \"\");\n    }\n}\n\nconst get_data_service = (\n    service_id) => {\n    for (let i = 0; i <\n    products_by_serverid\n        .length; i++) {\n        if (parseInt(\n                products_by_serverid[\n                    i].id\n            ) ===\n            parseInt(\n                service_id)\n        ) {\n            return products_by_serverid[\n                i];\n        }\n    }\n}\n\nconst generatePaymentLink = (type = 1,\n                             sum = 0) => {\n    let selector_c = \"\";\n    if (coins_sell_mode) {\n        selector_c = \"_c\";\n    }\n    const button = document\n        .getElementById(\n            \"payment-button-donate\" +\n            selector_c);\n    let customer = document\n        .getElementById(\n            \"donate_customer\" +\n            selector_c)\n        .value.trim();\n    let email = document\n        .getElementById(\n            \"donate_email\" +\n            selector_c)\n        .value.trim();\n    let coupon = \"\";\n    customer = glob_auth_player_data.NICKNAME;\n    const max_sum = 30000;\n    const local_prm =\n        '<span style=\"color: #a4a6ff\">';\n\n    try {\n        coupon = checked_coupon\n            .trim();\n    } catch (_) {\n    }\n\n    if (type === 1) {\n        if (!Number.isInteger(\n            sum) || !\n            Number.isInteger(sum)) {\n            notify(\n                \"Ошибка проверки суммы\"\n            );\n            return;\n        } else if (1 > Math.sign(\n            sum)) {\n            notify(\n                \"Сумма не может равняться нулю или меньше\"\n            );\n            return;\n        } else if (sum > max_sum) {\n            notify(\n                `Максимальная сумма - ${local_prm}${max_sum}</span>`\n            );\n            return;\n        }\n    }\n\n    if (!customer.length) {\n        notify(\n            \"Введите пожалуйста ваш никнейм\"\n        );\n        return;\n    } else if (customer.length >\n        40) {\n        notify(\n            \"Ваш никнейм слишком длинный\"\n        );\n        return;\n    } else if (customer.length < 3) {\n        notify(\n            \"Ваш никнейм слишком короткий\"\n        );\n        return;\n    } else if (!/^[A-z\\d_]+$/.test(\n        customer)) {\n        notify(\n            \"Никнейм не соотвествует формату\"\n        );\n        return;\n    }\n\n    if (!email.length) {\n        notify(\n            \"Введите пожалуйста ваш email\"\n        );\n        return;\n    } else if (!validateEmail(\n        email)) {\n        notify(\n            \"Ошибка, адрес почты недействительный\"\n        );\n        return;\n    }\n\n    if (!coupon) {\n        coupon = \"\";\n    }\n    if (coins_sell_mode) {\n        products = JSON.parse(\n            `{\"${current_c_item}\": ${sum}}`\n        );\n    } else {\n        products =\n            get_cookie_cart();\n    }\n\n    button.setAttribute(\"disabled\",\n        \"\");\n    button.innerText =\n        \"Проверяем данные...\";\n\n    const _d_service =\n        get_data_service(\n            current_c_item);\n    create_payment((\n            callback_data) => {\n            if (callback_data) {\n                button.removeAttribute(\"disabled\");\n                button.innerText = \"Оплатить\";\n                if (callback_data.zalupa_pay) {\n                    zalupa_pay_finish_modal();\n                } else {\n                    payment_url_global = callback_data.url;\n                    button.setAttribute(\n                        \"onClick\",\n                        \"payment_action_bt()\"\n                    );\n                }\n            } else {\n                notify(\n                    \"Ошибка, не удалось сформировать чек для оплаты\"\n                );\n                donateResetPaymentState\n                (type,\n                    repeat =\n                        true);\n            }\n        }, customer, products,\n        _d_service.server_id,\n        email,\n        coupon);\n}\n\nconst zalupa_pay_finish_modal = () => {\n    const container = document.getElementById(\"only-ok-payment\");\n\n    container.innerHTML = `\n    <div style=\"\n        background: rgb(28 28 28 / 15%);\n        padding: 1.15em;\n        border-radius: 0.72em;\n        backdrop-filter: blur(1.35em);\n        -webkit-backdrop-filter: blur(1.35em);\n    \">\n            <p style=\"\n                font-weight: 800;\n                margin-bottom: 0;\n            \">Спасибо что воспользовались ZalupaPay!</p>                \n    </div>\n    `;\n\n    enable_modal_result_sc();\n    checkTelegramAuthData(function (_) {}, false, false, true);\n    document.querySelector(\".modal-title\").innerText = \"\";\n    document.querySelector(\".modal-content\").classList.add(\"emoji-pay-back\");\n}\n\nconst enable_modal_result_sc = () => {\n    switch_modal_containers(\"success\");\n    modal_open_();\n    donateResetPaymentState();\n};\n\nconst payment_action_bt = () => {\n    window.open(payment_url_global,\n        \"_blank\");\n\n    const cart_dom = document\n        .getElementById(\n            \"donate-cart-list-success\"\n        );\n    const succ_text = document\n        .getElementById(\n            \"success-pay-text-js\");\n    const cont_ok = document\n        .getElementById(\n            \"only-ok-payment\");\n    const title = document\n        .querySelector(\n            \".modal-title\");\n\n    const build_modal_wind =\n        () => {\n            cart_dom.innerHTML = \"\";\n            title.innerText = \"\";\n            succ_text.innerText =\n                \"Давай, плати. Шеф ждёт...\";\n            cont_ok.style.display =\n                \"\";\n            document\n                .querySelector(\n                    \"img.payment-sucess-vova\"\n                )\n                .setAttribute(\"src\",\n                    \"assets/images/vova-gay.webp\"\n                );\n        };\n\n    const flush_inputs_donate =\n        () => {\n            const inputs = [\n                \"donate_sum\",\n                \"donate_customer_c\",\n                \"donate_email_c\",\n                \"coupon-input-c\",\n            ];\n            for (let i = 0; i <\n            inputs\n                .length; i++) {\n                document\n                    .getElementById(\n                        inputs[i])\n                    .value = \"\";\n            }\n        };\n\n    enable_modal_result_sc();\n    flush_inputs_donate();\n    build_modal_wind();\n}\n\nconst donate_check_services_cart =\n    () => {\n        const services_cookie = Object\n            .keys(\n                get_cookie_cart());\n        const services_origin =\n            donate_services_array;\n        const services = [];\n\n        for (let i = 0; i <\n        services_origin\n            .length; i++) {\n            services.push(\n                services_origin[i]\n                    .id);\n        }\n\n        for (let i = 0; i <\n        services_cookie\n            .length; i++) {\n            if (!services.includes(\n                parseInt(\n                    services_cookie[\n                        i]))) {\n                const cart = JSON.parse(\n                    Cookies.get(\n                        cart_cookie)\n                );\n                delete cart[parseInt(\n                    services_cookie[\n                        i])];\n                Cookies.set(cart_cookie,\n                    JSON.stringify(\n                        cart)\n                );\n                console.log(\n                    `Remove ${services_cookie[i]} from cart`\n                );\n            }\n        }\n    }\n\nconst initDonate = () => {\n    let els = {};\n\n    try {\n        els = JSON.parse(Cookies\n            .get(\n                cart_cookie));\n    } catch (_) {\n    }\n\n    donate_cart_button(els);\n    donate_enable_coupon(true);\n}\n\nconst donateCartCall = (coupon = null,\n                        nickname_update = true) => {\n    const cart = get_cookie_cart();\n    const cart_keys = Object.keys(\n        cart);\n    const cart_dom = document\n        .getElementById(\n            \"donate-cart-list\");\n    const selectors_payment = [\n        document\n            .getElementById(\n                \"donate_customer\"),\n        document.getElementById(\n            \"donate_email\"),\n        document.getElementById(\n            \"coupon-input\"),\n    ];\n    switch_modal_containers(\n        \"donate_finish\");\n    modal_open_();\n    cart_dom.innerHTML = \"\";\n    let sum_price = 0;\n\n    for (let i = 0; i <\n    selectors_payment\n        .length; i++) {\n        selectors_payment[i]\n            .addEventListener(\n                \"input\",\n                (_) => {\n                    donateResetPaymentState\n                    ();\n                });\n    }\n\n    for (let i = 0; i < cart_keys\n        .length; i++) {\n        const item =\n            donate_get_service_by_id(\n                cart_keys[i]);\n        const price = item.price *\n            cart[\n                item.id];\n        sum_price += price;\n        cart_dom.innerHTML =\n            cart_dom\n                .innerHTML + `\n            <li class=\"list-group-item d-flex justify-content-between lh-sm\">\n                <div>\n                    <h6 class=\"my-0 text-start\">\n                        <span class=\"text-primary fw-semibold\">\n                            x${item.number}</span> \n                        ${item.name}\n                    </h6>\n                    <small class=\"text-muted text-start cart-desc-td\">${item.description}</small>\n                </div>\n                <span class=\"text-muted text-end\" style=\"width: 30%\">\n                    ${price} ${getNoun(price, \"рубль\", \"рубля\", \"рублей\")}\n                    <br/>x${cart[item.id]}</span>\n            </li>\n        `;\n    }\n\n    const coupon_container =\n        () => {\n            cart_dom.innerHTML =\n                cart_dom.innerHTML + `<li class=\"list-group-item d-flex justify-content-between bg-light\">\n                <div class=\"text-primary\">\n                    <h6 class=\"my-0 text-start\">Купон</h6>\n                    <small class=\"text-start\" style=\"float: left\">${coupon}</small>\n                </div>\n            </li>`;\n        };\n\n    const sum_container = () => {\n        cart_dom.innerHTML =\n            cart_dom.innerHTML + `<li class=\"list-group-item d-flex justify-content-between\">\n                <span>Сумма</span>\n                <strong>${sum_price} ${getNoun(sum_price, \"рубль\", \"рубля\", \"рублей\")}</strong>\n            </li>`;\n    };\n\n    if (coupon) {\n        coupon_container();\n    }\n\n    sum_container();\n\n    if (nickname_update) {\n        shuffle(glob_players);\n        document\n            .querySelector(\n                \"input#donate_customer\"\n            )\n            .setAttribute(\n                \"placeholder\",\n                glob_players[0]);\n    }\n}\n\nconst donateCoinsPay = (type = 1) => {\n    const button = document\n        .getElementById(\n            \"payment-button-donate_c\"\n        );\n    let sum = document\n        .getElementById(\n            \"donate_sum\");\n\n    if (!sum.value && !/^[\\d]+$/\n        .test(\n            sum.value)) {\n        sum = 0;\n    } else {\n        sum = sum.value;\n    }\n\n    button.setAttribute(\"onClick\",\n        `generatePaymentLink(${type}, ${(type === 2) ? 1 : sum})`\n    );\n}\n\nconst donateModalCall = (type_item,\n                         item_id, nickname_update = true\n) => {\n    current_item_type = type_item;\n\n    const sum = document\n        .getElementById(\n            \"donate_sum\");\n    const customer_field = document\n        .getElementById(\n            \"donate_customer_c\");\n    const sum_container = document\n        .getElementById(\n            \"sum-tokens-container\");\n    const email_container_classL =\n        document.getElementById(\n            \"customer-email-tokens-container\"\n        )\n            .classList;\n    const modal_payment_text =\n        document\n            .getElementById(\n                \"donate-text-span\");\n    const selector_method_pay =\n        document.getElementById(\"donate-pay-method\");\n    let payment_text_form;\n    const selectors_payment = [\n        document\n            .getElementById(\n                \"donate_sum\"),\n        document\n            .getElementById(\n                \"donate_customer_c\"\n            ),\n        document.getElementById(\n            \"donate_email_c\"),\n        document.getElementById(\n            \"coupon-input-c\"),\n    ];\n    const title = document\n        .querySelector(\n            \".modal-title\");\n    let item_name;\n\n    const update_title = (\n        descriptor) => {\n        title.innerText = title\n            .innerText.replace(\n                /\\([\\s\\S]*?\\)/)\n            .trim();\n        title.innerText =\n            `${title.innerText} (${descriptor})`;\n    }\n\n    current_c_item = item_id;\n    current_c_item_name = get_data_service(item_id).name;\n\n    selector_method_pay.value = 1;\n    donatePayMethodSelector();\n\n    if (type_item === 1 || type_item === 3) {\n        selector_method_pay.setAttribute(\"disabled\", \"\");\n        sum_container.style\n            .display =\n            \"\";\n        email_container_classL\n            .remove(\n                \"col-sm-6\");\n        email_container_classL.add(\n            \"col-12\");\n        const donate_sum_title = document.getElementById(\"donate-sum-title\");\n        if (type_item === 1) {\n            payment_text_form = `\n                Воспользовавшись этой формой, вы можете поддержать проект финансово.\n                За поддержку вы получите вознаграждение – за каждый рубль по одному игровому токену.\n            `;\n            item_name = \"Токены\";\n            donate_sum_title.innerText = \"Сумма\";\n            // except\n            sum.addEventListener(\n                \"input\",\n                (_) => {\n                    donateCoinsPay\n                    ();\n                });\n        } else if (type_item === 3) {\n            payment_text_form = `\n                Добавляет +1 слот в клан. Система автоматически определяет ваш клан по никнейму, \n                поэтому будьте внимательны перед оплатой. Проверьте в каком клане вы состоите.\n            `;\n            item_name = \"Слоты\";\n            donate_sum_title.innerText = \"Количество\";\n            customer_field\n                .addEventListener(\n                    \"input\",\n                    (_) => {\n                        donateCoinsPay(\n                            type_item\n                        );\n                    });\n        }\n    } else if (type_item === 2) {\n        selector_method_pay.removeAttribute(\"disabled\");\n        sum_container.style\n            .display =\n            \"none\";\n        email_container_classL\n            .remove(\n                \"col-12\");\n        email_container_classL.add(\n            \"col-sm-6\");\n        desc_get = get_data_service(current_c_item).description;\n        if (!desc_get) {\n            desc_get = \"\"\n        }\n\n        payment_text_form = `\n            Форма оплаты пожертвования для игрового проекта Zalupa.Online\n            <br/>\n            <span class=\"text-primary\">\n                ${desc_get}\n            </span>\n        `;\n        item_name = current_c_item_name;\n        customer_field\n            .addEventListener(\n                \"input\",\n                (_) => {\n                    donateCoinsPay(\n                        type_item\n                    );\n                });\n    }\n    modal_payment_text.innerHTML =\n        payment_text_form\n            .replaceAll(\n                \"\\n\", \"\");\n\n    for (let i = 0; i < selectors_payment.length; i++) {\n        selectors_payment[i]\n            .addEventListener(\n                \"input\",\n                (_) => {\n                    donateResetPaymentState\n                    (type_item);\n                });\n    }\n\n    switch_modal_containers(\n        \"service_coins\");\n    modal_open_();\n\n    if (nickname_update) {\n        const randomNick = false;\n        const fldSelect = document.querySelector(\"input#donate_customer_c\");\n        if (randomNick) {\n            shuffle(glob_players);\n            fldSelect\n                .setAttribute(\n                    \"placeholder\",\n                    glob_players[0]\n                );\n        } else {\n            fldSelect\n                .setAttribute(\n                    \"placeholder\",\n                    glob_auth_player_data.NICKNAME\n                );\n            fldSelect.value = glob_auth_player_data.NICKNAME;\n            fldSelect\n                .setAttribute(\"disabled\", \"\");\n        }\n    }\n\n    donateResetPaymentState(\n        type_item,\n        false, true);\n    update_title(item_name);\n}\n\nconst linksSet = (selector_,\n                  fisrt_el_mrg = false) => {\n    const sl = document\n        .getElementById(\n            selector_);\n    let mrg =\n        \"margin-left: 0 !important\";\n\n    for (let i = 0; i < links_lt\n        .length; i++) {\n        if (!fisrt_el_mrg || i) {\n            mrg = \"\";\n        }\n\n        sl.innerHTML = sl\n            .innerHTML + `<a href=\"${links_lt[i].link}\" \n                target=\"_blank\" style=\"${mrg}\"\n                class=\"btn btn-icon btn-secondary btn-${links_lt[i].name} mx-2\">\n                    <i class=\"bx bxl-${links_lt[i].name}\"></i>\n            </a>`;\n    }\n}\n\nconst initCrypto = () => {\n    if (!freeze_crypto) {\n        freeze_crypto = true;\n        crypto_token = \"\";\n        getCrypto((token_) => {\n            crypto_token =\n                token_;\n            setTimeout(function() {\n                freeze_crypto = false\n            }, 8000);\n        });\n    }\n}\n\nconst initLanding = () => {\n    if (development_hosts.includes(\n            window.location.hostname\n        ) &&\n        lock_of) {\n        document.getElementById(\n            \"landing_description_gb\"\n        )\n            .innerText =\n            \"Этот сайт - preview-версия!\";\n        document.getElementById(\n            \"donate-test-mode-enb\"\n        )\n            .innerText =\n            \"Этот блок работает в демонстративном режиме и не является функциональным.\";\n    }\n\n    linksSet(\"landing-links-tp\",\n        true);\n    linksSet(\n        \"links-block-footer-v\");\n}\n\nconst finishLoad = () => {\n    document.querySelector(\"main\")\n        .setAttribute(\"style\", \"\");\n    document.querySelector(\"footer\")\n        .setAttribute(\"style\", \"\");\n    const heart =\n        `<i class=\"emoji\" style=\"background-image:url(\\'assets/images/emoji/red-heart.png\\');`+\n        `font-size: .7rem;bottom:-1px\"><b>❤️</b></i>`;\n    document.getElementById(\n        \"footer-text-blc\")\n        .innerHTML =\n        `Создал KovalYRS с ${heart}, специально для ZALUPA.ONLINE`;\n    if (grecaptcha) {\n        document.getElementById(\n            \"re-badge-text\")\n            .innerText =\n            \"This site uses Google ReCaptcha technology\";\n    }\n}\n\nconst observerSystemTheme = () => {\n    const mode_list = [\"dark\", \"light\"];\n    const theme_switch = document\n        .querySelector(\n            '[data-bs-toggle=\"mode\"]'\n        )\n        .querySelector(\n            \".form-check-input\");\n\n    const updateTheme = (mode) => {\n        if (mode === \"dark\") {\n            root.classList.add(\"dark-mode\");\n            theme_switch.checked = true;\n        } else {\n            root.classList\n                .remove(\n                    \"dark-mode\"\n                );\n            theme_switch.checked = false;\n        }\n    };\n\n    for (let i = 0; i < mode_list\n        .length; i++) {\n        const observer = window\n            .matchMedia(\n                `(prefers-color-scheme: ${mode_list[i]})`\n            );\n        observer.addEventListener(\n            \"change\", (e) => e\n                    .matches &&\n                updateTheme(\n                    mode_list[i]));\n    }\n}\n\nconst callSucessPayModal = (payment_id = 0) => {\n    let glob_func_payment_data;\n    const item_nm_payment_result = false;\n\n    const cart_dom = document\n        .getElementById(\n            \"donate-cart-list-success\"\n        );\n    const succ_text = document\n        .getElementById(\n            \"success-pay-text-js\");\n    const cont_ok = document\n        .getElementById(\n            \"only-ok-payment\");\n    const title = document\n        .querySelector(\n            \".modal-title\");\n\n    donateSwitchContainer(true);\n\n    const item_type_ = (product_name) => {\n        const t = (product_name).toLowerCase();\n\n        if (t.includes(\"токен\")) {\n            return 1;\n        } else {\n            return 2;\n        }\n    }\n\n    const update_pm_desc = () => {\n        const img_product =\n            glob_func_payment_data\n                .product.image;\n        const name_product =\n            glob_func_payment_data\n                .product.name;\n\n        if (img_product &&\n            img_product.length\n        ) {\n            document.querySelector(\n                    \".payment-sucess-vova\").src = img_product;\n            const\n                name_selector = document.querySelector(\n                            \".item-name-payment-result\");\n            if (item_nm_payment_result) {\n                name_selector.innerText = name_product;\n            } else {\n                name_selector.style.marginBottom = \"4vh\";\n            }\n        }\n    }\n\n    const buildPayment = (\n        payment) => {\n        if (payment.status &&\n            payment_id == parseInt(payment.id)) {\n            glob_func_payment_data = payment;\n            succ_text.innerText =\n                \"Оплата прошла успешно, Шеф доволен, спасибо тебе.\";\n            cont_ok.style.display = \"\";\n\n            const private_gift_button = document.createElement(\"button\");\n            private_gift_button.id = \"private_gift_button_modal\";\n            private_gift_button.setAttribute(\"class\", \"btn btn-primary shadow-primary btn-lg mb-2 btn-shadow-hide\");\n            private_gift_button.innerText = \"button::init\";\n\n            const item_type =\n                item_type_(payment.product.name);\n\n            let system_template = `\n                <li class=\"list-group-item d-flex justify-content-between lh-sm\">\n                    <div>\n                        <h6 class=\"my-0 text-start\">\n                            Система\n                        </h6>\n                    </div>\n                    <span>${payment.payment_system}</span>\n                </li>\n            `;\n\n            let sum_template = `\n                <li class=\"list-group-item d-flex justify-content-between\">\n                    <span>Сумма зачисления</span>\n                    <strong class=\"bottom-line-set bottom-line-set-zlp color-set-zlp\">${payment.enrolled} ${getNoun(payment.enrolled, \"рубль\", \"рубля\", \"рублей\")}</strong>\n                </li>\n            `;\n\n            if (\n                coins_sell_mode) {\n                if (item_type === 1) {\n                    sum_template = `\n                        <li class=\"list-group-item d-flex justify-content-between\">\n                            <span>Сумма</span>\n                            <strong class=\"bottom-line-set bottom-line-set-zlp color-set-zlp\">${payment.enrolled} ${getNoun(payment.enrolled, \"токен\", \"токена\", \"токенов\")}</strong>\n                        </li>\n                    `;\n                } else if (item_type === 2) {\n                    sum_template = `\n                        <li class=\"list-group-item d-flex justify-content-between\">\n                            <span>Сумма</span>\n                            <strong class=\"bottom-line-set bottom-line-set-zlp color-set-zlp\">${payment.product.price} ${getNoun(payment.enrolled, \"рубль\", \"рубля\", \"рублей\")}</strong>\n                        </li>\n                    `;\n                    document.querySelector(\"div.modal-footer\").prepend(private_gift_button);\n                }\n            }\n\n            if (!payment.enrolled || payment.enrolled < 1) {\n                sum_template =\n                    \"\";\n            }\n            if (!payment.email.length || payment.email.match(\"undefined\")) {\n                payment.email = \"Ну указано\";\n            }\n            if (!payment.payment_system ||\n                payment.payment_system.match(\"undefined\")) {\n                system_template = \"\";\n            }\n            if (!payment.created_at || !payment.created_at.length) {\n                payment.created_at = \"Неизвестно\";\n            } else {\n                const parsed_time = new Date(payment.created_at);\n                payment.created_at =\n                    `${parsed_time.toLocaleDateString()} ${parsed_time.toLocaleTimeString()}`;\n            }\n\n            let template_invite_link = \"\";\n            if (payment.private_invite) {\n                template_invite_link = `\n                    <li class=\"list-group-item d-flex justify-content-between lh-sm mb-2 mb-lg-3 mt-4 mt-lg-5\">\n                        <a href=\"${payment.private_invite}\" id=\"private-chat-button\" target=\"_blank\" style=\"margin:auto\"\n                                   class=\"btn btn-primary shadow-primary btn-lg btn-shadow-hide\">\n                                Приглашение в приватный чат <i class=\"ms-1 bx bxl-telegram\"></i></a>\n                    </li>\n                `;\n            }\n\n            cart_dom.innerHTML = `\n                <li class=\"list-group-item d-flex justify-content-between lh-sm\">\n                    <div>\n                        <h6 class=\"my-0 text-start\">\n                            Никнейм\n                        </h6>\n                    </div>\n                    <span>${payment.customer}</span>\n                </li>\n                <li class=\"list-group-item d-flex justify-content-between lh-sm\">\n                    <div>\n                        <h6 class=\"my-0 text-start\">\n                            Почта\n                        </h6>\n                    </div>\n                    <span>${payment.email}</span>\n                </li>\n                ${system_template}\n                <li class=\"list-group-item d-flex justify-content-between lh-sm\">\n                    <div>\n                        <h6 class=\"my-0 text-start\">\n                            Время\n                        </h6>\n                    </div>\n                    <span>${payment.created_at}</span>\n                </li>\n                ${sum_template}\n                ${template_invite_link}\n            `;\n        } else {\n            succ_text.innerText =\n                \"Чек неоплачен, Шеф недоволен.\";\n            document\n                .querySelector(\n                    \"img.payment-sucess-vova\"\n                )\n                .setAttribute(\n                    \"src\",\n                    \"assets/images/vova-fail.webp\"\n                );\n        }\n    };\n\n    const enable_modal = (\n        payment) => {\n        buildPayment(payment);\n        switch_modal_containers(\n            \"success\");\n        modal_open_();\n\n        // updaters\n        update_pm_desc();\n    };\n\n    checkPayment((payment) => {\n        if (typeof payment\n                .status !==\n            \"undefined\") {\n            enable_modal(\n                payment);\n            title\n                .innerText =\n                `Чек #${payment.id}`;\n        } else {\n            notify(\n                \"Ошибка, чек не найден или EasyDonate вернул недействительный ответ\"\n            );\n        }\n    }, payment_id);\n}\n\nconst successPay = () => {\n    const url = new URL(window\n        .location\n        .href)\n        .searchParams;\n    const payment_id = url.get(\n        \"pg_order_id\");\n\n    if (payment_id) {\n        callSucessPayModal(\n            payment_id);\n    }\n}\nconst displayPromotion = () => {\n    const selector = document.querySelector(\"div.promotion-header\");\n    const main = document.querySelector(\"main\");\n\n    requestCall((promotion) => {\n            if (promotion.active) {\n                const text = promotion.text;\n\n                selector.style.minHeight = \"40px\";\n                selector.style.height = \"100%\";\n                selector.setAttribute(\n                    \"onclick\",\n                    `clipboardFunc(\"input.promotionInput\", \"Промокод <span class=\\\\\"text-primary\\\\\" style=\\\\\"font-weight:800\\\\\">${promotion.var}</span> скопирован в буфер обмена.\")`\n                );\n                selector.innerHTML = `\n                <p class=\"text-center\" style=\"color:#fff!important;line-height:200%\">${text}</p>\n                <input class=\"promotionInput\" value=\"${promotion.var}\" style=\"display:none\">\n            `;\n\n                const s_text = document.querySelector(\"div.promotion-header>p\").style;\n                s_text.marginBottom = \"0\";\n                s_text.paddingRight = \"1.25rem\";\n                s_text.paddingLeft = \"1.25rem\";\n                s_text.paddingTop = \".18rem\";\n\n                // main.style.paddingTop = \"50px\";\n            }\n        },\n        \"assets/data/promotion.json\",\n        \"GET\", true\n    );\n}\nconst adaptiveDisplayLand = () => {\n    const updater = () => {\n        const header_height = document.querySelector(\"header\").offsetHeight;\n        // const d_h = header_height / 2;\n        const container = document.getElementById(\"head-container\");\n\n        const vova_pc_version = document.querySelector(\"div.vova-bg-landing\");\n        const vova_pc_version_mask = document.querySelector(\"div.vova-bg-landing-mask\");\n\n        if (first_init_head_adapt === 0 && first_init_head_adapt_vova === 0) {\n            first_init_head_adapt = container.offsetHeight;\n            first_init_head_adapt_vova = vova_pc_version.offsetHeight;\n        }\n\n        container.style.height = `${first_init_head_adapt - header_height}px`;\n        vova_pc_version.style.height = `${first_init_head_adapt_vova - header_height}px`;\n        vova_pc_version_mask.style.height = `${first_init_head_adapt_vova - header_height}px`;\n        container.style.marginTop = `${header_height}px`;\n    }\n\n    updater();\n    setInterval(updater, 250);\n}\nconst clipboardFunc = (field_selector, notify_text) => {\n    const copyText = document.querySelector(field_selector);\n\n    copyText.select();\n    copyText.setSelectionRange(0, 99999);\n\n    navigator.clipboard.writeText(copyText.value);\n\n    notify(notify_text)\n    return copyText.value;\n}\nconst spClownLoad = () => {\n    const buttons = document.getElementById(\"zlp_land_buttons\");\n    const button_template = `\n        <button onclick=\"spClownShow()\" \n                class=\"col btn btn-primary shadow-primary btn-lg me-sm-3 me-xl-4 mb-3 btn-shadow-hide\">\n            Я люблю СП\n        </button>\n    `;\n\n    getImageLightness(\"assets/images/Clown-Face.gif\", undefined, false);\n    buttons.innerHTML = buttons.innerHTML + button_template;\n}\n\nconst spClownShow = () => {\n    lock_sticker_switch = true;\n    setTimeout(function () {\n        lock_sticker_switch = false\n    }, 3500);\n\n    setSticker(0, 0, \"assets/images/emoji/clown-face.png\");\n    notify(\"На хуй отсюда иди тогда\");\n}\n\nconst donateContainerHash = () => {\n    observerContainerHash([\"donate\",\n            \"donate_block\"\n        ],\n        () => {\n            donate_displayed =\n                true;\n            donateSwitchContainer\n            (\n                donate_displayed\n            );\n        });\n}\n\nconst rulesModalOpen = () => {\n    let content = \"\";\n    get_rules_private_server((\n        rules) => {\n        for (let i = 0; i <\n        rules\n            .length; i++) {\n            content += `\n                    <li class=\"list-group-item d-flex justify-content-between lh-sm\">\n                        <div>\n                            <h6 class=\"my-0 text-start\">\n                                ${i + 1}\n                            </h6>\n                        </div>\n                        <span class=\"ps-2 pe-2 text-start\">${rules[i].text}</span>\n                    </li>\n                `;\n        }\n        switch_modal_containers\n        (\n            \"info\", {\n                title: \"Правила приватного сервера\",\n                content: `\n                <ul class=\"list-group mb-4 mb-lg-5\">\n                    ${content}\n                </ul>\n            `\n            });\n        modal_open_();\n    });\n}\n\nconst rulesPrivateContainerHash =\n    () => {\n        observerContainerHash([\n                \"private_rules\"\n            ],\n            () => {\n                rulesModalOpen();\n            });\n    }\n\nconst openAdminContact = () => {\n    checkTelegramAuthData((\n        data) => {\n        if (data || feedback_tg_auth_skip) {\n            if (!glob_players.length) {\n                glob_players = [\"Player\"];\n            }\n            shuffle(glob_players);\n            switch_modal_containers\n            (\"info\", {\n                title: \"Обратная связь\",\n                content: `\n                        <p class=\"mb-2 mb-lg-3 mb-xl-4 text-start\">\n                            Это форма для предложений и жалоб, опишите пожалуйста кратко и \n                            ясно свою идею или предложение без воды.\n                        </p>\n                        <div class=\"row mb-3\">\n                            <div id=\"customer-tokens-container\" class=\"col-md-6\">\n                                <label for=\"feedback_nickname_init\" class=\"form-label\">Никнейм</label>\n                                <input type=\"text\" class=\"form-control\" id=\"feedback_nickname_init\" placeholder=\"${glob_players[0]}\" value=\"\" required=\"\">\n                            </div>\n                            <div id=\"customer-tokens-container\" class=\"col-md-6\">\n                                <label for=\"feedback_reason_init\" class=\"form-label\">Причина</label>\n                                <select name=\"feedback_reason_init\" class=\"form-control\" id=\"feedback_reason_init\" value=\"game_question\" required=\"\">\n                                    <option value=\"tech_problem\">Технические проблемы</option>\n                                    <option value=\"game_question\">Вопрос по игре</option>\n                                    <option value=\"player_report\">Жалоба на игрока</option>\n                                    <option value=\"offer\">Предложение</option>\n                                </select>\n                            </div>\n                        </div>\n                        <div id=\"contant-input-container\">\n                            <label for=\"admin-message\">0/0</label>\n                            <textarea id=\"admin-message\" name=\"admin-message\" class=\"form-control\" maxlength=\"0\">\n                            </textarea>\n                        </div>\n                        <button onclick=\"sendFeedbackAction()\" class=\"w-100 btn btn-primary btn-lg btn-shadow-hide mt-3 mt-lg-4\" id=\"send-feedback-button\" type=\"button\">\n                            Отправить\n                        </button>\n                    `\n            });\n            const max_len =\n                3000;\n            const textarea =\n                document\n                    .getElementById(\n                        \"admin-message\"\n                    );\n            const label =\n                document\n                    .querySelector(\n                        'label[for=\"admin-message\"]'\n                    );\n            const space = \" \";\n            if (textarea.value.includes(space.repeat(3))) {\n                textarea.value = textarea.value.trim();\n            }\n            textarea.maxLength = max_len;\n            const update_len_counter =\n                    () => {\n                        label.innerText =\n                            `${textarea.value.length}/${max_len}`;\n                    }\n            update_len_counter();\n            addEventListener\n            (\n                \"keydown\",\n                (\n                    _\n                ) =>\n                    update_len_counter()\n            );\n            addEventListener\n            (\n                \"keyup\",\n                (\n                    _\n                ) =>\n                    update_len_counter()\n            );\n            modal_open_(\n                onclick_lock =\n                    true);\n        } else {\n            console.log(\n                \"Error check Telegram auth\"\n            );\n            openTelegramAuthModal();\n            notify(\n                \"Вам необходимо авторизоватся для этой функции\"\n            );\n        }\n    });\n}\nconst adminsContactContainerHash =\n    () => {\n        observerContainerHash([\n            \"contact\",\n            \"support\", \"bug\",\n            \"report\"\n        ], () => {\n            openAdminContact();\n        });\n    }\n\nconst observerContainerHash = (\n    hash_array, action) => {\n    const updater = () => {\n        if (hash_array.includes(\n            linkHash())) {\n            action();\n        }\n    };\n\n    updater();\n    addEventListener(\n        'hashchange', (_) =>\n            updater());\n}\n\nconst openTelegramAuthModal = (skip_check = false) => {\n    checkTelegramAuthData(function (tg_success) {\n        if (!tg_success) {\n            console.log(\n                \"Telegram auth preparing...\"\n            );\n            // modal_close_();\n            const script_telegram_widget =\n                document.createElement(\n                    'script');\n\n            script_telegram_widget.src =\n                \"https://telegram.org/js/telegram-widget.js?21\";\n            script_telegram_widget\n                .setAttribute(\n                    \"async\", \"\");\n            script_telegram_widget\n                .setAttribute(\n                    \"data-telegram-login\",\n                    telegram_bot_username);\n            script_telegram_widget\n                .setAttribute(\n                    \"data-size\", \"large\");\n            script_telegram_widget\n                .setAttribute(\n                    \"data-radius\", \"8\");\n            script_telegram_widget\n                .setAttribute(\n                    \"data-onauth\",\n                    \"onTelegramAuth(user)\");\n            script_telegram_widget\n                .setAttribute(\"data-request-access\", \"write\");\n\n            script_telegram_widget.onload =\n                () => {\n                    switch_modal_containers(\n                        \"info\", {\n                            title: \"\",\n                            content: \"\"\n                        });\n                    modal_open_();\n                }\n\n            const content = document\n                .getElementById(\n                    \"info-content-modal\");\n            const container = document\n                .createElement(\"div\");\n            const text = document\n                .createElement(\n                    \"p\");\n\n            content.innerHTML = \"\";\n            content.appendChild(container);\n            content.appendChild(text);\n            text.innerHTML = `\n                Для некоторых функций на этом сайте необходимо авторизироваться. \n                Мы не получим никаких конфиденциальных данных о вас, например, \n                ваш номер или локацию, это нужно только для того, чтобы Telegram \n                подтвердил, что вы являетесь владельцем своего аккаунта. Также \n                не забудьте связать свой аккаунт Telegram с игровым аккаунтом \n                в <a href=\"${telegram_social_bot}\" target=\"_blank\" class=\"text-primary\">нашем боте</a>.\n            `;\n\n            text.setAttribute(\"class\",\n                \"text-start px-3 pt-1 pt-lg-2\"\n            );\n            container.id =\n                \"telegram-auth-container\";\n            container.appendChild(\n                script_telegram_widget);\n        }\n    }, skip_check);\n}\n\nconst openLoginHint = () => {\n    if (!allow_display_login_hint) {\n        return;\n    }\n\n    const content = document\n        .getElementById(\n            \"info-content-modal\");\n    const container = document\n        .createElement(\"div\");\n    const text = document\n        .createElement(\n            \"p\");\n\n    content.innerHTML = \"\";\n    content.appendChild(container);\n    content.appendChild(text);\n    text.innerHTML = `\n                Похоже что ты не прочитал текст в первом окне авторизации,\n                повторим процедуру. Чтобы завершить авторизацию на сайте - тебе нужно \n                связать свой Telegram с своим игровым аккаунтом в&nbsp;\n                <a href=\"${telegram_social_bot}\" target=\"_blank\" class=\"text-primary\">нашем боте</a>.\n            `;\n\n    text.setAttribute(\"class\",\n        \"text-start px-3 pt-1 pt-lg-2\"\n    );\n    container.id =\n        \"telegram-auth-hint\";\n\n    notify(\n        \"Прочитай внимательно инструкцию!\"\n    );\n\n    switch_modal_containers(\n        \"info\", {\n            title: \"Помощь авторизации\",\n            content: \"\"\n        });\n    modal_open_();\n}\n\nconst initJarallax = () => {\n    jarallax(document\n        .querySelectorAll(\n            '.jarallax'), {\n        speed: .15,\n        type: \"scale-opacity\"\n    });\n}\n\nconst initTooltip = () => {\n    const tooltipTriggerList = []\n        .slice\n        .call(document\n            .querySelectorAll(\n                '[data-bs-toggle=\"tooltip\"]'\n            ));\n    const tooltipList =\n        tooltipTriggerList\n            .map((\n                tooltipTriggerEl\n            ) => {\n                tooltip_instance =\n                    new bootstrap\n                        .Tooltip(\n                            tooltipTriggerEl, {\n                                template: `\n                                <div class=\"tooltip\" role=\"tooltip\">\n                                    <div class=\"tooltip-inner\"></div>\n                                </div>\n                            `,\n                            });\n            });\n\n    if (tooltip_instance) {\n        setInterval(() => {\n            tooltip_instance\n                .update();\n        }, 1200);\n    }\n}\n\nconst initSmoothScrollObserver = () => {\n    const scrollerObject =\n        new SmoothScroll(\"section\");\n\n    const callScroller = () => {\n        const identifier =\n            linkHash()\n                .toLowerCase();\n\n        if (!(identifier &&\n            identifier\n                .length\n        ) || ([\n            \"private_rules\"\n        ].includes(identifier))) {\n            return;\n        }\n\n        try {\n            scrollerObject.animateScroll(\n                document.querySelector(`section[id=\"${identifier}\"]`\n                ), null, {offset: 50});\n        } catch (_) {\n            return;\n        }\n    }\n\n    callScroller();\n    window.onhashchange =\n        callScroller;\n}\n\nconst privateServerModuleInit = () => {\n    const desc = document.getElementById(\"private-server-hub-description\");\n\n    desc.innerHTML = `\n        Проект Zalupa.Online за период своего существования от единого сервера\n        Анархии перерос в проект с несколькими режимами, один из таких – приватный\n        сервер с ванильным выживанием. Особенность этого сервера, что туда попадают\n        только те, кто поддержал сервер финансово. Также единственный режим, где вы\n        можете быть на уровне с администрацией, ведь здесь можно играть только с\n        правами обычного игрока, никаких привилегий. Также не забудь\n        <a class=\"text-gradient-primary\" href=\"https://www.notion.so/zaluparules/zalupa-online-1e6269506d084d6ba9549cbb7d40e3a4\">\n            прочитать правила</a>.\n    `;\n}\n\nconst tonyComeBack = () => {\n    const selector = document.getElementById(\"AppleTony_comeback_days\");\n\n    const update_days = (days_count) => {\n        selector.innerText = `${days_count} ${getNoun(\n            days_count, \"день\", \"дня\", \"дней\"\n        )}`;\n    }\n\n    const date1 = new Date();\n    const date2 = new Date(\"11/30/2023\");\n\n    const differenceInTime = date2.getTime() - date1.getTime();\n    const differenceInDays = parseInt(differenceInTime / (1000 * 3600 * 24));\n\n    update_days(differenceInDays);\n    setInterval(function () {\n        update_days(differenceInDays)\n    }, 9999);\n}\n\nconst autoAuthTelegramObserver = () => {\n    if (telegram_auth_enabled) {\n        document.getElementById(\"telegram-auth-avatar\")\n            .style.display = \"\";\n    }\n    checkTelegramAuthData((\n        success) => {\n        console.debug(\n            `Telegram auth check status : ${success}`\n        );\n        if (success) {\n            const\n                button_contact_land =\n                    document\n                        .getElementById(\n                            \"contact-button-land\"\n                        );\n            const\n                button_auth =\n                    document\n                        .querySelector(\n                            \".avatar-container\"\n                        );\n            const\n                telegram_auth_avatar =\n                    document\n                        .getElementById(\n                            \"telegram-auth-avatar\"\n                        );\n\n            button_auth\n                .removeAttribute(\n                    \"onclick\"\n                );\n            if (feedback_module_enabled) {\n                button_contact_land\n                    .style\n                    .display =\n                    \"\";\n            }\n            telegram_auth_avatar\n                .style\n                .display =\n                \"\";\n            setAvatar(getTelegramAuth());\n        }\n    });\n    setInterval(displayTokens, 1200);\n}\n\nconst initCore = () => {\n    initHost();\n    initCrypto();\n    initLanding();\n    observerSystemTheme();\n    buildPlayersSwiper();\n    buildDonateHistorySwiper();\n    appendPostsNews();\n    initComments();\n    appendServices();\n    updateCartCount();\n    gameServerUpdater();\n    initDonate();\n    initEventsList();\n    initJarallax();\n    finishLoad();\n    successPay();\n    ytVideoSetter();\n    setRandomStickerLand();\n\n    donateContainerHash();\n    rulesPrivateContainerHash();\n    adminsContactContainerHash();\n\n    privateServerModuleInit();\n\n    autoAuthTelegramObserver();\n\n    tonyComeBack();\n    displayPromotion();\n    adaptiveDisplayLand();\n\n    setLauncherLinks();\n    donate_bg_preload();\n\n    check_modal_();\n\n    const elem = document\n        .getElementById(\n            \"dark-perm-set-bv\");\n    elem.parentNode.removeChild(\n        elem);\n\n    window.onload = () => {\n        if (!debug_lock_init) {\n            const preloader =\n                document\n                    .querySelector(\n                        \".page-loading\"\n                    );\n            const wait = 1500;\n            const move_wait =\n                100;\n            setTimeout(\n                () => {\n                    preloader\n                        .classList\n                        .remove(\n                            \"active\"\n                        );\n                    if (!\n                        donate_displayed\n                    ) {\n                        document\n                            .body\n                            .style\n                            .overflowY =\n                            \"\";\n                    }\n                    window\n                        .scrollTo({\n                            top: 0,\n                        });\n                }, wait);\n            setTimeout(\n                () => {\n                    preloader\n                        .remove();\n\n                    // after tasks\n                    initTooltip\n                    ();\n                    initSmoothScrollObserver\n                    ();\n                }, wait +\n                move_wait);\n            setInterval(() => {\n                checkTelegramAuthData(function (_) {}, false, false, true);\n            }, 12*1000);\n        }\n    };\n};\n\nscript_core.onload = () => {\n    initCore();\n};"],"mappings":"AAAA;AACA;AACA;;AAEA,YAAY;;AAAC,IAAAA,KAAA;AAAA,SAAAC,2BAAAC,CAAA,EAAAC,cAAA;EAAA,IAAAC,EAAA,UAAAC,MAAA,oBAAAH,CAAA,CAAAG,MAAA,CAAAC,QAAA,KAAAJ,CAAA;EAAA,KAAAE,EAAA;IAAA,IAAAG,KAAA,CAAAC,OAAA,CAAAN,CAAA,MAAAE,EAAA,GAAAK,2BAAA,CAAAP,CAAA,MAAAC,cAAA,IAAAD,CAAA,WAAAA,CAAA,CAAAQ,MAAA;MAAA,IAAAN,EAAA,EAAAF,CAAA,GAAAE,EAAA;MAAA,IAAAO,CAAA;MAAA,IAAAC,CAAA,YAAAA,EAAA;MAAA;QAAAC,CAAA,EAAAD,CAAA;QAAAE,CAAA,WAAAA,EAAA;UAAA,IAAAH,CAAA,IAAAT,CAAA,CAAAQ,MAAA;YAAAK,IAAA;UAAA;UAAA;YAAAA,IAAA;YAAAC,KAAA,EAAAd,CAAA,CAAAS,CAAA;UAAA;QAAA;QAAAM,CAAA,WAAAA,EAAAC,EAAA;UAAA,MAAAA,EAAA;QAAA;QAAAC,CAAA,EAAAP;MAAA;IAAA;IAAA,UAAAQ,SAAA;EAAA;EAAA,IAAAC,gBAAA;IAAAC,MAAA;IAAAC,GAAA;EAAA;IAAAV,CAAA,WAAAA,EAAA;MAAAT,EAAA,GAAAA,EAAA,CAAAoB,IAAA,CAAAtB,CAAA;IAAA;IAAAY,CAAA,WAAAA,EAAA;MAAA,IAAAW,IAAA,GAAArB,EAAA,CAAAsB,IAAA;MAAAL,gBAAA,GAAAI,IAAA,CAAAV,IAAA;MAAA,OAAAU,IAAA;IAAA;IAAAR,CAAA,WAAAA,EAAAU,GAAA;MAAAL,MAAA;MAAAC,GAAA,GAAAI,GAAA;IAAA;IAAAR,CAAA,WAAAA,EAAA;MAAA;QAAA,KAAAE,gBAAA,IAAAjB,EAAA,oBAAAA,EAAA;MAAA;QAAA,IAAAkB,MAAA,QAAAC,GAAA;MAAA;IAAA;EAAA;AAAA;AAAA,SAAAK,mBAAAC,GAAA;EAAA,OAAAC,kBAAA,CAAAD,GAAA,KAAAE,gBAAA,CAAAF,GAAA,KAAApB,2BAAA,CAAAoB,GAAA,KAAAG,kBAAA;AAAA;AAAA,SAAAA,mBAAA;EAAA,UAAAZ,SAAA;AAAA;AAAA,SAAAX,4BAAAP,CAAA,EAAA+B,MAAA;EAAA,KAAA/B,CAAA;EAAA,WAAAA,CAAA,sBAAAgC,iBAAA,CAAAhC,CAAA,EAAA+B,MAAA;EAAA,IAAAnB,CAAA,GAAAqB,MAAA,CAAAC,SAAA,CAAAC,QAAA,CAAAb,IAAA,CAAAtB,CAAA,EAAAoC,KAAA;EAAA,IAAAxB,CAAA,iBAAAZ,CAAA,CAAAqC,WAAA,EAAAzB,CAAA,GAAAZ,CAAA,CAAAqC,WAAA,CAAAC,IAAA;EAAA,IAAA1B,CAAA,cAAAA,CAAA,mBAAAP,KAAA,CAAAkC,IAAA,CAAAvC,CAAA;EAAA,IAAAY,CAAA,+DAAA4B,IAAA,CAAA5B,CAAA,UAAAoB,iBAAA,CAAAhC,CAAA,EAAA+B,MAAA;AAAA;AAAA,SAAAF,iBAAAY,IAAA;EAAA,WAAAtC,MAAA,oBAAAsC,IAAA,CAAAtC,MAAA,CAAAC,QAAA,aAAAqC,IAAA,+BAAApC,KAAA,CAAAkC,IAAA,CAAAE,IAAA;AAAA;AAAA,SAAAb,mBAAAD,GAAA;EAAA,IAAAtB,KAAA,CAAAC,OAAA,CAAAqB,GAAA,UAAAK,iBAAA,CAAAL,GAAA;AAAA;AAAA,SAAAK,kBAAAL,GAAA,EAAAe,GAAA;EAAA,IAAAA,GAAA,YAAAA,GAAA,GAAAf,GAAA,CAAAnB,MAAA,EAAAkC,GAAA,GAAAf,GAAA,CAAAnB,MAAA;EAAA,SAAAC,CAAA,MAAAkC,IAAA,OAAAtC,KAAA,CAAAqC,GAAA,GAAAjC,CAAA,GAAAiC,GAAA,EAAAjC,CAAA,IAAAkC,IAAA,CAAAlC,CAAA,IAAAkB,GAAA,CAAAlB,CAAA;EAAA,OAAAkC,IAAA;AAAA;AACb,IAAMC,YAAY,GAAG;EACjBC,IAAI,EAAEC,WAAW;EACjBC,GAAG,EAAEC,iBAAiB,CAAC,CAAC,CAAC;EACzBR,IAAI,EAAEQ,iBAAiB,CAAC,CAAC;AAC7B,CAAC;AACD,IAAMC,WAAW,GAAG,UAAU;AAC9B,IAAMC,QAAQ,GAAG,CAAC;AAClB,IAAMC,QAAQ,GAAG,CACb;EACIb,IAAI,EAAE,QAAQ;EACdc,IAAI,EAAE;AACV,CAAC,EACD;EACId,IAAI,EAAE,SAAS;EACfc,IAAI,EAAE;AACV,CAAC,EACD;EACId,IAAI,EAAE,UAAU;EAChBc,IAAI,EAAE;AACV,CAAC,EACD;EACId,IAAI,EAAE,SAAS;EACfc,IAAI,EAAE;AACV,CAAC,EACD;EACId,IAAI,EAAE,QAAQ;EACdc,IAAI,EAAE;AACV,CAAC,CACJ;AACD,IAAMC,kBAAkB,GAAG;EACvBC,GAAG,EAAE,KAAK;EACVC,KAAK,EAAE,KAAK;EACZC,OAAO,EAAE;AACb,CAAC;AACD,IAAMC,QAAQ,GAAG,eAAe;AAChC,IAAMC,eAAe,GAAG,mBAAmB;AAC3C,IAAMC,OAAO,GAAG,IAAI;AACpB,IAAMC,eAAe,GAAG,IAAI;AAE5B,IAAIC,4BAA4B,GAAG,EAAE;AACrC,IAAIC,qBAAqB,GAAG,EAAE;AAC9B,IAAIC,aAAa,GAAG,IAAI;AACxB,IAAIC,YAAY,GAAG,EAAE;AACrB,IAAIC,kBAAkB,GAAG,KAAK;AAC9B,IAAIC,wBAAwB,GAAG,IAAI;AACnC,IAAIC,YAAY;AAChB,IAAIC,eAAe;AACnB,IAAIC,kBAAkB;AACtB,IAAIC,cAAc,GAAG,EAAE;AACvB,IAAIC,aAAa,GAAG,EAAE;AACtB,IAAIC,YAAY,GAAG,EAAE;AACrB,IAAIC,gBAAgB;AACpB,IAAIC,iBAAiB,GAAG,MAAM;AAC9B,IAAIC,gBAAgB,GAAG,KAAK;AAC5B,IAAIC,eAAe,GAAG,KAAK;AAC3B,IAAIC,aAAa,GAAG,KAAK;AACzB,IAAIC,iBAAiB,GAAG,KAAK;AAC7B,IAAIC,mBAAmB,GAAG,KAAK;AAC/B,IAAIC,wBAAwB;AAC5B,IAAIC,aAAa,GAAG,eAAe;AACnC,IAAIC,oBAAoB,GAAG,EAAE;AAC7B,IAAIC,qBAAqB,GAAG,EAAE;AAC9B,IAAIC,cAAc,GAAG,CAAC;AACtB,IAAIC,mBAAmB,GAAG,EAAE;AAC5B,IAAIC,qBAAqB,GAAG,eAAe;AAC3C,IAAIC,qBAAqB,GAAG,CAAC;AAC7B,IAAIC,0BAA0B,GAAG,CAAC;AAClC,IAAIC,iBAAiB,GAAG,CAAC;AACzB,IAAIC,SAAS,GAAG,EAAE;AAClB,IAAIC,aAAa,GAAG,KAAK;AACzB,IAAIC,qBAAqB,GAAG;EACxBC,SAAS,EAAE,IAAI;EAAEC,QAAQ,EAAE;AAC/B,CAAC;AAED,IAAMC,mBAAmB,GAAG,0BAA0B;AACtD,IAAMC,eAAe,GAAG,KAAK;AAC7B,IAAMC,qBAAqB,GAAG,IAAI;AAClC,IAAMC,uBAAuB,GAAG,KAAK;AACrC,IAAMC,qBAAqB,GAAG,IAAI;AAClC,IAAMC,qBAAqB,GAAG,IAAI;AAGlC,IAAMC,QAAQ,GAAG,SAAXA,QAAQA,CAAA,EAAS;EACnB,IAAMC,IAAI,GAAGrE,MAAM,CAACqE,IAAI,CAAC1D,YAAY,CAAC;EACtC,KAAK,IAAInC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6F,IAAI,CAAC9F,MAAM,EAAEC,CAAC,EAAE,EAAE;IAClC,IAAImC,YAAY,CAAC0D,IAAI,CAAC7F,CAAC,CAAC,CAAC,KAAK8F,MAAM,CAACC,QAAQ,CAACC,QAAQ,EAAE;MACpDxB,aAAa,GAAGrC,YAAY,CAAC0D,IAAI,CAAC7F,CAAC,CAAC,CAAC;IACzC;EACJ;AACJ,CAAC;AACD,IAAMiG,QAAQ,GAAG,SAAXA,QAAQA,CAAA,EAAS;EACnB,OAAOH,MAAM,CAACC,QAAQ,CAACG,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC;AAC5C,CAAC;AACD,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIC,QAAQ,EAAK;EACnC,OAAOA,QAAQ,CAACC,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAACC,UAAU,CAAC,KAAK,EAAE,KAAK,CAAC;AACtE,CAAC;AACD,IAAMC,eAAe,GAAG,SAAlBA,eAAeA,CAAIC,IAAI,EAAK;EAC9B,IAAMC,kBAAkB,GAAG,CAACD,IAAI,CAACE,iBAAiB,EAAE,GAAG,KAAK;EAC5D,OAAO,IAAIC,IAAI,CAACH,IAAI,CAACI,OAAO,EAAE,GAAGH,kBAAkB,CAAC;AACxD,CAAC;AACD,IAAMI,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAA,EAAoB;EAAA,IAAhBL,IAAI,GAAAM,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,IAAI;EACnC,IAAI,CAACN,IAAI,EAAE;IACPA,IAAI,GAAG,IAAIG,IAAI,EAAE;EACrB;EACA,OAAO,IAAIA,IAAI,CAACH,IAAI,CAACQ,cAAc,CAAC,OAAO,EAAE;IACzCC,QAAQ,EAAE;EACd,CAAC,CAAC,CAAC;AACP,CAAC;AACD,IAAMC,SAAS,GAAG,SAAZA,SAASA,CAAIV,IAAI,EAAEW,QAAQ,EAAK;EAClC,IAAI;IACA,CAAC,IAAIR,IAAI,CAACH,IAAI,CAAC,CAACQ,cAAc,CAAC,EAAE,EAAE;MAC/BC,QAAQ,EAAEE,QAAQ;MAClBC,YAAY,EAAE;IAClB,CAAC,CAAC,CAACC,KAAK,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;EACrC,CAAC,CAAC,OAAOhH,CAAC,EAAE;IACRiH,OAAO,CAACC,KAAK,gBAAAC,MAAA,CAAgBnH,CAAC,EAAG;IACjC,OAAO,CAAC;EACZ;AACJ,CAAC;AACD,IAAMoH,UAAU,GAAG,SAAbA,UAAUA,CAAIjB,IAAI,EAAiB;EAAA,IAAfkB,GAAG,GAAAZ,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,IAAI;EAChC,IAAIa,IAAI,GAAG,IAAIhB,IAAI,EAAE,GAAGH,IAAI;EAC5B,IAAIkB,GAAG,EAAE;IACLC,IAAI,GAAGD,GAAG,GAAGlB,IAAI;EACrB;EAEA,IAAImB,IAAI,GAAG,IAAI,EAAE;IACb,OAAO,cAAc;EACzB;EAEA,IAAIC,GAAG,GAAGC,IAAI,CAACC,KAAK,CAACH,IAAI,GAAG,IAAI,CAAC;EAEjC,IAAIC,GAAG,GAAG,EAAE,EAAE;IACV,OAAOA,GAAG,OAAAJ,MAAA,CAAOO,OAAO,CAACH,GAAG,EAAE,SAAS,EAAE,SAAS,EAAE,QAAQ,CAAC,oCAAQ;EACzE;EAEA,IAAII,GAAG,GAAGH,IAAI,CAACC,KAAK,CAACH,IAAI,IAAI,IAAI,GAAG,EAAE,CAAC,CAAC;EACxC,IAAIK,GAAG,GAAG,EAAE,EAAE;IACV,OAAOA,GAAG,OAAAR,MAAA,CAAOO,OAAO,CAACC,GAAG,EAAE,QAAQ,EAAE,QAAQ,EAAE,OAAO,CAAC,oCAAQ;EACtE;EAEA,IAAIC,IAAI,GAAGJ,IAAI,CAACC,KAAK,CAACH,IAAI,IAAI,IAAI,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;EAC9C,IAAIM,IAAI,GAAG,EAAE,EAAE;IACX,OAAOA,IAAI,OAAAT,MAAA,CAAOO,OAAO,CAACE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,CAAC,oCAAQ;EACnE;EAEA,IAAIC,CAAC,GAAG1B,IAAI;EACZ0B,CAAC,GAAG,CACA,GAAG,GAAGA,CAAC,CAACC,OAAO,EAAE,EACjB,GAAG,IAAID,CAAC,CAACE,QAAQ,EAAE,GAAG,CAAC,CAAC,EACxB,EAAE,GAAGF,CAAC,CAACG,WAAW,EAAE,EACpB,GAAG,GAAGH,CAAC,CAACI,QAAQ,EAAE,EAClB,GAAG,GAAGJ,CAAC,CAACK,UAAU,EAAE,CACvB,CAACC,GAAG,CAAC,UAAAC,SAAS;IAAA,OAAIA,SAAS,CAAC/G,KAAK,CAAC,CAAC,CAAC,CAAC;EAAA,EAAC;EAEvC,OAAOwG,CAAC,CAACxG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAACgH,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,GAAGR,CAAC,CAACxG,KAAK,CAAC,CAAC,CAAC,CAACgH,IAAI,CAAC,GAAG,CAAC;AAC/D,CAAC;AACD,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAIC,GAAG,EAAK;EACzB,OAAO/C,MAAM,CAACgD,IAAI,CAACC,QAAQ,CAACC,kBAAkB,CAACH,GAAG,CAAC,CAAC,CAAC;AACzD,CAAC;AACD,IAAMI,WAAW,GAAG,SAAdA,WAAWA,CAAIJ,GAAG,EAAK;EACzB,OAAOK,kBAAkB,CAACC,MAAM,CAACrD,MAAM,CAACsD,IAAI,CAACP,GAAG,CAAC,CAAC,CAAC;AACvD,CAAC;AACD,IAAMQ,SAAS,GAAG,SAAZA,SAASA,CAAA,EAAiB;EAAA,IAAbC,GAAG,GAAAvC,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,EAAE;EACvB,OAAOe,IAAI,CAACC,KAAK,CAACD,IAAI,CAACyB,MAAM,EAAE,GAAGD,GAAG,CAAC,GAAG,CAAC;AAC9C,CAAC;AACD,IAAME,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAAS;EACtB,IAAIC,SAAS,CAACC,QAAQ,CAACC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,IAAIF,SAAS,CAACC,QAAQ,KAAK,QAAQ,EAAE;IAC5E,OAAO,KAAK;EAChB;EACA,IAAID,SAAS,CAACC,QAAQ,CAACC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;IAC3C,OAAO,OAAO;EAClB;EACA,OAAO,SAAS;AACpB,CAAC;AACD,IAAMC,QAAQ,GAAG,SAAXA,QAAQA,CAAA,EAAS;EACnB,OAAO,QAAQ,CAAC7H,IAAI,CAAC0H,SAAS,CAACI,SAAS,CAAC,IAAI,YAAY,CAAC9H,IAAI,CAAC0H,SAAS,CAACK,MAAM,CAAC;AACpF,CAAC;AACD,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAA,EAAS;EAC3BC,sBAAsB,CAAC,UAASC,MAAM,EAAE;IACpC,IAAMtH,IAAI,GAAGsH,MAAM,CAACT,WAAW,EAAE,CAAC;IAElC1D,MAAM,CAACC,QAAQ,GAAGpD,IAAI;IACtB4E,OAAO,CAAC2C,KAAK,qCAAAzC,MAAA,CAAqC9E,IAAI,EAAG;IAEzD,IAAI,CAACiH,QAAQ,EAAE,EAAE;MACbO,MAAM,4KAAA1C,MAAA,CACF9E,IAAI,CAACyH,KAAK,CAAC,GAAG,CAAC,CAACzI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,aACtB;IACd;EACJ,CAAC,CAAC;AACN,CAAC;AACD,IAAM0I,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAGC,IAAI;EAAA,OAAIrJ,kBAAA,CAAIrB,KAAK,CAAC0K,IAAI,CAAC,EAAE7B,GAAG,CAClD;IAAA,OAAMX,IAAI,CAACC,KAAK,CAACD,IAAI,CAACyB,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC7H,QAAQ,CAAC,EAAE,CAAC;EAAA,EACpD,CAACiH,IAAI,CAAC,EAAE,CAAC;AAAA;AACV,IAAM4B,qBAAqB,GAAG,SAAxBA,qBAAqBA,CAAIC,OAAO,EAAK;EACvC,IAAIC,MAAM,GAAG,CAAC;EACd,IAAIC,IAAI,GAAG,CAAC;EACZ,OAAOF,OAAO,GAAG,CAAC,EAAE;IAChBC,MAAM,IAAKD,OAAO,GAAG,CAAC,GAAIE,IAAI;IAC9BA,IAAI,IAAI,EAAE;IACVF,OAAO,GAAG1C,IAAI,CAACC,KAAK,CAACyC,OAAO,GAAG,CAAC,CAAC;EACrC;EACA,OAAOG,QAAQ,CAACF,MAAM,CAAC/I,QAAQ,EAAE,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AAChD,CAAC;AACD,IAAMiJ,OAAO,GAAG,SAAVA,OAAOA,CAAIjI,IAAI,EAAK;EACtB,IAAMuD,IAAI,GAAGJ,MAAM,CAACC,QAAQ,CAACG,IAAI,CAAC2E,MAAM,CAAC,CAAC,CAAC;EAC3C,OAAOrJ,MAAM,CAACqE,IAAI,CAACK,IAAI,CAACkE,KAAK,CAAC,GAAG,CAAC,CAACU,MAAM,CAAC,UAACL,MAAM,EAAEM,IAAI,EAAK;IACxD,IAAMC,KAAK,GAAGD,IAAI,CAACX,KAAK,CAAC,GAAG,CAAC;IAC7BK,MAAM,CAACO,KAAK,CAAC,CAAC,CAAC,CAAC,GAAGA,KAAK,CAAC,CAAC,CAAC;IAC3B,OAAOP,MAAM;EACjB,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACd,CAAC;AACD,IAAMQ,QAAQ,GAAG,SAAXA,QAAQA,CAAIC,QAAQ,EAAK;EAC3BC,UAAU,CAACC,KAAK,CAAC,YAAM;IACnBD,UAAU,CAACE,OAAO,CAACC,QAAQ,EAAE;MACzBC,MAAM,EAAE;IACZ,CAAC,CAAC,CAACC,IAAI,CAAC,UAACC,YAAY,EAAK;MACtBP,QAAQ,CAACO,YAAY,CAAC;IAC1B,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC;AACD,IAAMC,OAAO,GAAG,SAAVA,OAAOA,CAAIC,KAAK,EAAK;EACvB,IAAIC,YAAY,GAAGD,KAAK,CAAC5L,MAAM;IAC3B8L,WAAW;EACf,OAAOD,YAAY,KAAK,CAAC,EAAE;IACvBC,WAAW,GAAG/D,IAAI,CAACC,KAAK,CAACD,IAAI,CAACyB,MAAM,EAAE,GAAGqC,YAAY,CAAC;IACtDA,YAAY,EAAE;IAAC,IAAAE,IAAA,GAC6B,CAACH,KAAK,CAACE,WAAW,CAAC,EAAEF,KAAK,CAACC,YAAY,CAAC,CAAE;IAArFD,KAAK,CAACC,YAAY,CAAC,GAAAE,IAAA;IAAEH,KAAK,CAACE,WAAW,CAAC,GAAAC,IAAA;EAC5C;EACA,OAAOH,KAAK;AAChB,CAAC;AACD,IAAMI,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,IAAI,EAAK;EAC5B,IAAIC,QAAQ,GAAG,CAAC;EAChB,IAAIC,MAAM,GAAG,CAAC;EACd,KAAK,IAAIlM,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgM,IAAI,CAACjM,MAAM,EAAEC,CAAC,EAAE,EAAE;IAClCiM,QAAQ,GAAGjM,CAAC;IACZkM,MAAM,GAAGF,IAAI,CAAChM,CAAC,CAAC;IAChB,KAAK,IAAImM,CAAC,GAAGnM,CAAC,GAAG,CAAC,EAAEmM,CAAC,GAAGH,IAAI,CAACjM,MAAM,EAAEoM,CAAC,EAAE,EAAE;MACtC,IAAIH,IAAI,CAACG,CAAC,CAAC,GAAGD,MAAM,EAAE;QAClBA,MAAM,GAAGF,IAAI,CAACG,CAAC,CAAC;QAChBF,QAAQ,GAAGE,CAAC;MAChB;IACJ;IACA,IAAID,MAAM,GAAGF,IAAI,CAAChM,CAAC,CAAC,EAAE;MAClB,IAAMoM,IAAI,GAAGJ,IAAI,CAAChM,CAAC,CAAC;MACpBgM,IAAI,CAAChM,CAAC,CAAC,GAAGgM,IAAI,CAACC,QAAQ,CAAC;MACxBD,IAAI,CAACC,QAAQ,CAAC,GAAGG,IAAI;IACzB;EACJ;AACJ,CAAC;AACD,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAIC,QAAQ,EAAEpB,QAAQ,EAAuB;EAAA,IAArBqB,SAAS,GAAAxF,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,IAAI;EAC3D,IAAMyF,GAAG,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EACzCF,GAAG,CAACG,GAAG,GAAGL,QAAQ;EAClBE,GAAG,CAACI,WAAW,GAAG,WAAW;EAC7BJ,GAAG,CAACK,KAAK,CAACC,OAAO,GAAG,MAAM;EAC1BL,QAAQ,CAACM,IAAI,CAACC,WAAW,CAACR,GAAG,CAAC;EAC9B,IAAIS,QAAQ,GAAG,CAAC;EAChB,IAAIV,SAAS,EAAE;IACXC,GAAG,CAACU,MAAM,GAAG,YAAM;MACf,IAAMC,MAAM,GAAGV,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MAC/CS,MAAM,CAACC,KAAK,GAAG/N,KAAI,CAAC+N,KAAK;MACzBD,MAAM,CAACE,MAAM,GAAGhO,KAAI,CAACgO,MAAM;MAC3B,IAAMC,GAAG,GAAGH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC;MACnC,IAAI;QACAD,GAAG,CAACE,SAAS,CAACnO,KAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,IAAMoO,UAAS,GAAGH,GAAG,CAACI,YAAY,CAAC,CAAC,EAAE,CAAC,EAAEP,MAAM,CAACC,KAAK,EAAED,MAAM,CAACE,MAAM,CAAC;MACzE,CAAC,CAAC,OAAOM,CAAC,EAAE;QACRzC,QAAQ,CAAC,IAAI,CAAC;QACd;MACJ;MACA,IAAM0C,IAAI,GAAGC,SAAS,CAACD,IAAI;MAC3B,IAAIE,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,GAAG;MAChB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEjM,GAAG,GAAG2L,IAAI,CAAC7N,MAAM,EAAEmO,CAAC,GAAGjM,GAAG,EAAEiM,CAAC,IAAI,CAAC,EAAE;QAChDJ,CAAC,GAAGF,IAAI,CAACM,CAAC,CAAC;QACXH,CAAC,GAAGH,IAAI,CAACM,CAAC,GAAG,CAAC,CAAC;QACfF,CAAC,GAAGJ,IAAI,CAACM,CAAC,GAAG,CAAC,CAAC;QACfD,GAAG,GAAGnG,IAAI,CAACC,KAAK,CAAC,CAAC+F,CAAC,GAAGC,CAAC,GAAGC,CAAC,IAAI,CAAC,CAAC;QACjCf,QAAQ,IAAIgB,GAAG;MACnB;MACA,IAAME,UAAU,GAAGrG,IAAI,CAACC,KAAK,CAACkF,QAAQ,IAAI5N,KAAI,CAAC+N,KAAK,GAAG/N,KAAI,CAACgO,MAAM,CAAC,CAAC;MACpEnC,QAAQ,CAACiD,UAAU,CAAC;MACpB3B,GAAG,CAAC4B,MAAM,EAAE;IAChB,CAAC;EACL;AACJ,CAAC;AACD,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAA,EAAS;EAC5B,IAAMxL,GAAG,GAAG,yBAAyB,CAACd,IAAI,CAAC0H,SAAS,CAACC,QAAQ,CAAC;EAC9D,IAAI7G,GAAG,EAAE;IACL,OAAO,IAAI;EACf;AACJ,CAAC;AACD,IAAMyL,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,KAAK,EAAK;EAC7B,OAAOC,MAAM,CAACD,KAAK,CAAC,CAACE,WAAW,EAAE,CAACnH,KAAK,CAAC,uJAAuJ,CAAC;AACrM,CAAC;AACD,IAAMoH,YAAY,GAAG,SAAfA,YAAYA,CAAIC,QAAQ,EAAEC,YAAY,EAAK;EAC7C,IAAMC,GAAG,GAAG,IAAIC,GAAG,CAACH,QAAQ,CAAC;EAC7B,KAAK,IAAI3O,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4O,YAAY,CAAC7O,MAAM,EAAEC,CAAC,EAAE,EAAE;IAC1C6O,GAAG,CAACE,YAAY,CAACC,GAAG,CAACJ,YAAY,CAAC5O,CAAC,CAAC,CAAC6B,IAAI,EAAE+M,YAAY,CAAC5O,CAAC,CAAC,CAACK,KAAK,CAAC;EACrE;EACA,OAAOwO,GAAG,CAACI,IAAI;AACnB,CAAC;AACD,IAAMC,eAAe,GAAG,SAAlBA,eAAeA,CAAIC,GAAG,EAAK;EAC7B,OAAO3N,MAAM,CAACqE,IAAI,CAACsJ,GAAG,CAAC,CAACpP,MAAM;AAClC,CAAC;AACD,IAAMiI,OAAO,GAAG,SAAVA,OAAOA,CAAIoH,MAAM,EAAsD;EAAA,IAApDC,GAAG,GAAAtI,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,OAAO;EAAA,IAAEuI,GAAG,GAAAvI,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,QAAQ;EAAA,IAAEwI,IAAI,GAAAxI,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,SAAS;EACpE,IAAI5G,CAAC,GAAG2H,IAAI,CAAC0H,GAAG,CAACJ,MAAM,CAAC;EACxBjP,CAAC,IAAI,GAAG;EACR,IAAIA,CAAC,IAAI,CAAC,IAAIA,CAAC,IAAI,EAAE,EAAE;IACnB,OAAOoP,IAAI;EACf;EACApP,CAAC,IAAI,EAAE;EACP,IAAIA,CAAC,KAAK,CAAC,EAAE;IACT,OAAOkP,GAAG;EACd;EACA,IAAIlP,CAAC,IAAI,CAAC,IAAIA,CAAC,IAAI,CAAC,EAAE;IAClB,OAAOmP,GAAG;EACd;EACA,OAAOC,IAAI;AACf,CAAC;AACD,IAAME,SAAS,GAAG,SAAZA,SAASA,CAAIvE,QAAQ,EAAK;EAC5BD,QAAQ,CAAC,UAACQ,YAAY,EAAK;IACvBiE,WAAW,CAAC,UAAC5B,CAAC,EAAK;MACf,IAAIA,CAAC,CAAC6B,OAAO,EAAE;QACXzE,QAAQ,CAAC4C,CAAC,CAAC8B,KAAK,CAAC;MACrB,CAAC,MAAM;QACH1E,QAAQ,CAAC,EAAE,CAAC;MAChB;IACJ,CAAC,KAAAzD,MAAA,CAAKoI,YAAY,cAAW,MAAM,EAAE,IAAI,EAAE;MACvCD,KAAK,EAAEnE;IACX,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC;AACD,IAAMqE,WAAW,GAAG,SAAdA,WAAWA,CAAI5E,QAAQ,EAAK;EAC9BD,QAAQ,CAAC,UAACQ,YAAY,EAAK;IACvBiE,WAAW,CAAC,UAAC5B,CAAC,EAAK;MACf5C,QAAQ,CAAC4C,CAAC,CAACiC,MAAM,CAAC;IACtB,CAAC,KAAAtI,MAAA,CAAKoI,YAAY,cAAW,MAAM,EAAE,IAAI,EAAE;MACvCD,KAAK,EAAEnE;IACX,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC;AACD,IAAMuE,aAAa,GAAG,SAAhBA,aAAaA,CAAI9E,QAAQ,EAAE+E,QAAQ,EAAmB;EAAA,IAAjBC,IAAI,GAAAnJ,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,KAAK;EACnD,IAAI,CAACmJ,IAAI,EAAE;IACPjF,QAAQ,CAAC,UAACQ,YAAY,EAAK;MACvBiE,WAAW,CACP,UAAC5B,CAAC,EAAK;QACH5C,QAAQ,CAAC4C,CAAC,CAACf,IAAI,CAAC;MACpB,CAAC,KAAAtF,MAAA,CAAKoI,YAAY,mBAAgB,MAAM,EAAE,IAAI,EAAE;QAC5CD,KAAK,EAAEnE,YAAY;QACnBwE,QAAQ,EAAEA;MACd,CAAC,CAAC;IACV,CAAC,CAAC;EACN,CAAC,MAAM;IACH/E,QAAQ,CAAC,IAAI,CAAC;EAClB;AACJ,CAAC;AACD,IAAMiF,SAAS,GAAG,SAAZA,SAASA,CAAIjF,QAAQ,EAAEkF,MAAM,EAAK;EACpCnF,QAAQ,CAAC,UAACQ,YAAY,EAAK;IACvBiE,WAAW,CAAC,UAAC5B,CAAC,EAAK;MACf5C,QAAQ,CAAC4C,CAAC,CAACuC,QAAQ,CAAC;IACxB,CAAC,KAAA5I,MAAA,CAAKoI,YAAY,4BAAApI,MAAA,CAAyB2I,MAAM,GAAI,MAAM,EAAE,IAAI,EAAE;MAC/DR,KAAK,EAAEnE;IACX,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC;AACD,IAAM6E,wBAAwB,GAAG,SAA3BA,wBAAwBA,CAAIpF,QAAQ,EAAK;EAC3CwE,WAAW,CAAC,UAAC5B,CAAC,EAAK;IACf5C,QAAQ,CAAC4C,CAAC,CAAC;EACf,CAAC,EAAE,uCAAuC,EAAE,KAAK,EAAE,IAAI,CAAC;AAC5D,CAAC;AACD,IAAMyC,eAAe,GAAG,SAAlBA,eAAeA,CAAA,EAAoB;EAAA,IAAhBC,MAAM,GAAAzJ,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAC,IAAI;EAChC,IAAM0J,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;IACvBC,UAAU,CACN,YAAM;MACF,IAAMC,EAAE,GAAGlE,QAAQ,CAACmE,cAAc,CAAC,qBAAqB,CAAC;MACzD,IAAMC,cAAc,GAAGpE,QAAQ,CAACmE,cAAc,CAAC,kBAAkB,CAAC;MAClE,IAAI;QACAD,EAAE,CAACG,UAAU,CAACC,WAAW,CAACJ,EAAE,CAAC;QAC7BE,cAAc,CAAChE,KAAK,CAACC,OAAO,GAAG,EAAE;MACrC,CAAC,CAAC,OAAOa,CAAC,EAAE,CAAC;IACjB,CAAC,EAAE,GAAG,CAAC;EACf,CAAC;EACD,IAAI6C,MAAM,EAAE;IACR,IAAMQ,QAAQ,mgBAQJ;IACV,IAAMC,CAAC,GAAGxE,QAAQ,CAACmE,cAAc,CAAC,kBAAkB,CAAC;IACrDK,CAAC,CAACC,SAAS,GAAGF,QAAQ,GAAGC,CAAC,CAACC,SAAS;IACpCT,YAAY,EAAE;IAEdhE,QAAQ,CAACmE,cAAc,CAAC,YAAY,CAAC,CAACO,gBAAgB,CAAC,QAAQ,EAAE,YAAW;MACxE,IAAMC,KAAK,GAAG3E,QAAQ,CAACmE,cAAc,CAAC,gBAAgB,CAAC;MACvD,IAAMS,MAAM,GAAG,IAAIvC,GAAG,CAACsC,KAAK,CAACzE,GAAG,CAAC;MAEjC,IAAI,IAAI,CAAC2E,OAAO,EAAE;QACdD,MAAM,CAACnL,IAAI,GAAG,OAAO;MACzB,CAAC,MAAM;QACHmL,MAAM,CAACnL,IAAI,GAAG,QAAQ;MAC1B;MACAkL,KAAK,CAACzE,GAAG,GAAG0E,MAAM,CAACpC,IAAI;IAC3B,CAAC,CAAC;EACN,CAAC,MAAM;IACH,IAAMsC,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;MACvB,IAAIC,MAAM,CAAC,uBAAuB,EAAE;QAChCC,YAAY,EAAE,EAAE;QAChBC,IAAI,EAAE,IAAI;QACVC,QAAQ,EAAE,IAAI;QACdC,cAAc,EAAE,IAAI;QACpBC,aAAa,EAAE,KAAK;QACpBC,wBAAwB,EAAE,KAAK;QAC/BC,QAAQ,EAAE;UACNC,KAAK,EAAE,IAAI,GAAG;QAClB,CAAC;QACDC,UAAU,EAAE;UACRC,EAAE,EAAE,yBAAyB;UAC7BC,SAAS,EAAE;QACf,CAAC;QACDC,UAAU,EAAE;UACRC,MAAM,EAAE,YAAY;UACpBC,MAAM,EAAE;QACZ;MACJ,CAAC,CAAC;IACN,CAAC;IACD,IAAMC,kBAAkB,GAAG,IAAI;IAC/B,IAAMC,gBAAgB,GAAG,IAAI;IAC7B,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAIC,KAAK,EAAK;MACjC,IAAMC,kBAAkB,GAAG,IAAI;MAC/B,IAAMC,MAAM,GAAGnG,QAAQ,CAACmE,cAAc,CAAC,kBAAkB,CAAC;MAC1D8B,KAAK,GAAGA,KAAK,CAACG,OAAO,EAAE;MAAC,IAAAC,KAAA,YAAAA,MAAA9S,CAAA,EACe;QACnC,IAAM+S,IAAI,GAAGL,KAAK,CAAC1S,CAAC,CAAC,CAAC+S,IAAI;QAC1B,IAAMC,QAAQ,GAAGD,IAAI,CAAC3I,KAAK,CAAC,GAAG,CAAC;QAChC,IAAM6I,QAAQ,GAAG,IAAIrM,IAAI,CAAC8L,KAAK,CAAC1S,CAAC,CAAC,CAACkT,YAAY,CAAC;QAChD,IAAI,CAACR,KAAK,CAAC1S,CAAC,CAAC,CAACmT,KAAK,EAAE;UACjBT,KAAK,CAAC1S,CAAC,CAAC,CAACmT,KAAK,GAAG,0BAA0B;QAC/C;QACAP,MAAM,CAAC1B,SAAS,GAAG0B,MAAM,CAAC1B,SAAS,iHAAAzJ,MAAA,CAE/BuL,QAAQ,CAACjT,MAAM,IAAI,CAAC,GAAG,OAAO,GAAG,MAAM,wHAAA0H,MAAA,CAEiDzH,CAAC,2FAAAyH,MAAA,CAC9BzH,CAAC,oGAAAyH,MAAA,CACQzH,CAAC,2lBAAAyH,MAAA,CAOMzH,CAAC,gGAAAyH,MAAA,CAC1CsL,IAAI,kSAAAtL,MAAA,CAGCiL,KAAK,CAAC1S,CAAC,CAAC,CAAC2C,IAAI,6eAAA8E,MAAA,CAS1CwL,QAAQ,CAACG,kBAAkB,EAAE,qCAAA3L,MAAA,CAC7BwL,QAAQ,CAACI,kBAAkB,CAAC,OAAO,EAAE;UAC/CnL,IAAI,EAAE,SAAS;UAAEoL,MAAM,EAAE;QAC7B,CAAC,CAAC,oFAGD;QACD,IAAMC,WAAW,GAAG9G,QAAQ,CAACmE,cAAc,oBAAAnJ,MAAA,CAAoBzH,CAAC,EAAG;QACnEuT,WAAW,CAAC1G,KAAK,CAAC2G,eAAe,UAAA/L,MAAA,CAAUiL,KAAK,CAAC1S,CAAC,CAAC,CAACmT,KAAK,MAAG;QAC5D,IAAIZ,kBAAkB,EAAE;UACpB,IAAMkB,aAAa,GAAGhH,QAAQ,CAACmE,cAAc,cAAAnJ,MAAA,CAAczH,CAAC,EAAG;UAC/DyT,aAAa,CAAC5G,KAAK,CAACO,KAAK,GAAG,MAAM;UAClCqG,aAAa,CAACC,SAAS,CAACC,GAAG,CAAC,YAAY,CAAC;UACzC,IAAInB,gBAAgB,EAAE;YAClBiB,aAAa,CAAC5G,KAAK,CAAC+G,QAAQ,GAAG,sBAAsB;UACzD,CAAC,MAAM;YACH,IAAMC,QAAQ,GAAGJ,aAAa,CAACK,SAAS,CAAC/T,MAAM;YAC/C,IAAMgU,UAAU,GAAGN,aAAa,CAACK,SAAS,CAAC1J,KAAK,CAAC,GAAG,CAAC;YACrD,IAAM4J,SAAS,GAAI,CAACH,QAAQ,GAAG,CAAC,CAAC,IAAI,EAAE,GAAI,GAAG;YAC9C,IAAMI,YAAY,GAAG,SAAfA,YAAYA,CACdC,MAAK,EAAEF,SAAS,EAEf;cAAA,IAFiBG,gBAAgB,GAAApN,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,GAAG;cAAA,IACxCqN,eAAe,GAAArN,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,GAAG;cAAA,IAAEsN,OAAO,GAAAtN,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,GAAG;cAEpCmN,MAAK,GAAGA,MAAK,GAAGC,gBAAgB,GAAGA,gBAAgB,IAC/CH,SAAS,GAAGI,eAAe,CAC9B,GAAGF,MAAK;cACT,OAAOG,OAAO,GAAIH,MAAK,GAAGG,OAAO,GAAGH,MAAK,GAAGG,OAAO,GAAIH,MAAK;YAChE,CAAC;YACDT,aAAa,CAAC5G,KAAK,CAAC+G,QAAQ,WAAAnM,MAAA,CACxBwM,YAAY,CAACK,UAAU,CAAC,IAAI,GAAGN,SAAS,CAAC,EAAEA,SAAS,CAAC,WAAAvM,MAAA,CAErDwM,YAAY,CAACK,UAAU,CAAC,IAAI,GAAGN,SAAS,CAAC,EAAEA,SAAS,CAAC,WAAAvM,MAAA,CAErDwM,YAAY,CAACK,UAAU,CAAC,CAAC,GAAGN,SAAS,CAAC,EAAEA,SAAS,CAAC,UAC/C;YACPP,aAAa,CAAC5G,KAAK,CAAC0H,OAAO,MAAA9M,MAAA,CACvBwM,YAAY,CAACK,UAAU,CACnB,IAAI,GAAGN,SAAS,CACnB,EAAEA,SAAS,EAAE,GAAG,EAAE,IAAI,CAAC,QACvB;YACL,IAAMQ,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAA,EAAS;cAClC,IAAI,CAAC7B,kBAAkB,EAAE;gBACrB;cACJ;cACA;cACA,IAAM8B,aAAa,gBAAAhN,MAAA,CAAgBzH,CAAC,CAAE;cACtC,IAAM0U,UAAU,GAAG,EAAE;cACrB,IAAMjB,aAAa,GAAGhH,QAAQ,CAACmE,cAAc,CAAC6D,aAAa,CAAC;cAC5D,IAAMT,SAAS,GAAGM,UAAU,CACxBxO,MAAM,CAAC6O,gBAAgB,CAAClB,aAAa,EAAE,IAAI,CAAC,CACvCmB,gBAAgB,CAAC,WAAW,CAAC,CAC7BtO,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CACzB;cACDmN,aAAa,CAAC5G,KAAK,CAACgI,SAAS,GAAG,MAAM;cACtC,IAAIb,SAAS,GAAGU,UAAU,EAAE;gBACxBjB,aAAa,CAAC5G,KAAK,CAACiI,QAAQ,GAAG,UAAU;gBACzCrB,aAAa,CAAC5G,KAAK,CAACC,OAAO,GAAG,cAAc;gBAC5C2G,aAAa,CAAC5G,KAAK,CAACkI,aAAa,GAAG,MAAM;gBAC1CtB,aAAa,CAAC5G,KAAK,CAACmI,YAAY,GAAG,MAAM;cAC7C,CAAC,MAAM;gBACHvB,aAAa,CAAC5G,KAAK,CAACiI,QAAQ,GAAG,EAAE;gBACjCrB,aAAa,CAAC5G,KAAK,CAACC,OAAO,GAAG,EAAE;gBAChC2G,aAAa,CAAC5G,KAAK,CAACkI,aAAa,GAAG,EAAE;gBACtCtB,aAAa,CAAC5G,KAAK,CAACmI,YAAY,GAAG,EAAE;cACzC;YACJ,CAAC;YACD7D,gBAAgB,CAAC,QAAQ,EAAE,UAAC8D,KAAK;cAAA,OAAKT,uBAAuB,EAAE;YAAA,EAAC;YAChE;UACJ;QACJ;;QACAnI,iBAAiB,CAACqG,KAAK,CAAC1S,CAAC,CAAC,CAACmT,KAAK,EAAE,UAAChF,UAAU,EAAK;UAC9C,IAAM+G,MAAM,aAAAzN,MAAA,CACR,CAAC,CAAE6M,UAAU,CAACnG,UAAU,CAAC,GAAG,KAAK,GAAI,KAAK,EACrCgH,OAAO,EAAE,GAAG,EAAE,EACdzT,QAAQ,CAAC,EAAE,CAAC,CACZC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAClB;UACF8K,QAAQ,CAACmE,cAAc,iBAAAnJ,MAAA,CAAiBzH,CAAC,EAAG,CAAC6M,KAAK,CAACuI,UAAU,GAAGF,MAAM;QAC1E,CAAC,CAAC;MACN,CAAC;MAhHD,KAAK,IAAIlV,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0S,KAAK,CAAC3S,MAAM,EAAEC,CAAC,EAAE;QAAA8S,KAAA,CAAA9S,CAAA;MAAA;MAiHrC,IAAI0S,KAAK,EAAE;QACPnB,YAAY,EAAE;QACdd,YAAY,EAAE;MAClB;IACJ,CAAC;IACDN,SAAS,CAAC,UAACuC,KAAK,EAAK;MACjBD,iBAAiB,CAACC,KAAK,CAAC;IAC5B,CAAC,EAAE,CAAC,CAAC;EACT;AACJ,CAAC;AACD,IAAM2C,yBAAyB,GAAG,SAA5BA,yBAAyBA,CAAA,EAAS;EACpC,IAAI,CAAChH,iBAAiB,EAAE,EAAE;IACtB5B,QAAQ,CAACmE,cAAc,CAAC,8BAA8B,CAAC,CAAC/D,KAAK,CAACyI,SAAS,GAAG,MAAM;EACpF;AACJ,CAAC;AACD,IAAMC,qBAAqB,GAAG,SAAxBA,qBAAqBA,CAAIzI,OAAO,EAAK;EACvC,IAAM0I,SAAS,GAAG/I,QAAQ,CAACgJ,aAAa,CAAC,0BAA0B,CAAC;EACpE,IAAMC,aAAa,GAAGjJ,QAAQ,CAACmE,cAAc,CAAC,0BAA0B,CAAC,CAAC/D,KAAK;EAC/E,IAAM8I,UAAU,GAAGlJ,QAAQ,CAACgJ,aAAa,CAAC,MAAM,CAAC,CAAC5I,KAAK;EACvD6I,aAAa,CAACE,OAAO,GAAG,CAAC;EACzB,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,QAAQ,EAAK;IAChCpF,UAAU,CAAC,YAAM;MACb8E,SAAS,CAAC3I,KAAK,CAACkJ,MAAM,GAAGD,QAAQ;IACrC,CAAC,EAAE,GAAG,CAAC;EACX,CAAC;EACD,IAAI,CAAC5R,gBAAgB,IAAI4I,OAAO,EAAE;IAC9B,IAAMkJ,MAAM,GAAGvJ,QAAQ,CAACmE,cAAc,CAAC,wBAAwB,CAAC;IAChEoF,MAAM,CAACC,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC;IACnC9L,MAAM,CAAC,uBAAuB,CAAC;IAE/BkL,yBAAyB,EAAE;IAE3Ba,qBAAqB,CAAC,UAAUC,UAAU,EAAE;MACxCH,MAAM,CAACI,eAAe,CAAC,UAAU,CAAC;MAClC,IAAID,UAAU,EAAE;QACZ1J,QAAQ,CAACM,IAAI,CAACF,KAAK,CAACwJ,SAAS,GAAG,QAAQ;QACxCvQ,MAAM,CAACwQ,QAAQ,CAAC;UACZC,GAAG,EAAE,CAAC;UACNC,QAAQ,EAAE;QACd,CAAC,CAAC;QACFhB,SAAS,CAAC3I,KAAK,CAACyI,SAAS,GAAG,EAAE;QAC9BO,aAAa,CAAC,EAAE,CAAC;QACjB3R,gBAAgB,GAAG,IAAI;QACvB6B,QAAQ,CAACG,IAAI,GAAG,SAAS;QACzByP,UAAU,CAACc,UAAU,GAAG,MAAM;MAClC,CAAC,MAAM;QACHC,qBAAqB,CAAC,IAAI,CAAC;MAC/B;IACJ,CAAC,CAAC;EACN,CAAC,MAAM;IACHlB,SAAS,CAAC3I,KAAK,CAACyI,SAAS,GAAG,GAAG;IAC/BE,SAAS,CAAC3I,KAAK,CAACkJ,MAAM,GAAG,IAAI;IAC7BtJ,QAAQ,CAACM,IAAI,CAACF,KAAK,CAACwJ,SAAS,GAAG,EAAE;IAClCnS,gBAAgB,GAAG,KAAK;IACxB6B,QAAQ,CAACG,IAAI,GAAG,GAAG;IACnByP,UAAU,CAACc,UAAU,GAAG,GAAG;EAC/B;AACJ,CAAC;AACD,IAAME,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAIzL,QAAQ,EAAK;EACvC,IAAM0L,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAAmB;IAAA,IAAfC,EAAE,GAAA9P,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,KAAK;IAC3B,IAAI+P,OAAO,GAAG,EAAE;IAChB,IAAID,EAAE,EAAE;MACJC,OAAO,GAAG,EAAE;IAChB,CAAC,MAAM;MACHA,OAAO,GAAG,6CAA6C;IAC3D;IACArK,QAAQ,CAACmE,cAAc,CAAC,yBAAyB,CAAC,CAACkD,SAAS,GAAGgD,OAAO;EAC1E,CAAC;EACDvP,OAAO,CAAC2C,KAAK,yBAAAzC,MAAA,CAAyB1D,YAAY,CAAChE,MAAM,EAAG;EAC5D,IAAIgE,YAAY,EAAE;IACd2L,WAAW,CAAC,UAAC5B,CAAC,EAAK;MACf4C,UAAU,CACN,YAAM;QACFrM,iBAAiB,GAAG,KAAK;MAC7B,CAAC,EAAE,GAAG,CAAC;MACX,IAAIyJ,CAAC,CAAC6B,OAAO,EAAE;QACXzE,QAAQ,CAAC4C,CAAC,CAACf,IAAI,CAAC;MACpB,CAAC,MAAM;QACHhJ,YAAY,GAAG,EAAE;MACrB;IACJ,CAAC,KAAA0D,MAAA,CAAKoI,YAAY,cAAW,MAAM,EAAE,IAAI,EAAE;MACvC9L,YAAY,EAAEA;IAClB,CAAC,CAAC;EACN,CAAC,MAAM;IACHgT,UAAU,EAAE;IACZ1S,iBAAiB,GAAG,KAAK;EAC7B;AACJ,CAAC;AACD,IAAM2S,6BAA6B,GAAG,SAAhCA,6BAA6BA,CAAA,EAAS;EACxC,IAAI,CAAC3S,iBAAiB,EAAE;IACpBA,iBAAiB,GAAG,IAAI;IACxBsS,oBAAoB,CAAC,UAAC/I,IAAI,EAAK;MAC3B,IAAIA,IAAI,CAACqJ,MAAM,EAAE;QACb,IAAI,OAAO1S,wBAAwB,KAAK,WAAW,EAAE;UACjD2S,aAAa,CAAC3S,wBAAwB,CAAC;QAC3C;QACA,IAAM4S,QAAQ,GAAG1K,QAAQ,CAACmE,cAAc,CAAC,sBAAsB,CAAC;QAChEuG,QAAQ,CAACzD,SAAS,CAACtF,MAAM,CAAC,cAAc,CAAC;QACzC+I,QAAQ,CAACjG,SAAS,yHAAAzJ,MAAA,CAA2DmG,IAAI,CAACqJ,MAAM,sLAAAxP,MAAA,CAE1FO,OAAO,CAAC4F,IAAI,CAACqJ,MAAM,CAAC,+IAErB;MACD;IACJ,CAAC,CAAC;EACN;AACJ,CAAC;AACD,IAAMG,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAA,EAAS;EAC5BJ,6BAA6B,EAAE;EAC/BzS,wBAAwB,GAAG8S,WAAW,CAACL,6BAA6B,EAAE,GAAG,CAAC;EAC1EK,WAAW,CAACL,6BAA6B,EAAE,IAAI,CAAC;AACpD,CAAC;AACD,IAAMM,cAAc,GAAG,SAAjBA,cAAcA,CAAA,EAAS;EACzB,IAAMC,aAAa,GAAG9K,QAAQ,CAACmE,cAAc,CAAC,sBAAsB,CAAC;EACrE,IAAM4G,OAAO,GAAG/K,QAAQ,CAACmE,cAAc,CAAC,mBAAmB,CAAC;EAC5D,IAAM6G,cAAc,GAAGhL,QAAQ,CAACmE,cAAc,CAAC,iBAAiB,CAAC;EACjE,IAAM8G,SAAS,GAAG,CAAC,eAAe,EAAE,eAAe,EAAE,eAAe,CAAC;EAErE5H,WAAW,CAAC,UAAClC,IAAI,EAAK;IAClB6J,cAAc,CAACrB,eAAe,CAAC,UAAU,CAAC;IAC1C,IAAIxI,IAAI,IAAIA,IAAI,CAAC7N,MAAM,EAAE;MACrByD,kBAAkB,GAAG,IAAI;MACzBmU,iBAAiB,CAACvJ,MAAM,EAAE;MAC1BR,IAAI,CAACgK,IAAI,CAAC,UAACC,CAAC,EAAE7J,CAAC,EAAK;QAChB,IAAM8J,IAAI,GAAG,IAAIlR,IAAI,CAACiR,CAAC,CAACE,UAAU,CAAC;UAC/BC,IAAI,GAAG,IAAIpR,IAAI,CAACoH,CAAC,CAAC+J,UAAU,CAAC;QACjC,IAAID,IAAI,GAAGE,IAAI,EAAE,OAAO,CAAC,CAAC;QAC1B,IAAIF,IAAI,GAAGE,IAAI,EAAE,OAAO,CAAC;QACzB,OAAO,CAAC;MACZ,CAAC,CAAC;MACF,KAAK,IAAIhY,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4N,IAAI,CAAC7N,MAAM,EAAEC,CAAC,EAAE,EAAE;QAClC,IAAI,CAAC,GAAGA,CAAC,GAAG,CAAC,EAAE;UACXuX,aAAa,CAAC7D,SAAS,CAACC,GAAG,CAAC+D,SAAS,CAAC1X,CAAC,CAAC,CAAC;QAC7C;QACA,IAAMiY,OAAO,GAAGzR,eAAe,CAAC,IAAII,IAAI,CAACgH,IAAI,CAAC5N,CAAC,CAAC,CAAC+X,UAAU,CAAC,CAAC;QAC7D,IAAMG,QAAQ,GAAG1R,eAAe,CAAC,IAAII,IAAI,CAACgH,IAAI,CAAC5N,CAAC,CAAC,CAACmY,QAAQ,CAAC,CAAC;QAC5D,IAAMC,cAAc,GAAGtR,kBAAkB,EAAE;QAC3C,IAAIuR,KAAK,GAAG,EAAE;QACd,IAAIJ,OAAO,GAAGG,cAAc,EAAE;UAC1BC,KAAK,GAAG,OAAO;QACnB,CAAC,MAAM,IAAID,cAAc,GAAGF,QAAQ,EAAE;UAClCG,KAAK,GAAG,WAAW;QACvB;QACA,IAAMC,SAAS,2IAAA7Q,MAAA,CAGGmG,IAAI,CAAC5N,CAAC,CAAC,CAACuY,KAAK,kGAAA9Q,MAAA,CACoC4Q,KAAK,+IAAA5Q,MAAA,CAEtDwQ,OAAO,CAAC7E,kBAAkB,CAAC,OAAO,CAAC,OAAA3L,MAAA,CACjC,CAAC,GAAG,GAAGwQ,OAAO,CAAC1P,QAAQ,EAAE,EAAE5G,KAAK,CAAC,CAAC,CAAC,CAAC,OAAA8F,MAAA,CAChC,CAAC,GAAG,GAAGwQ,OAAO,CAACzP,UAAU,EAAE,EAAE7G,KAAK,CAAC,CAAC,CAAC,CAAC,4HAAA8F,MAAA,CAE5CyQ,QAAQ,CAAC9E,kBAAkB,CAAC,OAAO,CAAC,OAAA3L,MAAA,CAClC,CAAC,GAAG,GAAGyQ,QAAQ,CAAC3P,QAAQ,EAAE,EAAE5G,KAAK,CAAC,CAAC,CAAC,CAAC,OAAA8F,MAAA,CACjC,CAAC,GAAG,GAAGyQ,QAAQ,CAAC1P,UAAU,EAAE,EAAE7G,KAAK,CAAC,CAAC,CAAC,CAAC,qFAAA8F,MAAA,CAE9CmG,IAAI,CAAC5N,CAAC,CAAC,CAAC+S,IAAI,uFAG5B;QACDwE,aAAa,CAACrG,SAAS,GAAGqG,aAAa,CAACrG,SAAS,GAAGoH,SAAS;MACjE;IACJ;EACJ,CAAC,CAAC;AACN,CAAC;AACD,IAAME,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAItN,QAAQ,EAAK;EACtCD,QAAQ,CAAC,UAACQ,YAAY,EAAK;IACvBiE,WAAW,CAAC,UAAC5B,CAAC,EAAK;MACf5C,QAAQ,CAAC4C,CAAC,CAAC2K,QAAQ,CAAC;IACxB,CAAC,KAAAhR,MAAA,CAAKoI,YAAY,uBAAoB,MAAM,EAAE,IAAI,EAAE;MAChDD,KAAK,EAAEnE;IACX,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC;AACD,IAAMiN,cAAc,GAAG,SAAjBA,cAAcA,CAAIxN,QAAQ,EAAEyN,QAAQ,EAAEC,QAAQ,EAAEC,SAAS,EAA8B;EAAA,IAA5BtK,KAAK,GAAAxH,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,EAAE;EAAA,IAAE+R,MAAM,GAAA/R,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,EAAE;EACpFkE,QAAQ,CAAC,UAACQ,YAAY,EAAK;IACvBiE,WAAW,CAAC,UAAC5B,CAAC,EAAK;MACf5C,QAAQ,CAAC4C,CAAC,CAACiL,OAAO,CAAC;IACvB,CAAC,KAAAtR,MAAA,CAAKoI,YAAY,6BAA0B,MAAM,EAAE,IAAI,EAAE;MACtD8I,QAAQ,EAAEA,QAAQ;MAClBC,QAAQ,EAAEA,QAAQ;MAClBrK,KAAK,EAAEA,KAAK;MACZuK,MAAM,EAAIE,uBAAuB,EAAE,KAAK,CAAC,GAAIF,MAAM,GAAG,IAAK;MAC3DlJ,KAAK,EAAEnE,YAAY;MACnBoN,SAAS,EAAEA,SAAS;MACpBI,UAAU,EAAED,uBAAuB,EAAE;MACrCE,WAAW,aAAAzR,MAAA,CAAajD,aAAa,CAAE;MACvC2U,YAAY,EAAEC,eAAe,CAAC,IAAI;IACtC,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC;AACD,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAInO,QAAQ,EAAEoO,UAAU,EAAK;EAC/C7J,SAAS,CAAC,UAAC1L,YAAY,EAAK;IACxBmH,QAAQ,CAAC,GAAAzD,MAAA,CAAGoI,YAAY,2CAAApI,MAAA,CAAwC6R,UAAU,MAAG,mBAAA7R,MAAA,CACzEuB,kBAAkB,CAACjF,YAAY,CAAC,MAAG,WAAA0D,MAAA,CAAW4C,iBAAiB,CAAC,EAAE,CAAC,CAAE,CAAC;EAC9E,CAAC,CAAC;AACN,CAAC;AACD,IAAMkP,YAAY,GAAG,SAAfA,YAAYA,CAAIrO,QAAQ,EAAE4N,MAAM,EAAK;EACvC7N,QAAQ,CAAC,UAACQ,YAAY,EAAK;IACvBiE,WAAW,CAAC,UAAC5B,CAAC,EAAK;MACf,IAAIA,CAAC,CAACgL,MAAM,IAAIhL,CAAC,CAAC6B,OAAO,EAAE;QACvBzE,QAAQ,CAAC4C,CAAC,CAACgL,MAAM,CAAC;MACtB,CAAC,MAAM;QACH5N,QAAQ,CAAC,IAAI,CAAC;MAClB;IACJ,CAAC,KAAAzD,MAAA,CAAKoI,YAAY,qBAAkB,MAAM,EAAE,IAAI,EAAE;MAC9C2J,IAAI,EAAEV,MAAM;MACZlJ,KAAK,EAAEnE,YAAY;MACnBwN,UAAU,EAAED,uBAAuB;IACvC,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC;AACD,IAAMS,SAAS,GAAG,SAAZA,SAASA,CAAI5K,GAAG,EAAK;EACvB,IAAM6K,MAAM,GAAG,IAAIC,KAAK,EAAE;EAC1B;EACAD,MAAM,CAACvI,gBAAgB,CAAC,OAAO,EAAEyI,kBAAkB,CAAC;EACpDF,MAAM,CAAC/M,GAAG,GAAGkC,GAAG;AACpB,CAAC;AACD,IAAMgL,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIC,MAAM,EAA2E;EAAA,IAAzEC,YAAY,GAAAhT,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAC,sBAAsB;EAAA,IAAEiT,aAAa,GAAAjT,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAC,KAAK;EAAA,IAAEkT,IAAI,GAAAlT,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAC,KAAK;EAClG,IAAMmT,KAAK,GAAG,SAARA,KAAKA,CAAA,EAAS;IAChB,IAAIC,eAAe,GAAG,IAAI;IAC1B,IAAIC,YAAY,GAAG,IAAI;IAEvB,IAAI,CAACJ,aAAa,EAAE;MAChB,IAAI;QACAG,eAAe,GAAG1N,QAAQ,CAACmE,cAAc,CAACmJ,YAAY,CAAC;QACvDI,eAAe,CAACtN,KAAK;MACzB,CAAC,CAAC,OAAAwN,OAAA,EAAM,CAAC;MAET9S,OAAO,CAAC2C,KAAK,kBAAAzC,MAAA,CAAkBqS,MAAM,EAAG;MACxCrN,QAAQ,CAACmE,cAAc,CAAC,qBAAqB,CAAC,CAACkD,SAAS,GAAG,EAAE;IACjE;IAEA,KAAK,IAAI9T,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,EAAE,EAAEA,CAAC,EAAE,EAAE;MACzB,IAAI,CAAC+D,YAAY,IAAIkW,IAAI,EAAE;QACvBlD,UAAU,EAAE;MAChB,CAAC,MAAM;QACH,IAAIuD,QAAQ,GAAG,EAAE;QACjB,IAAIL,IAAI,EAAE;UACNK,QAAQ,MAAA7S,MAAA,CACJoI,YAAY,oCAAApI,MAAA,CAEZqS,MAAM,oBAAArS,MAAA,CAENuB,kBAAkB,CAACjF,YAAY,CAAC,eAAA0D,MAAA,CAEhCuB,kBAAkB,CAACoQ,eAAe,CAAC,IAAI,CAAC,CAAC,CAC3C;QACN,CAAC,MAAM;UACHkB,QAAQ,sDAAA7S,MAAA,CAAsDqS,MAAM,SAAM;QAC9E;QAEA,IAAMnX,IAAI,GAAGyD,gBAAgB,CAACkU,QAAQ,CAAC;QAEvCb,SAAS,CAACa,QAAQ,CAAC;QAEnB,IAAI,CAACN,aAAa,EAAE;UAChBG,eAAe,CAAClE,YAAY,CACxB,OAAO,6BAAAxO,MAAA,CAA4B9E,IAAI,yBAAA8E,MAAA,CACnCsS,YAAY,CAACQ,QAAQ,CAAC,aAAa,CAAC,GAAG,EAAE,GAAG,EAAE,UACrD;QACL,CAAC,MAAM;UACH,OAAO5X,IAAI;QACf;QAEA;MACJ;IACJ;EACJ,CAAC;EAEDuX,KAAK,EAAE;AACX,CAAC;AACD,IAAMN,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAA,EAAS;EAC7B1D,qBAAqB,CAAC,UAAUvI,CAAC,EAAE,CACnC,CAAC,CAAC;AACN,CAAC;AACD,IAAMuI,qBAAqB,GAAG,SAAxBA,qBAAqBA,CAAIhL,QAAQ,EAAoD;EAAA,IAAlDgF,IAAI,GAAAnJ,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,KAAK;EAAA,IAAEyT,GAAG,GAAAzT,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,KAAK;EAAA,IAAE0T,UAAU,GAAA1T,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,KAAK;EAClF,IAAM3B,SAAS,GAAGgU,eAAe,CAAC,IAAI,CAAC;EACvC,IAAIhU,SAAS,EAAE;IACX,IAAID,qBAAqB,CAACC,SAAS,KAAKA,SAAS,IAAI,CAACqV,UAAU,EAAE;MAC9DvP,QAAQ,CAAC/F,qBAAqB,CAACE,QAAQ,CAACsK,OAAO,CAAC;MAChD;IACJ;IACApI,OAAO,CAAC2C,KAAK,eAAAzC,MAAA,CAAeyI,IAAI,EAAG;IACnC,IAAI,CAACA,IAAI,EAAE;MACPjF,QAAQ,CAAC,UAACQ,YAAY,EAAK;QACvBiE,WAAW,CAAC,UAAC5B,CAAC,EAAK;UACf,IAAIA,CAAC,EAAE;YACHvG,OAAO,CAAC2C,KAAK,CAAC4D,CAAC,CAAC;YAChB,IAAI,CAACA,CAAC,CAAC6B,OAAO,EAAE;cACZ;cACA;cACA+K,aAAa,EAAE;cACfxP,QAAQ,CAAC,KAAK,CAAC;YACnB,CAAC,MAAM;cACH,IAAM4O,MAAM,GAAGrN,QAAQ,CAACmE,cAAc,CAAC,sBAAsB,CAAC;cAC9D;AAC5B;AACA;AACA;cAC4BlM,qBAAqB,GAAGoJ,CAAC,CAAC6M,WAAW;cACrCpT,OAAO,CAAC2C,KAAK,CAAC4D,CAAC,CAAC;cAChB;cACA,IAAIA,CAAC,CAAC6M,WAAW,EAAE;gBACf,IAAMC,MAAM,GAAG9M,CAAC,CAAC6M,WAAW;gBAC5B,IAAME,IAAI,GAAGD,MAAM,CAACE,QAAQ;gBAC5B,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAAS;kBACtB,IACI,CAACjB,MAAM,CAACjN,KAAK,CAAC2G,eAAe,IAAIsG,MAAM,CAACjN,KAAK,CAAC2G,eAAe,CAACzT,MAAM,GAAG,CAAC,EAC1E;oBACE8Z,gBAAgB,CAACgB,IAAI,CAAC;oBACtBhB,gBAAgB,CAACgB,IAAI,EAAE,oBAAoB,CAAC;oBAC5C3V,aAAa,GAAG,IAAI;kBACxB;gBACJ,CAAC;gBAED6V,WAAW,EAAE;gBACbjB,MAAM,CAAC7D,YAAY,CAAC,gBAAgB,EAAE,SAAS,CAAC;gBAChD6D,MAAM,CAAC7D,YAAY,CAAC,mBAAmB,EAAE,QAAQ,CAAC;gBAClD6D,MAAM,CAAC7D,YAAY,CAAC,OAAO,EAAE2E,MAAM,CAAC,UAAU,CAAC,CAAC;gBAEhDvD,WAAW,CAAC,YAAY;kBACpB0D,WAAW,EAAE;gBACjB,CAAC,EAAE,GAAG,CAAC;gBAEPtX,wBAAwB,GAAG,KAAK;cACpC;cACA0B,qBAAqB,GAAG;gBACpBC,SAAS,EAAEA,SAAS;gBACpBC,QAAQ,EAAEyI;cACd,CAAC;cACD5C,QAAQ,CAACsP,GAAG,GAAG1M,CAAC,GAAGA,CAAC,CAAC6B,OAAO,CAAC;YACjC;UACJ,CAAC,MAAM;YACHzE,QAAQ,CAAC,KAAK,CAAC;UACnB;QACJ,CAAC,KAAAzD,MAAA,CAAKoI,YAAY,2BAAwB,MAAM,EAAE,IAAI,EAAE;UACpDD,KAAK,EAAEnE,YAAY;UACnB0N,YAAY,EAAE/T;QAClB,CAAC,CAAC;MACN,CAAC,CAAC;IACN,CAAC,MAAM;MACH8F,QAAQ,CAAC,IAAI,CAAC;IAClB;EACJ,CAAC,MAAM;IACHA,QAAQ,CAAC,KAAK,CAAC;EACnB;AACJ,CAAC;AACD,IAAM8P,WAAW,GAAG,SAAdA,WAAWA,CAAI9P,QAAQ,EAAK;EAC9B;EACAwE,WAAW,CACP,UAAC5B,CAAC,EAAK;IACH,IAAIA,CAAC,IAAIA,CAAC,CAAC6B,OAAO,EAAE;MAChB1K,SAAS,GAAG6I,CAAC,CAACmN,EAAE;MAChB/P,QAAQ,CAAC4C,CAAC,CAACmN,EAAE,CAAC;IAClB,CAAC,MAAM;MACH/P,QAAQ,CAAC,IAAI,CAAC;IAClB;EACJ,CAAC,KAAAzD,MAAA,CAAKoI,YAAY,UAAO,KAAK,EAAE,IAAI,CAAC;AAC7C,CAAC;AACD,IAAMqL,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAInI,IAAI,EAAK;EAClC,IAAMlN,IAAI,GAAGkN,IAAI,CAAC3I,KAAK,CAAC,IAAI,CAAC;EAC7B,IAAI+Q,IAAI,GAAG,CAAC,CAAC;EAAC,IAAAC,SAAA,GAAA9b,0BAAA,CACEuG,IAAI;IAAAwV,KAAA;EAAA;IAApB,KAAAD,SAAA,CAAAlb,CAAA,MAAAmb,KAAA,GAAAD,SAAA,CAAAjb,CAAA,IAAAC,IAAA,GAAsB;MAAA,IAAXkb,CAAC,GAAAD,KAAA,CAAAhb,KAAA;MACRkb,CAAC,GAAGD,CAAC,CAAClR,KAAK,CAAC,GAAG,CAAC;MAChB+Q,IAAI,CAACI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGA,CAAC,CAAC,CAAC,CAAC;IACrB;EAAC,SAAA3a,GAAA;IAAAwa,SAAA,CAAA9a,CAAA,CAAAM,GAAA;EAAA;IAAAwa,SAAA,CAAA5a,CAAA;EAAA;EACD+G,OAAO,CAAC2C,KAAK,CAACiR,IAAI,CAAC;EACnB,OAAOA,IAAI;AACf,CAAC;AACD,IAAMK,eAAe,GAAG,SAAlBA,eAAeA,CAAItQ,QAAQ,EAAK;EAClCwE,WAAW,CACP,UAAC5B,CAAC,EAAK;IACH,IAAIA,CAAC,EAAE;MACH5C,QAAQ,CAACgQ,mBAAmB,CAACpN,CAAC,CAAC,CAAC;IACpC,CAAC,MAAM;MACH5C,QAAQ,CAAC,IAAI,CAAC;IAClB;EACJ,CAAC,0CAA0C,KAAK,EAAE,KAAK,CAAC;AAChE,CAAC;AACD,IAAMlB,sBAAsB,GAAG,SAAzBA,sBAAsBA,CAAIkB,QAAQ,EAAK;EACzCwE,WAAW,CACP,UAAC5B,CAAC,EAAK;IACH,IACIA,CAAC,IAAIA,CAAC,CAAC2N,EAAE,IAAI3N,CAAC,CAAC4N,gBAAgB,KAAK,MAAM,IAC1C5N,CAAC,CAAC6N,MAAM,CAACC,KAAK,KAAK,OAAO,IAC1B,CAAC9N,CAAC,CAAC+N,KAAK,IAAI/N,CAAC,CAACgO,MAAM,CAAC/b,MAAM,EAC7B;MACE,IAAIgc,KAAK,GAAG,CAAC,CAAC;MACd,SAAAC,EAAA,MAAAC,YAAA,GAAcza,MAAM,CAACqE,IAAI,CAACjD,kBAAkB,CAAC,EAAAoZ,EAAA,GAAAC,YAAA,CAAAlc,MAAA,EAAAic,EAAA,IAAE;QAA1C,IAAIE,EAAC,GAAAD,YAAA,CAAAD,EAAA;QAAA,IAAAG,UAAA,GAAA7c,0BAAA,CACQwO,CAAC,CAACgO,MAAM;UAAAM,MAAA;QAAA;UAAtB,KAAAD,UAAA,CAAAjc,CAAA,MAAAkc,MAAA,GAAAD,UAAA,CAAAhc,CAAA,IAAAC,IAAA,GAAwB;YAAA,IAAfyX,CAAC,GAAAuE,MAAA,CAAA/b,KAAA;YACN,IAAIwX,CAAC,CAAChW,IAAI,CAACuI,KAAK,CAAC,GAAG,CAAC,CAACzI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAKiB,kBAAkB,CAACsZ,EAAC,CAAC,EAAE;cAC1DH,KAAK,CAACG,EAAC,CAAC,GAAGrE,CAAC,CAACwE,oBAAoB;YACrC;UACJ;QAAC,SAAAzb,GAAA;UAAAub,UAAA,CAAA7b,CAAA,CAAAM,GAAA;QAAA;UAAAub,UAAA,CAAA3b,CAAA;QAAA;MACL;MACA0K,QAAQ,CAAC6Q,KAAK,CAAC;IACnB,CAAC,MAAM;MACH7Q,QAAQ,CAAC,EAAE,CAAC;IAChB;EACJ,CAAC,kCAAAzD,MAAA,CAAkCzE,QAAQ,OAAAyE,MAAA,CAAIxE,eAAe,uBAC9D,KAAK,EAAE,IAAI,CACd;AACL,CAAC;AACD,IAAMqZ,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAA,EAAS;EAC3B,IAAMC,eAAe,GAAG,SAAlBA,eAAeA,CAAI5Z,IAAI,EAAEd,IAAI,EAAK;IAAC,8BAAA4F,MAAA,CAC1B9E,IAAI,mIAAA8E,MAAA,CAEb5F,IAAI,CAAC4M,WAAW,EAAE;EACvB,CAAC;EACF,IAAM0I,QAAQ,GAAG1K,QAAQ,CAACmE,cAAc,CAAC,uBAAuB,CAAC;EAEjE5G,sBAAsB,CAAC,UAAUwS,OAAO,EAAE;IACtC,IAAM3W,IAAI,GAAGrE,MAAM,CAACqE,IAAI,CAAC2W,OAAO,CAAC;IACjC,SAAAC,GAAA,MAAAC,KAAA,GAAc7W,IAAI,EAAA4W,GAAA,GAAAC,KAAA,CAAA3c,MAAA,EAAA0c,GAAA,IAAE;MAAf,IAAInB,CAAC,GAAAoB,KAAA,CAAAD,GAAA;MACNtF,QAAQ,CAACjG,SAAS,GAAGiG,QAAQ,CAACjG,SAAS,GAAGqL,eAAe,CAACC,OAAO,CAAClB,CAAC,CAAC,EAAEA,CAAC,CAAC;IAC5E;EACJ,CAAC,CAAC;AACN,CAAC;AACD,IAAMqB,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAIzR,QAAQ,EAAK;EACtC,IAAM9F,SAAS,GAAGgU,eAAe,CAAC,IAAI,CAAC;EACvC,IAAIhU,SAAS,EAAE;IACX6F,QAAQ,CAAC,UAACQ,YAAY,EAAK;MACvBiE,WAAW,CACP,UAAC5B,CAAC,EAAK;QACH,IAAIA,CAAC,EAAE;UACH5C,QAAQ,CAAC4C,CAAC,CAAC6B,OAAO,CAAC;QACvB,CAAC,MAAM;UACHzE,QAAQ,CAAC,KAAK,CAAC;QACnB;MACJ,CAAC,KAAAzD,MAAA,CAAKoI,YAAY,sBAAmB,MAAM,EAAE,IAAI,EAAE;QAC/CD,KAAK,EAAEnE,YAAY;QACnB0N,YAAY,EAAE/T;MAClB,CAAC,CAAC;IACV,CAAC,CAAC;EACN;AACJ,CAAC;AACD,IAAMwX,YAAY,GAAG,SAAfA,YAAYA,CAAI1R,QAAQ,EAAE6H,IAAI,EAAK;EACrC,IAAM3N,SAAS,GAAGgU,eAAe,CAAC,IAAI,CAAC;EACvC,IAAIhU,SAAS,EAAE;IACX6F,QAAQ,CAAC,UAACQ,YAAY,EAAK;MACvBiE,WAAW,CACP,UAAC5B,CAAC,EAAK;QACH,IAAIA,CAAC,EAAE;UACH5C,QAAQ,CAAC4C,CAAC,CAAC6B,OAAO,CAAC;QACvB,CAAC,MAAM;UACHzE,QAAQ,CAAC,KAAK,CAAC;QACnB;MACJ,CAAC,KAAAzD,MAAA,CAAKoI,YAAY,qBAAkB,MAAM,EAAE,IAAI,EAAE;QAC9CkD,IAAI,EAAEA,IAAI;QACVnD,KAAK,EAAEnE,YAAY;QACnB0N,YAAY,EAAE/T;MAClB,CAAC,CAAC;IACV,CAAC,CAAC;EACN;AACJ,CAAC;AACD,IAAMyX,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAA,EAAS;EAC7B,IAAM7G,MAAM,GAAGvJ,QAAQ,CAACmE,cAAc,CAAC,sBAAsB,CAAC;EAC9D,IAAMkM,QAAQ,GAAGrQ,QAAQ,CAACmE,cAAc,CAAC,eAAe,CAAC;EACzD,IAAMmC,IAAI,GAAG+J,QAAQ,CAACzc,KAAK;EAC3B,IAAI0S,IAAI,CAAChT,MAAM,GAAG,EAAE,EAAE;IAClBoK,MAAM,CAAC,2BAA2B,CAAC;IACnC;EACJ;EACA,IAAM4S,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAAoB;IAAA,IAAhBC,IAAI,GAAAjW,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,IAAI;IAC5B,IAAIiW,IAAI,EAAE;MACNhH,MAAM,CAACC,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC;IACvC,CAAC,MAAM;MACHD,MAAM,CAACI,eAAe,CAAC,UAAU,CAAC;IACtC;IACAJ,MAAM,CAAClC,SAAS,GAAGkJ,IAAI,GAAG,aAAa,GAAG,WAAW;EACzD,CAAC;EACDD,WAAW,EAAE;EACbJ,mBAAmB,CAAC,UAACM,UAAU,EAAK;IAChC,IAAIA,UAAU,EAAE;MACZL,YAAY,CACR,UAACM,SAAS,EAAK;QACX,IAAIA,SAAS,EAAE;UACX/S,MAAM,CAAC,+BAA+B,CAAC;QAC3C,CAAC,MAAM;UACHA,MAAM,CAAC,8CAA8C,CAAC;QAC1D;QACA4S,WAAW,CAAC,KAAK,CAAC;MACtB,CAAC,EAAEhK,IAAI,CAAC;IAChB,CAAC,MAAM;MACHgK,WAAW,CAAC,KAAK,CAAC;MAClB5S,MAAM,CAAC,+CAA+C,CAAC;IAC3D;EACJ,CAAC,CAAC;AACN,CAAC;AACD,IAAMgT,YAAY,GAAG,SAAfA,YAAYA,CAAIjS,QAAQ,EAAEoO,UAAU,EAAK;EAC3CrO,QAAQ,CAAC,UAACQ,YAAY,EAAK;IACvBiE,WAAW,CAAC,UAAC5B,CAAC,EAAK;MACf5C,QAAQ,CAAC4C,CAAC,CAACiL,OAAO,CAAC;IACvB,CAAC,KAAAtR,MAAA,CAAKoI,YAAY,0BAAuB,MAAM,EAAE,IAAI,EAAE;MACnDyJ,UAAU,EAAE3O,QAAQ,CAAC2O,UAAU,CAAC;MAChC1J,KAAK,EAAEnE,YAAY;MACnB2R,WAAW,EAAEja;IACjB,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC;AACD,IAAMka,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAInS,QAAQ,EAAK;EACpCD,QAAQ,CAAC,UAACQ,YAAY,EAAK;IACvBiE,WAAW,CAAC,UAAC5B,CAAC,EAAK;MACf,IAAI;QACA5C,QAAQ,CAAC4C,CAAC,CAACiL,OAAO,CAAC;MACvB,CAAC,CAAC,OAAOpL,CAAC,EAAE;QACRzC,QAAQ,CAAC,IAAI,CAAC;QACd;MACJ;IACJ,CAAC,KAAAzD,MAAA,CAAKoI,YAAY,8BAA2B,MAAM,EAAE,IAAI,EAAE;MACvDD,KAAK,EAAEnE;IACX,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC;AACD,IAAM6R,eAAe,GAAG,SAAlBA,eAAeA,CAAIpS,QAAQ,EAAEqS,OAAO,EAAoB;EAAA,IAAlBC,OAAO,GAAAzW,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAC,KAAK;EACrD,IAAI,CAACyW,OAAO,EAAE;IACVtS,QAAQ,CAAC,IAAI,CAAC;IACd;EACJ;EACAD,QAAQ,CAAC,UAACQ,YAAY,EAAK;IACvBiE,WAAW,CAAC,UAAC5B,CAAC,EAAK;MACf5C,QAAQ,CAAC4C,CAAC,CAAC2P,KAAK,CAAC;IACrB,CAAC,KAAAhW,MAAA,CACMoI,YAAY,yBACf,MAAM,EAAE,IAAI,EAAE;MACdD,KAAK,EAAEnE,YAAY;MACnB8R,OAAO,EAAEA;IACb,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC;AACD,IAAMG,cAAc,GAAG,SAAjBA,cAAcA,CAAA,EAAS;EACzBlF,mBAAmB,CAAC,UAACC,QAAQ,EAAK;IAC9BpV,qBAAqB,GAAGoV,QAAQ;IAChC,IAAMkF,YAAY,GAAG,CAAC,eAAe,EAAE,eAAe,EAAE,eAAe,CAAC;IACxE,IAAMhN,EAAE,GAAGlE,QAAQ,CAACmE,cAAc,CAAC,mBAAmB,CAAC;IACvD,IAAMgN,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAI/b,IAAI,EAAEgc,IAAI,EAAK;MACrChc,IAAI,GAAGA,IAAI,CAAC4M,WAAW,EAAE;MACzBoP,IAAI,GAAGA,IAAI,CAACpP,WAAW,EAAE;MACzB;AACZ;AACA;AACA;AACA;MACY,IAAI5M,IAAI,CAAC0Y,QAAQ,CAAC,OAAO,CAAC,IAAIsD,IAAI,KAAK,UAAU,EAAE;QAC/C,OAAO,CAAC;MACZ,CAAC,MAAM,IAAIhc,IAAI,CAAC0Y,QAAQ,CAAC,MAAM,CAAC,IAAIsD,IAAI,KAAK,UAAU,EAAE;QACrD,OAAO,CAAC;MACZ,CAAC,MAAM,IAAIhc,IAAI,CAAC0Y,QAAQ,CAAC,UAAU,CAAC,IAAIsD,IAAI,KAAK,OAAO,EAAE;QACtD,OAAO,CAAC;MACZ;IACJ,CAAC;IACD,IAAI,CAACpF,QAAQ,CAAC1Y,MAAM,EAAE;MAClB4Q,EAAE,CAACO,SAAS,GAAG,sEAAsE;IACzF,CAAC,MAAM;MACH4M,0BAA0B,EAAE;MAC5B,KAAK,IAAI9d,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGyY,QAAQ,CAAC1Y,MAAM,EAAEC,CAAC,EAAE,EAAE;QACtC,IAAM+d,UAAU,GAAG;UACflc,IAAI,EAAE4W,QAAQ,CAACzY,CAAC,CAAC,CAAC6B,IAAI;UACtBmc,KAAK,EAAEvF,QAAQ,CAACzY,CAAC,CAAC,CAACge,KAAK;UACxBC,KAAK,EAAExF,QAAQ,CAACzY,CAAC,CAAC,CAACoP,MAAM;UACzB8O,WAAW,EAAEzF,QAAQ,CAACzY,CAAC,CAAC,CAACke,WAAW;UACpCL,IAAI,EAAEpF,QAAQ,CAACzY,CAAC,CAAC,CAAC6d,IAAI;UACtBM,UAAU,EAAE1F,QAAQ,CAACzY,CAAC,CAAC,CAACyb,EAAE;UAC1B5C,SAAS,EAAEJ,QAAQ,CAACzY,CAAC,CAAC,CAAC6Y;QAC3B,CAAC;QACDpU,oBAAoB,CAAC2Z,IAAI,CAAC3F,QAAQ,CAACzY,CAAC,CAAC,CAAC;QACtC,IAAIqe,KAAK,GAAG,EAAE;QACd;QACA,IAAIC,YAAY,GAAG,KAAK;QACxB,IAAIC,aAAa,wEAAA9W,MAAA,CAEPgR,QAAQ,CAACzY,CAAC,CAAC,CAACge,KAAK,iCAAAvW,MAAA,CACjBO,OAAO,CAACyQ,QAAQ,CAACzY,CAAC,CAAC,CAACge,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,CAAC,6DAAAvW,MAAA,CAEtDgR,QAAQ,CAACzY,CAAC,CAAC,CAACoP,MAAM,iCAAA3H,MAAA,CAClBO,OAAO,CAACyQ,QAAQ,CAACzY,CAAC,CAAC,CAACoP,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,QAAQ,CAAC,8EAAA3H,MAAA,CAEzCgR,QAAQ,CAACzY,CAAC,CAAC,CAACke,WAAW,2BAClD;QACD,IAAIM,kBAAkB,GAAG,EAAE;QAC3B,IAAIxe,CAAC,IAAI2d,YAAY,CAAC5d,MAAM,IAAIC,CAAC,EAAE;UAC/B2Q,EAAE,CAAC+C,SAAS,CAACC,GAAG,CAACgK,YAAY,CAAC3d,CAAC,GAAG,CAAC,CAAC,CAAC;QACzC;QACA,IAAIye,cAAc,qCAAAhX,MAAA,CAAoCiX,IAAI,CAACC,SAAS,CAACZ,UAAU,CAAC,QAAI;QACpF,IAAI,CAAC5a,eAAe,EAAE;UAClBkb,KAAK,GAAG5F,QAAQ,CAACzY,CAAC,CAAC,CAAC6B,IAAI;QAC5B,CAAC,MAAM;UACH,IAAI+c,YAAY,GAAG,YAAY;UAC/B,IAAIC,iBAAiB,GAAG,qBAAqB;UAC7C,IAAIpG,QAAQ,CAACzY,CAAC,CAAC,CAACke,WAAW,EAAE;YACzBW,iBAAiB,GAAGpG,QAAQ,CAACzY,CAAC,CAAC,CAACke,WAAW;UAC/C;UACA,IAAIzF,QAAQ,CAACzY,CAAC,CAAC,CAAC6B,IAAI,CAAC4M,WAAW,EAAE,CAAC8L,QAAQ,CAAC,OAAO,CAAC,EAAE;YAClD8D,KAAK,MAAA5W,MAAA,CAAMgR,QAAQ,CAACzY,CAAC,CAAC,CAACge,KAAK,OAAAvW,MAAA,CACxBO,OAAO,CAACyQ,QAAQ,CAACzY,CAAC,CAAC,CAACge,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,CAAC,sCAAAvW,MAAA,CACzBgR,QAAQ,CAACzY,CAAC,CAAC,CAACoP,MAAM,OAAA3H,MAAA,CAC/CO,OAAO,CAACyQ,QAAQ,CAACzY,CAAC,CAAC,CAACoP,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,CAAC,YACpD;YACTkP,YAAY,GAAG,KAAK;YACpBC,aAAa,4gBAGR;YACLE,cAAc,GAAG,EAAE;UACvB,CAAC,MAAM,IAAIhG,QAAQ,CAACzY,CAAC,CAAC,CAAC6B,IAAI,CAAC4M,WAAW,EAAE,CAAC8L,QAAQ,CAAC,MAAM,CAAC,EAAE;YACxD8D,KAAK,MAAA5W,MAAA,CAAMgR,QAAQ,CAACzY,CAAC,CAAC,CAACge,KAAK,OAAAvW,MAAA,CACxBO,OAAO,CAACyQ,QAAQ,CAACzY,CAAC,CAAC,CAACge,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,CAAC,sCAAAvW,MAAA,CACzBgR,QAAQ,CAACzY,CAAC,CAAC,CAACoP,MAAM,OAAA3H,MAAA,CAC/CO,OAAO,CAACyQ,QAAQ,CAACzY,CAAC,CAAC,CAACoP,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC,YACjD;YACTkP,YAAY,GAAG,KAAK;YACpBC,aAAa,sGAAA9W,MAAA,CAEPoX,iBAAiB,mCAClB;YACLJ,cAAc,GAAG,EAAE;UACvB,CAAC,MAAM,IAAIhG,QAAQ,CAACzY,CAAC,CAAC,CAAC6d,IAAI,GAAG,OAAO,EAAE;YACnCQ,KAAK,6DAAA5W,MAAA,CACwBgR,QAAQ,CAACzY,CAAC,CAAC,CAAC6B,IAAI,wCAAA4F,MAAA,CAC3CgR,QAAQ,CAACzY,CAAC,CAAC,CAACge,KAAK,OAAAvW,MAAA,CACfO,OAAO,CAACyQ,QAAQ,CAACzY,CAAC,CAAC,CAACge,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,CAAC,CACxD;YACFM,YAAY,GAAG,KAAK;YACpBC,aAAa,sGAAA9W,MAAA,CAEPoX,iBAAiB,mCAClB;YACLJ,cAAc,GAAG,EAAE;UACvB;UACAD,kBAAkB,mOAAA/W,MAAA,CAGJmW,gBAAgB,CAACG,UAAU,CAAClc,IAAI,EAAEkc,UAAU,CAACF,IAAI,CAAC,QAAApW,MAAA,CAAKsW,UAAU,CAACI,UAAU,sEAAA1W,MAAA,CAEhFmX,YAAY,wCACR;QAClB;QACAnG,QAAQ,CAACzY,CAAC,CAAC,CAAC8e,KAAK,GAAG1Y,gBAAgB,CAACqS,QAAQ,CAACzY,CAAC,CAAC,CAAC8e,KAAK,CAAC;QACvDnO,EAAE,CAACO,SAAS,GAAGP,EAAE,CAACO,SAAS,gEAAAzJ,MAAA,CACYgR,QAAQ,CAACzY,CAAC,CAAC,CAACyb,EAAE,+EAAAhU,MAAA,CACDgX,cAAc,wOAAAhX,MAAA,CAG1BgR,QAAQ,CAACzY,CAAC,CAAC,CAACyb,EAAE,yQAAAhU,MAAA,CAIHgR,QAAQ,CAACzY,CAAC,CAAC,CAAC8e,KAAK,mOAAArX,MAAA,CAIjBgR,QAAQ,CAACzY,CAAC,CAAC,CAAC8e,KAAK,ghBAAArX,MAAA,CAStB6W,YAAY,qFAAA7W,MAAA,CACA4W,KAAK,6CAAA5W,MAAA,CAC7C8W,aAAa,wCAAA9W,MAAA,CACb+W,kBAAkB,qHAInC;MACL;MACAO,qBAAqB,EAAE;MACvBrO,UAAU,CACN,YAAM;QACF,IAAMsO,IAAI,GAAGvS,QAAQ,CAACmE,cAAc,CAAC,mBAAmB,CAAC;QACzD,IAAMqO,GAAG,GAAG,CACR,mBAAmB,EAAE,yBAAyB,EAC9C,sBAAsB,EAAE,uBAAuB,CAClD;QACD,IAAI;UACAD,IAAI,CAAClO,UAAU,CAACC,WAAW,CAACiO,IAAI,CAAC;QACrC,CAAC,CAAC,OAAOrR,CAAC,EAAE,CACZ;QACA,KAAK,IAAIuR,GAAC,GAAG,CAAC,EAAEA,GAAC,GAAGD,GAAG,CAAClf,MAAM,EAAEmf,GAAC,EAAE,EAAE;UACjC,IAAI;YACAzS,QAAQ,CAACmE,cAAc,CAACqO,GAAG,CAACC,GAAC,CAAC,CAAC,CAACrS,KAAK,CAACC,OAAO,GAAG,EAAE;UACtD,CAAC,CAAC,OAAOxM,CAAC,EAAE;YACRiH,OAAO,CAAC4X,GAAG,wCAAA1X,MAAA,CAAwCnH,CAAC,EAAG;UAC3D;QACJ;MACJ,CAAC,EAAE,GAAG,CAAC;IACf;EACJ,CAAC,CAAC;AACN,CAAC;AACD,IAAM8e,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAIC,WAAW,EAAK;EACvC,IAAMC,SAAS,GAAG7S,QAAQ,CAACmE,cAAc,CAAC,kBAAkB,CAAC;EAC7D,IAAM2O,WAAW,GAAG9S,QAAQ,CAACmE,cAAc,CAAC,oBAAoB,CAAC;EACjE,IAAM4O,WAAW,GAAG/S,QAAQ,CAACmE,cAAc,CAAC,eAAe,CAAC;EAC5D,IAAM6O,aAAa,GAAGhT,QAAQ,CAACmE,cAAc,CAAC,iBAAiB,CAAC;EAChE,IAAIyO,WAAW,KAAKpb,iBAAiB,EAAE;IACnC,IAAIob,WAAW,KAAK,QAAQ,EAAE;MAC1B,IAAI7b,kBAAkB,EAAE;QACpB8b,SAAS,CAACzS,KAAK,CAACC,OAAO,GAAG,MAAM;QAChCyS,WAAW,CAAC1S,KAAK,CAACC,OAAO,GAAG,OAAO;QACnC0S,WAAW,CAACpJ,eAAe,CAAC,UAAU,CAAC;QACvCqJ,aAAa,CAACxJ,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC;QAC1CsJ,WAAW,CAAC1S,KAAK,CAAC0J,GAAG,GAAG,GAAG;QAC3B+I,SAAS,CAACzS,KAAK,CAAC0J,GAAG,GAAG,OAAO;QAC7BtS,iBAAiB,GAAG,QAAQ;MAChC,CAAC,MAAM;QACHkG,MAAM,CAAC,uBAAuB,CAAC;MACnC;IACJ,CAAC,MAAM,IAAIkV,WAAW,KAAK,MAAM,EAAE;MAC/BC,SAAS,CAACzS,KAAK,CAACC,OAAO,GAAG,OAAO;MACjCyS,WAAW,CAAC1S,KAAK,CAACC,OAAO,GAAG,MAAM;MAClC0S,WAAW,CAACvJ,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC;MACxCwJ,aAAa,CAACrJ,eAAe,CAAC,UAAU,CAAC;MACzCmJ,WAAW,CAAC1S,KAAK,CAAC0J,GAAG,GAAG,OAAO;MAC/B+I,SAAS,CAACzS,KAAK,CAAC0J,GAAG,GAAG,GAAG;MACzBtS,iBAAiB,GAAG,MAAM;IAC9B;EACJ;AACJ,CAAC;AACD,IAAMyb,SAAS,GAAG,SAAZA,SAASA,CAAI7Q,GAAG,EAAK;EACvB,OAAO/I,MAAM,CAACC,QAAQ,CAACO,OAAO,CAACuI,GAAG,CAAC;AACvC,CAAC;AACD,IAAM8Q,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAA6D;EAAA,IAAzDzP,IAAI,GAAAnJ,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,KAAK;EAAA,IAAE6Y,WAAW,GAAA7Y,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,KAAK;EAAA,IAAE8Y,UAAU,GAAA9Y,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,IAAI;EACvE,IAAM+Y,WAAW,GAAG,SAAdA,WAAWA,CAAI5N,EAAE,EAAEjC,QAAQ,EAAE8P,MAAM,EAAK;IAC1C7N,EAAE,CAAChB,SAAS,gEAAAzJ,MAAA,CACqCwI,QAAQ,qHAAAxI,MAAA,CACQwI,QAAQ,iDAAAxI,MAAA,CAE7DsY,MAAM,CAAChO,QAAQ,IAAI,IAAI,GAAG,UAAU,GAAG,EAAE,mJAGpD;EACL,CAAC;EACD,IAAMiO,QAAQ,GAAG,SAAXA,QAAQA,CAAI9N,EAAE,EAAEjC,QAAQ,EAAEpB,GAAG,EAAEkR,MAAM,EAAK;IAC5C7N,EAAE,CAAChB,SAAS,mFAAAzJ,MAAA,CACoDwI,QAAQ,8DAAAxI,MAAA,CAC5BwI,QAAQ,kCAAAxI,MAAA,CAExCsY,MAAM,CAAChO,QAAQ,IAAI,IAAI,GAAG,aAAa,GAAG,EAAE,OAAAtK,MAAA,CAE5CsY,MAAM,CAACE,KAAK,IAAI,IAAI,GAAG,UAAU,GAAG,EAAE,OAAAxY,MAAA,CAEtCsY,MAAM,CAACrO,IAAI,IAAI,IAAI,GAAG,SAAS,GAAG,EAAE,OAAAjK,MAAA,CAEpCsY,MAAM,CAACG,QAAQ,IAAI,IAAI,GAAG,aAAa,GAAG,EAAE,qEAAAzY,MAAA,CAEjCoH,GAAG,2DAEzB;EACL,CAAC;EACD,IAAMsR,SAAS,GAAG,SAAZA,SAASA,CAAIjO,EAAE,EAAEjC,QAAQ,EAAE8P,MAAM,EAAK;IACxC,IAAIF,UAAU,EAAE;MACZG,QAAQ,CAAC9N,EAAE,EAAEjC,QAAQ,kCAAAxI,MAAA,CAAkCwI,QAAQ,WAAQ8P,MAAM,CAAC;IAClF,CAAC,MAAM;MACH,IAAIH,WAAW,EAAE;QACbE,WAAW,CAAC5N,EAAE,EAAEjC,QAAQ,EAAE8P,MAAM,CAAC;MACrC,CAAC,MAAM;QACH,IAAMK,KAAK,GAAGpQ,aAAa,CACvB,UAACpC,IAAI,EAAK;UACN,IAAIA,IAAI,IAAIA,IAAI,CAACwS,KAAK,CAACC,IAAI,CAACxR,GAAG,IAAI,CAACqB,IAAI,EAAE;YACtC8P,QAAQ,CAAC9N,EAAE,EAAE6N,MAAM,EAAEnS,IAAI,CAACwS,KAAK,CAACC,IAAI,CAACxR,GAAG,CAAC;UAC7C,CAAC,MAAM;YACHiR,WAAW,CAAC5N,EAAE,EAAEjC,QAAQ,EAAE8P,MAAM,CAAC;UACrC;QACJ,CAAC,EAAE9P,QAAQ,EAAEC,IAAI,CAAC;MAC1B;IACJ;EACJ,CAAC;EACD,SAAAoQ,GAAA,MAAAC,WAAA,GAAe3gB,KAAK,CAACkC,IAAI,CAAC2K,QAAQ,CAAC+T,sBAAsB,CAAC,eAAe,CAAC,CAAC,EAAAF,GAAA,GAAAC,WAAA,CAAAxgB,MAAA,EAAAugB,GAAA,IAAE;IAAxE,IAAIpO,EAAE,GAAAqO,WAAA,CAAAD,GAAA;IACP,IAAMrQ,QAAQ,GAAGiC,EAAE,CAACuO,YAAY,CAAC,UAAU,CAAC;IAC5C,IAAIxQ,QAAQ,IAAIA,QAAQ,CAAClQ,MAAM,IAAIkQ,QAAQ,CAAClQ,MAAM,GAAG,EAAE,EAAE;MACrDogB,SAAS,CAACjO,EAAE,EAAEjC,QAAQ,EAAE;QACpB8B,QAAQ,EAAEG,EAAE,CAACuO,YAAY,CAAC,UAAU,CAAC;QACrCR,KAAK,EAAE/N,EAAE,CAACuO,YAAY,CAAC,OAAO,CAAC;QAC/B/O,IAAI,EAAEQ,EAAE,CAACuO,YAAY,CAAC,MAAM,CAAC;QAC7BP,QAAQ,EAAEhO,EAAE,CAACuO,YAAY,CAAC,UAAU;MACxC,CAAC,CAAC;MACF,IAAIvO,EAAE,CAACuO,YAAY,CAAC,YAAY,CAAC,EAAE;QAC/BhU,QAAQ,CAACmE,cAAc,YAAAnJ,MAAA,CAAYwI,QAAQ,EAAG,CAACpD,KAAK,CAAC6T,YAAY,GAAG,GAAG;MAC3E;IACJ;EACJ;AACJ,CAAC;AACD,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;EACvB,IAAMC,OAAO,GAAG,SAAVA,OAAOA,CAAA,EAAS;IAClB,IAAI,CAACzc,eAAe,EAAE;MAClB0c,YAAY,EAAE;IAClB;EACJ,CAAC;EACDxJ,WAAW,CAACuJ,OAAO,EAAE,GAAG,CAAC;AAC7B,CAAC;AACD,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;EACvB,IAAI1c,eAAe,EAAE;IACjBsI,QAAQ,CAACM,IAAI,CAAC2G,SAAS,CAACtF,MAAM,CAAC,YAAY,CAAC;IAC5C3B,QAAQ,CAACmE,cAAc,CAAC,uBAAuB,CAAC,CAAC/D,KAAK,CAACC,OAAO,GAAG,EAAE;IACnEL,QAAQ,CAACqU,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAACjU,KAAK,CAACwJ,SAAS,GAAG,EAAE;IAC7D,IAAM0K,IAAI,GAAGtU,QAAQ,CAACgJ,aAAa,CAAC,gBAAgB,CAAC;IACrDsL,IAAI,CAACrN,SAAS,CAACtF,MAAM,CAAC,gBAAgB,CAAC;IACvC2S,IAAI,CAAClU,KAAK,CAACmU,SAAS,GAAG,KAAK;IAC5B,IAAMC,KAAK,GAAGxU,QAAQ,CAACmE,cAAc,CAAC,mBAAmB,CAAC;IAC1DqQ,KAAK,CAACpU,KAAK,CAAC+I,OAAO,GAAG,CAAC;IACvBlF,UAAU,CAAC,YAAM;MACbuQ,KAAK,CAACpU,KAAK,CAACC,OAAO,GAAG,MAAM;IAChC,CAAC,EAAE,GAAG,CAAC;IACP3I,eAAe,GAAG,KAAK;EAC3B;AACJ,CAAC;AACD,IAAM+c,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAA6B;EAAA,IAAzBC,YAAY,GAAApa,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,KAAK;EACrC5C,eAAe,GAAG,IAAI;EACtBsI,QAAQ,CAACM,IAAI,CAAC2G,SAAS,CAACC,GAAG,CAAC,YAAY,CAAC;EACzClH,QAAQ,CAACmE,cAAc,CAAC,uBAAuB,CAAC,CAAC/D,KAAK,CAACC,OAAO,GAAG,MAAM;EACvEL,QAAQ,CAACqU,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAACjU,KAAK,CAACwJ,SAAS,GAAG,QAAQ;EACnE,IAAI;IACA5J,QAAQ,CAACmE,cAAc,CAAC,2BAA2B,CAAC,CAACxC,MAAM,EAAE;EACjE,CAAC,CAAC,OAAOT,CAAC,EAAE,CACZ;EACA,IAAMsT,KAAK,GAAGxU,QAAQ,CAACmE,cAAc,CAAC,mBAAmB,CAAC;EAC1DqQ,KAAK,CAACpU,KAAK,CAACC,OAAO,GAAG,OAAO;EAC7B4D,UAAU,CAAC,YAAM;IACbuQ,KAAK,CAACpU,KAAK,CAAC+I,OAAO,GAAG,CAAC;IACvBnJ,QAAQ,CAACgJ,aAAa,CAAC,gBAAgB,CAAC,CAAC5I,KAAK,CAACmU,SAAS,GAAG,CAAC;EAChE,CAAC,EAAE,EAAE,CAAC;EACN,IAAI,CAACG,YAAY,EAAE;IACfrb,MAAM,CAACsb,OAAO,GAAG,UAACnM,KAAK,EAAK;MACxB,IAAIA,KAAK,CAACoM,MAAM,KAAKJ,KAAK,EAAE;QACxBJ,YAAY,EAAE;MAClB;IACJ,CAAC;EACL;AACJ,CAAC;AACD,IAAMS,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAA,EAA2C;EAAA,IAAvCC,IAAI,GAAAxa,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,SAAS;EAAA,IAAEya,WAAW,GAAAza,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,CAAC,CAAC;EAC/D,IAAM0a,IAAI,GAAGhV,QAAQ,CAAC+T,sBAAsB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;EAC1D,IAAMkB,IAAI,GAAGjV,QAAQ,CAACmE,cAAc,CAAC,wBAAwB,CAAC;EAC9D,IAAM+Q,OAAO,GAAGlV,QAAQ,CAACmE,cAAc,CAAC,0BAA0B,CAAC;EACnE,IAAMgR,aAAa,GAAGnV,QAAQ,CAACmE,cAAc,CAAC,iCAAiC,CAAC;EAChF,IAAMjB,OAAO,GAAGlD,QAAQ,CAACmE,cAAc,CAAC,gCAAgC,CAAC;EACzE,IAAMiR,aAAa,GAAGpV,QAAQ,CAACmE,cAAc,CAAC,iCAAiC,CAAC;EAChF,IAAM2H,KAAK,GAAG9L,QAAQ,CAACgJ,aAAa,CAAC,cAAc,CAAC;EACpD,IAAMqM,MAAM,GAAG,CAAC;IACZjgB,IAAI,EAAE,SAAS;IACfsV,QAAQ,EAAEwK,OAAO;IACjBpJ,KAAK,EAAE;EACX,CAAC,EACG;IACI1W,IAAI,EAAE,eAAe;IACrBsV,QAAQ,EAAEyK,aAAa;IACvBrJ,KAAK,EAAE;EACX,CAAC,EACD;IACI1W,IAAI,EAAE,MAAM;IACZsV,QAAQ,EAAEuK,IAAI;IACdnJ,KAAK,EAAE;EACX,CAAC,EACD;IACI1W,IAAI,EAAE,SAAS;IACfsV,QAAQ,EAAExH,OAAO;IACjB4I,KAAK,EAAE;EACX,CAAC,EACD;IACI1W,IAAI,EAAE,eAAe;IACrBsV,QAAQ,EAAE0K,aAAa;IACvBtJ,KAAK,EAAE;EACX,CAAC,CACJ;EACD,KAAK,IAAIvY,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8hB,MAAM,CAAC/hB,MAAM,EAAEC,CAAC,EAAE,EAAE;IACpC,IAAI+hB,KAAK,GAAG,MAAM;IAClB,IAAIR,IAAI,KAAKO,MAAM,CAAC9hB,CAAC,CAAC,CAAC6B,IAAI,EAAE;MACzBkgB,KAAK,GAAG,OAAO;MACfxJ,KAAK,CAACzE,SAAS,GAAGgO,MAAM,CAAC9hB,CAAC,CAAC,CAACuY,KAAK;IACrC;IACAuJ,MAAM,CAAC9hB,CAAC,CAAC,CAACmX,QAAQ,CAACtK,KAAK,CAACC,OAAO,GAAGiV,KAAK;EAC5C;EACA,IAAIR,IAAI,KAAK,MAAM,EAAE;IACjBhJ,KAAK,CAACzE,SAAS,GAAG0N,WAAW,CAACjJ,KAAK;IACnC,IAAIiJ,WAAW,CAACQ,OAAO,CAACjiB,MAAM,EAAE;MAC5B0M,QAAQ,CAACmE,cAAc,CAAC,oBAAoB,CAAC,CAACM,SAAS,GAAGsQ,WAAW,CAACQ,OAAO;IACjF;EACJ;EACAP,IAAI,CAACL,OAAO,GAAG,YAAM;IACjBP,YAAY,EAAE;EAClB,CAAC;AACL,CAAC;AACD,IAAMoB,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAIjE,KAAK,EAAEkE,QAAQ,EAAK;EAC5CA,QAAQ,GAAGA,QAAQ,GAAG,GAAG;EACzB,OAAO,CAAClE,KAAK,GAAGkE,QAAQ,EAAE/M,OAAO,EAAE;AACvC,CAAC;AACD,IAAMgN,eAAe,GAAG,SAAlBA,eAAeA,CAAA,EAAS;EAC1B,IAAIC,WAAW,GAAG,CAAC,CAAC;EACpB,IAAI;IACAA,WAAW,GAAG1D,IAAI,CAAC2D,KAAK,CAACC,OAAO,CAACC,GAAG,CAAC/f,WAAW,CAAC,CAAC;EACtD,CAAC,CAAC,OAAOmL,CAAC,EAAE,CACZ;EACA,OAAOyU,WAAW;AACtB,CAAC;AACD,IAAMI,eAAe,GAAG,SAAlBA,eAAeA,CAAA,EAAS;EAC1B/V,QAAQ,CAACmE,cAAc,CAAC,qBAAqB,CAAC,CAACkD,SAAS,GACpD5E,eAAe,CAACiT,eAAe,EAAE,CAAC;AAC1C,CAAC;AACD,IAAMM,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAIC,SAAS,EAAK;EACtC,IAAMC,IAAI,GAAGnhB,MAAM,CAACqE,IAAI,CAAC6c,SAAS,CAAC;EACnC,KAAK,IAAI1iB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGqD,qBAAqB,CAACtD,MAAM,EAAEC,CAAC,EAAE,EAAE;IACnD,IAAIqD,qBAAqB,CAACrD,CAAC,CAAC,CAAC6d,IAAI,KAAK,OAAO,EAAE;MAC3C,IAAI8E,IAAI,CAACpI,QAAQ,CAAClX,qBAAqB,CAACrD,CAAC,CAAC,CAACyb,EAAE,CAAC/Z,QAAQ,EAAE,CAAC,EAAE;QACvD,OAAO,IAAI;MACf;IACJ;EACJ;EACA,OAAO,KAAK;AAChB,CAAC;AAED,IAAMsX,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAA,EAAS;EAClC,IAAM4J,MAAM,GAAGjY,QAAQ,CAAC8B,QAAQ,CAACmE,cAAc,CAAC,mBAAmB,CAAC,CAACvQ,KAAK,CAAC;EAC3E,IAAMwiB,OAAO,GAAGpW,QAAQ,CAACmE,cAAc,CAAC,qCAAqC,CAAC;EAE9E,IAAIgS,MAAM,IAAI,CAAC,EAAE;IACbC,OAAO,CAAChW,KAAK,CAACmU,SAAS,GAAG,KAAK;IAC/B6B,OAAO,CAAChW,KAAK,CAAC+I,OAAO,GAAG,CAAC;IACzBnJ,QAAQ,CAACmE,cAAc,CAAC,sBAAsB,CAAC,CAACM,SAAS,GAAG,EAAE;IAE9DrN,cAAc,GAAG,EAAE;IACnBC,aAAa,GAAG,EAAE;EACtB,CAAC,MAAM;IACH+e,OAAO,CAAChW,KAAK,CAACmU,SAAS,GAAG,QAAQ;IAClC6B,OAAO,CAAChW,KAAK,CAAC+I,OAAO,GAAG,CAAC;EAC7B;EACA,OAAOgN,MAAM;AACjB,CAAC;AAED,IAAME,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAgB;EAAA,IAAZC,EAAE,GAAAhc,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAC,IAAI;EAC1B,IAAM8b,OAAO,GAAGne,qBAAqB,CAAC,SAAS,CAAC;EAEhD,IAAI,CAACiB,qBAAqB,EAAE;IACxB;EACJ;EACA8G,QAAQ,CAACgJ,aAAa,CAAC,wBAAwB,CAAC,CAAC5I,KAAK,CAACC,OAAO,GAAG,EAAE;EAEnE,IAAIkW,MAAM,CAACC,SAAS,CAACJ,OAAO,CAAC,EAAE;IAC3B,IAAI,CAACE,EAAE,EAAE;MACL,IAAMG,aAAa,GAAGzW,QAAQ,CAACgJ,aAAa,CAAC,oBAAoB,CAAC;MAClE,IAAM0N,aAAa,GAAG1W,QAAQ,CAACgJ,aAAa,CAAC,gBAAgB,CAAC;MAE9DyN,aAAa,CAACrW,KAAK,CAACC,OAAO,GAAG,EAAE;MAChCqW,aAAa,CAACrP,SAAS,GAAG+O,OAAO;IACrC,CAAC,MAAM;MACH,IAAMO,gBAAgB,GAAG3W,QAAQ,CAACmE,cAAc,CAAC,kBAAkB,CAAC;MAEpE,IAAI,CAACnE,QAAQ,CAACgJ,aAAa,CAAC,kBAAkB,CAAC,EAAE;QAC7C2N,gBAAgB,CAAClS,SAAS,GAAGkS,gBAAgB,CAAClS,SAAS,4FAAAzJ,MAAA,CACU/C,qBAAqB,CAAC,MAAM,CAAC,0BAC7F;MACL;MAEA,IAAM2e,cAAc,GAAG5W,QAAQ,CAACgJ,aAAa,CAAC,qBAAqB,CAAC;MACpE,IAAM6N,WAAW,GAAG7W,QAAQ,CAACgJ,aAAa,CAAC,qBAAqB,CAAC;MACjE,IAAM8N,kBAAkB,GAAG9W,QAAQ,CAACgJ,aAAa,CAAC,qBAAqB,CAAC;MACxE,IAAM+N,cAAc,GAAG/W,QAAQ,CAACmE,cAAc,CAAC,2BAA2B,CAAC;MAC3E,IAAM6S,YAAY,GAAG,uBAAuB;MAE5C,IAAMC,eAAe,mCAAAjc,MAAA,CAAiCob,OAAO,cAAApb,MAAA,CACzDO,OAAO,CAAC6a,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAE;MAEpDW,cAAc,CAACtS,SAAS,sCAAAzJ,MAAA,CAAaic,eAAe,CAAE;MAEtDL,cAAc,CAACpN,YAAY,CACvB,SAAS,2CAAAxO,MAAA,CAEFgc,YAAY,8UAGtB;MAEDhX,QAAQ,CAACgJ,aAAa,CAACgO,YAAY,CAAC,CAACpjB,KAAK,GAAGqE,qBAAqB,CAAC,MAAM,CAAC;MAC1E2e,cAAc,CAACvP,SAAS,GAAGpP,qBAAqB,CAAC,MAAM,CAAC;MACxD4e,WAAW,CAACxP,SAAS,GAAGpP,qBAAqB,CAAC,UAAU,CAAC;MACzD6e,kBAAkB,CAACrS,SAAS,GAAGwS,eAAe;MAE9CjX,QAAQ,CAACmE,cAAc,CAAC,aAAa,CAAC,CAAC/D,KAAK,CAAC2G,eAAe,YAAA/L,MAAA,CAChDkc,gBAAgB,CAACd,OAAO,CAAC,QAAI;IAC7C;EACJ;AACJ,CAAC;AACD,IAAMc,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAId,OAAO,EAAK;EAClC,IAAMpF,KAAK,GAAG;IACV,CAAC,EAAE,MAAM;IACT,EAAE,EAAE,cAAc;IAClB,GAAG,EAAE,YAAY;IACjB,GAAG,EAAE,wBAAwB;IAC7B,GAAG,EAAE,UAAU;IACf,GAAG,EAAE,QAAQ;IACb,GAAG,EAAE,mBAAmB;IACxB,GAAG,EAAE,UAAU;IACf,IAAI,EAAE,aAAa;IACnB,IAAI,EAAE,eAAe;IACrB,IAAI,EAAE,sBAAsB;IAC5B,IAAI,EAAE,cAAc;IACpB,IAAI,EAAE,iBAAiB;IACvB,IAAI,EAAE,KAAK;IACX,IAAI,EAAE,aAAa;IACnB,IAAI,EAAE,gBAAgB;IACtB,KAAK,EAAE,iBAAiB;IACxB,KAAK,EAAE,QAAQ;IACf,KAAK,EAAE;EACX,CAAC;EACD,IAAI5X,IAAI,GAAGrE,MAAM,CAACqE,IAAI,CAAC4X,KAAK,CAAC;EAC7B5X,IAAI,GAAGA,IAAI,CAACgN,OAAO,EAAE;EACrB,IAAM+Q,IAAI,GAAG,4BAA4B;EACzC,KAAK,IAAI5jB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6F,IAAI,CAAC9F,MAAM,EAAEC,CAAC,EAAE,EAAE;IAClC,IAAMmX,QAAQ,GAAGsG,KAAK,CAAC5X,IAAI,CAAC7F,CAAC,CAAC,CAAC;IAC/B,IAAI6iB,OAAO,IAAIlY,QAAQ,CAAC9E,IAAI,CAAC7F,CAAC,CAAC,CAAC,EAAE;MAC9B,IAAIoD,4BAA4B,KAAK+T,QAAQ,EAAE;QAC3C5P,OAAO,CAAC2C,KAAK,CAACiN,QAAQ,CAAC;QACvB/T,4BAA4B,GAAG+T,QAAQ;MAC3C;MACA,OAAO/Q,gBAAgB,IAAAqB,MAAA,CAAImc,IAAI,OAAAnc,MAAA,CAAI0P,QAAQ,UAAO;IACtD;EACJ;EACA,OAAO/Q,gBAAgB,IAAAqB,MAAA,CAAImc,IAAI,eAAY;AAC/C,CAAC;AACD,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAA,EAAS;EAC9B1Z,MAAM,CAAC,2CAA2C,CAAC;AACvD,CAAC;AACD,IAAM2Z,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAIrI,EAAE,EAAoB;EAAA,IAAlBsI,KAAK,GAAAhd,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,KAAK;EAC1C,IAAMid,YAAY,GAAGvX,QAAQ,CAACmE,cAAc,iBAAAnJ,MAAA,CAAiBgU,EAAE,EAAG;EAClE,IAAMwI,YAAY,GAAGxX,QAAQ,CAACmE,cAAc,iBAAAnJ,MAAA,CAAiBgU,EAAE,EAAG;EAClE9X,eAAe,CAACugB,EAAE,CAAC,aAAa,EAAE,YAAM;IACpCJ,mBAAmB,CAACrI,EAAE,EAAE,IAAI,CAAC;EACjC,CAAC,CAAC;EACF,IAAIsI,KAAK,IAAIC,YAAY,CAACvD,YAAY,CAAC,iBAAiB,CAAC,KAAK,GAAG,EAAE;IAC/DuD,YAAY,CAACnX,KAAK,CAACQ,MAAM,GAAG,OAAO;IACnC2W,YAAY,CAAC/N,YAAY,CAAC,iBAAiB,EAAE,GAAG,CAAC;IACjDgO,YAAY,CAACnQ,SAAS,GAAG,UAAU;EACvC,CAAC,MAAM;IACHkQ,YAAY,CAACnX,KAAK,CAACQ,MAAM,GAAG,MAAM;IAClC2W,YAAY,CAAC/N,YAAY,CAAC,iBAAiB,EAAE,GAAG,CAAC;IACjDgO,YAAY,CAACnQ,SAAS,GAAG,QAAQ;EACrC;AACJ,CAAC;AACD,IAAMiL,qBAAqB,GAAG,SAAxBA,qBAAqBA,CAAA,EAAS;EAChC,IAAMoF,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAS;IACxB,IAAMC,QAAQ,GAAG,UAAU;IAAC,IAAAC,UAAA,GAAA/kB,0BAAA,CAEX+D,qBAAqB;MAAAihB,MAAA;IAAA;MAAtC,KAAAD,UAAA,CAAAnkB,CAAA,MAAAokB,MAAA,GAAAD,UAAA,CAAAlkB,CAAA,IAAAC,IAAA,GAAwC;QAAA,IAA/B2K,IAAI,GAAAuZ,MAAA,CAAAjkB,KAAA;QACT;QACA,IAAI0K,IAAI,CAAClJ,IAAI,KAAKuiB,QAAQ,IAAI1f,qBAAqB,CAAC6f,cAAc,EAAE;UAChE,IAAMC,eAAe,GAAG/X,QAAQ,CAACgJ,aAAa,iBAAAhO,MAAA,CAC1BsD,IAAI,CAAC0Q,EAAE,+BAA4B;UAEvD+I,eAAe,CAAC1Q,SAAS,GAAG,SAAS;UACrC0Q,eAAe,CAACvO,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC;UAC5CuO,eAAe,CAACpO,eAAe,CAAC,SAAS,CAAC;UAC1C;QACJ;MACJ;IAAC,SAAAxV,GAAA;MAAAyjB,UAAA,CAAA/jB,CAAA,CAAAM,GAAA;IAAA;MAAAyjB,UAAA,CAAA7jB,CAAA;IAAA;EACL,CAAC;EAED2jB,aAAa,EAAE;EACf9M,WAAW,CAAC8M,aAAa,EAAE,GAAG,CAAC;AACnC,CAAC;AACD,IAAMM,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;EACvB,IAAM7R,MAAM,GAAGnG,QAAQ,CAACmE,cAAc,CAAC,qBAAqB,CAAC;EAC7D,IAAMW,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;IACvB5N,eAAe,GAAG,IAAI6N,MAAM,CAAC,0BAA0B,EAAE;MACrDC,YAAY,EAAE,EAAE;MAChBC,IAAI,EAAE,IAAI;MACVC,QAAQ,EAAE,IAAI;MACdC,cAAc,EAAE,IAAI;MACpBC,aAAa,EAAE,KAAK;MACpBC,wBAAwB,EAAE,KAAK;MAC/BC,QAAQ,EAAE;QACNC,KAAK,EAAE;MACX,CAAC;MACDC,UAAU,EAAE;QACRC,EAAE,EAAE,oBAAoB;QACxBC,SAAS,EAAE;MACf,CAAC;MACDC,UAAU,EAAE;QACRC,MAAM,EAAE,eAAe;QACvBC,MAAM,EAAE;MACZ;IACJ,CAAC,CAAC;EACN,CAAC;EACD,IAAMoS,UAAU,GAAG,SAAbA,UAAUA,CAAIxZ,QAAQ,EAAK;IAC7BwE,WAAW,CAAC,UAAC5B,CAAC,EAAK;MACf5C,QAAQ,CAAC4C,CAAC,CAAC;IACf,CAAC,EAAE,0BAA0B,EAAE,KAAK,EAAE,IAAI,CAAC;EAC/C,CAAC;EACD,IAAM6W,YAAY,GAAG,SAAfA,YAAYA,CAAIpH,OAAO,EAAE1b,IAAI,EAAK;IACpC,KAAK,IAAI7B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGud,OAAO,CAACxd,MAAM,EAAEC,CAAC,EAAE,EAAE;MACrC,IAAIud,OAAO,CAACvd,CAAC,CAAC,CAAC6B,IAAI,KAAKA,IAAI,EAAE;QAC1B,OAAO0b,OAAO,CAACvd,CAAC,CAAC;MACrB;IACJ;EACJ,CAAC;EACD0P,WAAW,CAAC,UAAC5B,CAAC,EAAK;IACX,IAAM8W,OAAO,GAAG9W,CAAC;IACjBpC,OAAO,CAACkZ,OAAO,CAAC;IAChBF,UAAU,CAAC,UAACnH,OAAO,EAAK;MACpB,KAAK,IAAIvd,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4kB,OAAO,CAAC7kB,MAAM,EAAEC,CAAC,EAAE,EAAE;QACrC,IAAM4a,MAAM,GAAG+J,YAAY,CAACpH,OAAO,EAAEqH,OAAO,CAAC5kB,CAAC,CAAC,CAAC6B,IAAI,CAAC;QACrD+Q,MAAM,CAAC1B,SAAS,GAAG0B,MAAM,CAAC1B,SAAS,wrBAAAzJ,MAAA,CAOSzH,CAAC,iLAAAyH,MAAA,CAEPzH,CAAC,gFAAAyH,MAAA,CACZmd,OAAO,CAAC5kB,CAAC,CAAC,CAAC+S,IAAI,4EAAAtL,MAAA,CACDzH,CAAC,uCAAAyH,MAAA,CAAkCzH,CAAC,keAAAyH,MAAA,CAMnBmd,OAAO,CAAC5kB,CAAC,CAAC,CAAC6B,IAAI,iMAKxE;QAED,IACImiB,YAAY,GACRvX,QAAQ,CACHmE,cAAc,iBAAAnJ,MAAA,CACKzH,CAAC,EACpB;QACb,IACIikB,YAAY,GACRxX,QAAQ,CACHmE,cAAc,iBAAAnJ,MAAA,CACKzH,CAAC,EACpB;QAEbikB,YAAY,CACPpX,KAAK,CACLgY,UAAU,GACX,KAAK;QACTb,YAAY,CACPnX,KAAK,CACLiY,UAAU,GACX,6CAA6C;QACjDd,YAAY,CACP/N,YAAY,CACT,iBAAiB,EACjB,GAAG,CACN;QACL,IACI8O,iBAAiB,GACb,EAAE;QAEV,IAAIf,YAAY,CACPgB,YAAY,GACjB,GAAG,GACHD,iBAAiB,EACnB;UACEf,YAAY,CACPnX,KAAK,CACLQ,MAAM,GACP,OAAO;UACX2W,YAAY,CACPnX,KAAK,CACLoY,QAAQ,GACT,QAAQ;QAChB,CAAC,MAAM;UACHhB,YAAY,CACPpX,KAAK,CACLC,OAAO,GACR,MAAM;QACd;MACJ;IACJ,CAAC,CAAC;IAEFyE,YAAY,EAAE;EAClB,CAAC,EACD,2BAA2B,EAC3B,KAAK,EAAE,IAAI,CAAC;AACpB,CAAC;AAED,IAAM2T,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAA,EAAS;EAC7B,IAAMtS,MAAM,GAAGnG,QAAQ,CAClBmE,cAAc,CACX,sBAAsB,CAAC;EAE/B,IAAMW,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;IACvB,IAAI;MACA9E,QAAQ,CAACmE,cAAc,CAAC,oBAAoB,CAAC,CAACxC,MAAM,EAAE;IAC1D,CAAC,CAAC,OAAOT,CAAC,EAAE,CACZ;IACA,IAAI6D,MAAM,CACN,0BAA0B,EAAE;MACxB2T,aAAa,EAAE,CAAC;MAChB1T,YAAY,EAAE,EAAE;MAChBM,QAAQ,EAAE;QACNC,KAAK,EAAE;MACX,CAAC;MACDN,IAAI,EAAE,IAAI;MACVC,QAAQ,EAAE,IAAI;MACdC,cAAc,EAAE,IAAI;MACpBC,aAAa,EAAE,KAAK;MACpBI,UAAU,EAAE;QACRC,EAAE,EAAE,oBAAoB;QACxBC,SAAS,EAAE;MACf,CAAC;MACDiT,WAAW,EAAE;QACT,GAAG,EAAE;UACDD,aAAa,EAAE;QACnB,CAAC;QACD,GAAG,EAAE;UACDA,aAAa,EAAE;QACnB,CAAC;QACD,IAAI,EAAE;UACFA,aAAa,EAAE;QACnB,CAAC;QACD,IAAI,EAAE;UACFA,aAAa,EAAE;QACnB,CAAC;QACD,IAAI,EAAE;UACFA,aAAa,EAAE;QACnB;MACJ;IACJ,CAAC,CAAC;EACV,CAAC;EAED,IAAME,UAAU,GAAG,SAAbA,UAAUA,CACZna,QAAQ,EAAK;IACbwE,WAAW,CAAC,UAAC5B,CAAC,EAAK;MACX5C,QAAQ,CAAC4C,CAAC,CAAC;IACf,CAAC,EACD,yBAAyB,EACzB,KAAK,EAAE,IAAI,CAAC;EACpB,CAAC;;EAED;EACA;EACA;EACA;;EAEAuX,UAAU,CAAC,UAACC,YAAY,EAAK;IACzB5V,WAAW,CAAC,UAAC5B,CAAC,EAAK;MACX,IAAM8M,MAAM,GAAG9M,CAAC;MAChBpC,OAAO,CAACkP,MAAM,CAAC;MAEf,IAAI2K,aAAa,GAAG,EAAE;MAAC,IAAAC,UAAA,GAAAlmB,0BAAA,CACDsb,MAAM;QAAA6K,MAAA;MAAA;QAA5B,KAAAD,UAAA,CAAAtlB,CAAA,MAAAulB,MAAA,GAAAD,UAAA,CAAArlB,CAAA,IAAAC,IAAA,GAA8B;UAAA,IAArBslB,SAAS,GAAAD,MAAA,CAAAplB,KAAA;UACdklB,aAAa,CAACnH,IAAI,CAACsH,SAAS,CAAC7jB,IAAI,CAAC;QACtC;MAAC,SAAAjB,GAAA;QAAA4kB,UAAA,CAAAllB,CAAA,CAAAM,GAAA;MAAA;QAAA4kB,UAAA,CAAAhlB,CAAA;MAAA;MAED,IAAMmlB,UAAU,GAAG,SAAbA,UAAUA,CAAI/K,MAAM,EAAE6C,KAAK,EAAK;QAClC,IAAIA,KAAK,CAAC1d,MAAM,GAAGwlB,aAAa,CAACxlB,MAAM,EAAE;UACrC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAIulB,aAAa,CAACxlB,MAAM,GAAG0d,KAAK,CAAC1d,MAAO,EAAEC,CAAC,EAAE,EAAE;YAC5Dyd,KAAK,CAACW,IAAI,CAAC;cAACwH,IAAI,EAAE,EAAE;cAAEC,KAAK,EAAE;YAAE,CAAC,CAAC;UACrC;QACJ;QACA,KAAK,IAAIC,GAAC,GAAG,CAAC,EAAEA,GAAC,GAAGrI,KAAK,CAAC1d,MAAM,EAAE+lB,GAAC,EAAE,EAAE;UACnC,IAAIlL,MAAM,CAACnM,WAAW,EAAE,KAAKgP,KAAK,CAACqI,GAAC,CAAC,CAACF,IAAI,CAACnX,WAAW,EAAE,EAAE;YACtD,OAAOgP,KAAK,CAACqI,GAAC,CAAC,CAACD,KAAK;UACzB;QACJ;QACA,OAAO,kEAAkE;MAC7E,CAAC;MAEDvI,eAAe,CAAC,UAAUG,KAAK,EAAE;QAAA,IAAAsI,MAAA,YAAAA,OAAA/lB,CAAA,EAEW;UACpC,IACIgmB,SAAS,GAAG,SAAZA,SAASA,CAAA,EAAS;YACV,IAAIvb,MAAM,GAAG,EAAE;YACfmQ,MAAM,CAAC5a,CAAC,CAAC,CAACimB,MAAM,CAACrO,IAAI,EAAE;YACvB,KAAK,IAAI1X,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0a,MAAM,CAAC5a,CAAC,CAAC,CAACimB,MAAM,CAAClmB,MAAM,EAAEG,CAAC,EAAE,EAAE;cAC9C,IAAMgmB,WAAW,GAAGtL,MAAM,CAAC5a,CAAC,CAAC,CAACimB,MAAM,CAAC/lB,CAAC,CAAC;cACvC,IACIgmB,WAAW,IAAIA,WAAW,CAACnmB,MAAM,IACjCmmB,WAAW,KAAK,UAAU,IAC1B,CAACA,WAAW,CAAC3L,QAAQ,CAAC,OAAO,CAAC,EAClC;gBACI9P,MAAM,GAAGA,MAAM,8KAAAhD,MAAA,CAEsC6d,YAAY,CAACY,WAAW,CAAC,CAACnb,IAAI,yKAAAtD,MAAA,CAE1E6d,YAAY,CAACY,WAAW,CAAC,CAAC3N,KAAK,8FAE/C;cACG;YACJ;YACA,OAAO9N,MAAM;UACjB,CAAC;UAET,IAAM0b,OAAO,GAAG,SAAVA,OAAOA,CAAA,EAAS;YAClB,KAAK,IAAIjmB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0a,MAAM,CAAC5a,CAAC,CAAC,CAACimB,MAAM,CAAClmB,MAAM,EAAEG,CAAC,EAAE,EAAE;cAC9C,IAAI0a,MAAM,CAAC5a,CAAC,CAAC,CAACimB,MAAM,CAAC/lB,CAAC,CAAC,CAACqa,QAAQ,CAAC,OAAO,CAAC,EAAE;gBACvC,OAAOK,MAAM,CAAC5a,CAAC,CAAC,CAACimB,MAAM,CAAC/lB,CAAC,CAAC,CAACoG,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC;cACnD;YACJ;UACJ,CAAC;UAED/C,YAAY,CAAC6a,IAAI,CAACxD,MAAM,CAAC5a,CAAC,CAAC,CAAC6B,IAAI,CAAC;;UAEjC;UACA;UACA,IAAMukB,cAAc,GAAG,EAAE;UACzB,IAAMC,WAAW,GAAG,EAAE;UAEtBzL,MAAM,CAAC5a,CAAC,CAAC,CAACsmB,IAAI,GAAGlgB,gBAAgB,CAACwU,MAAM,CAAC5a,CAAC,CAAC,CAACsmB,IAAI,CAAC;UACjD;;UAEA1T,MAAM,CAAC1B,SAAS,GAAG0B,MAAM,CAAC1B,SAAS,6YAAAzJ,MAAA,CAMYmT,MAAM,CAAC5a,CAAC,CAAC,CAACsmB,IAAI,2SAAA7e,MAAA,CAK3CmT,MAAM,CAAC5a,CAAC,CAAC,CAAC6B,IAAI,2IAAA4F,MAAA,CAE8BmT,MAAM,CAAC5a,CAAC,CAAC,CAACumB,IAAI,4IAI/E;UACD;UACA;UACA;UACA;UACA;;UAEA;UACA;UACA;UACA;UACA;QACA,CAAC;QAxED;QACA,KAAK,IAAIvmB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4a,MAAM,CAAC7a,MAAM,EAAEC,CAAC,EAAE;UAAA+lB,MAAA,CAAA/lB,CAAA;QAAA;QAyEtCuR,YAAY,EAAE;MAClB,CAAC,EAAEgU,aAAa,EAAE,KAAK,CAAC;IAC5B,CAAC,EACD,0BAA0B,EAC1B,KAAK,EAAE,IAAI,CAAC;EACpB,CAAC,CAAC;AACN,CAAC;AAED,IAAMiB,wBAAwB,GAAG,SAA3BA,wBAAwBA,CAAA,EAAS;EACnC,IAAM5T,MAAM,GAAGnG,QAAQ,CAClBmE,cAAc,CACX,+BAA+B,CAAC;EAExC,IAAMW,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;IACvB,IAAIC,MAAM,CACN,6BAA6B,EAAE;MAC3B2T,aAAa,EAAE,CAAC;MAChB1T,YAAY,EAAE,EAAE;MAChBM,QAAQ,EAAE;QACNC,KAAK,EAAE;MACX,CAAC;MACDN,IAAI,EAAE,IAAI;MACVC,QAAQ,EAAE,IAAI;MACdC,cAAc,EAAE,IAAI;MACpBC,aAAa,EAAE,KAAK;MACpBI,UAAU,EAAE;QACRC,EAAE,EAAE,8BAA8B;QAClCC,SAAS,EAAE;MACf,CAAC;MACDiT,WAAW,EAAE;QACT,GAAG,EAAE;UACDD,aAAa,EAAE;QACnB,CAAC;QACD,GAAG,EAAE;UACDA,aAAa,EAAE;QACnB,CAAC;QACD,GAAG,EAAE;UACDA,aAAa,EAAE;QACnB,CAAC;QACD,IAAI,EAAE;UACFA,aAAa,EAAE;QACnB,CAAC;QACD,IAAI,EAAE;UACFA,aAAa,EAAE;QACnB,CAAC;QACD,IAAI,EAAE;UACFA,aAAa,EAAE;QACnB,CAAC;QACD,IAAI,EAAE;UACFA,aAAa,EAAE;QACnB,CAAC;QACD,IAAI,EAAE;UACFA,aAAa,EAAE;QACnB;MACJ;IACJ,CAAC,CAAC;EACV,CAAC;EAED,IAAMsB,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAA,EAAS;IAC3B,IAAMC,SAAS,GAAGja,QAAQ,CAACka,gBAAgB,CAAC,gCAAgC,CAAC;IAC7E,KAAK,IAAI3mB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0mB,SAAS,CAAC3mB,MAAM,EAAEC,CAAC,EAAE,EAAE;MACvC,IAAM4mB,MAAM,GAAGF,SAAS,CAAC1mB,CAAC,CAAC;MAC3B,IAAM6mB,KAAK,GAAGD,MAAM,CAACnG,YAAY,CAAC,UAAU,CAAC;MAE7CmG,MAAM,CAAC1V,SAAS,GAAGxJ,UAAU,CAAC,IAAId,IAAI,CAACigB,KAAK,CAAC,EAAE/f,kBAAkB,EAAE,CAAC;IACxE;EACJ,CAAC;EAEDuW,iBAAiB,CAAC,UAAUzP,IAAI,EAAE;IAC9B,IAAI,CAACA,IAAI,IAAI,CAACA,IAAI,CAAC7N,MAAM,EAAE;MACvB;IACJ;IACA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4N,IAAI,CAAC7N,MAAM,EAAEC,CAAC,EAAE,EAAE;MAClC,IAAMyG,IAAI,GAAG,IAAIG,IAAI,CAACgH,IAAI,CAAC5N,CAAC,CAAC,CAAC8mB,UAAU,CAAC;MACzClZ,IAAI,CAAC5N,CAAC,CAAC,CAAC+mB,OAAO,CAACjI,KAAK,GAAG1Y,gBAAgB,CAACwH,IAAI,CAAC5N,CAAC,CAAC,CAAC+mB,OAAO,CAACjI,KAAK,CAAC;MAC/DlM,MAAM,CACD1B,SAAS,GACV0B,MAAM,CACD1B,SAAS,qXAAAzJ,MAAA,CAMqCmG,IAAI,CAAC5N,CAAC,CAAC,CAAC+mB,OAAO,CAACjI,KAAK,2RAAArX,MAAA,CAKlDmG,IAAI,CAAC5N,CAAC,CAAC,CAAC+mB,OAAO,CAACllB,IAAI,2NAAA4F,MAAA,CAGwBmG,IAAI,CAAC5N,CAAC,CAAC,CAAC2Y,QAAQ,+GAAAlR,MAAA,CAG9EhB,IAAI,CAAC/E,QAAQ,EAAE,wKAMlB;IACT;IACA+K,QAAQ,CAACmE,cAAc,CAAC,wBAAwB,CAAC,CAACxC,MAAM,EAAE;IAC1DmD,YAAY,EAAE;IACd8F,WAAW,CAACoP,gBAAgB,EAAE,IAAI,CAAC;EACvC,CAAC,CAAC;AACN,CAAC;AAED,IAAMO,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAA,EAAS;EAC5B,IAAMC,KAAK,GAAG,CAAC,+BAA+B,EAAE,yBAAyB,CAAC;EAC1E,KAAK,IAAIjnB,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAIinB,KAAK,EAAEjnB,CAAC,EAAE,EAAE;IAC7BqM,iBAAiB,kBAAA5E,MAAA,CAAkBzH,CAAC,WAAQgH,SAAS,EAAE,KAAK,CAAC;EACjE;AACJ,CAAC;AAED,IAAMkgB,UAAU,GAAG,SAAbA,UAAUA,CAAA,EAAuD;EAAA,IAAnDC,cAAc,GAAApgB,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,CAAC;EAAA,IAAE0U,EAAE,GAAA1U,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,CAAC;EAAA,IAAEqgB,WAAW,GAAArgB,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,IAAI;EAC9D,IAAI6c,IAAI,oCAAAnc,MAAA,CAAoC4B,SAAS,CAAC8d,cAAc,CAAC,UAAO;EAC5E,IAAIC,WAAW,EAAE;IACbxD,IAAI,GAAGwD,WAAW;EACtB,CAAC,MAAM,IAAI9iB,mBAAmB,EAAE;IAC5B;EACJ;EACA,IAAM3B,IAAI,GAAGyD,gBAAgB,CAACwd,IAAI,CAAC;EACnCnX,QAAQ,CAACmE,cAAc,2BAAAnJ,MAAA,CAA2BgU,EAAE,EAAG,CAAC5O,KAAK,CAAC2G,eAAe,UAAA/L,MAAA,CAAU9E,IAAI,MAAG;AAClG,CAAC;AACD,IAAM0kB,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAA,EAAS;EAC/B,IAAMF,cAAc,GAAG,EAAE;EACzB,IAAMhQ,QAAQ,GAAG1K,QAAQ,CAACmE,cAAc,CAAC,0BAA0B,CAAC;EAEpE,KAAK,IAAI5Q,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAImnB,cAAc,EAAEnnB,CAAC,EAAE,EAAE;IACtCqM,iBAAiB,kCAAA5E,MAAA,CAAkCzH,CAAC,YAASgH,SAAS,EAAE,KAAK,CAAC;EAClF;EAEAqQ,WAAW,CAAC,YAAY;IACpB,IAAIvR,MAAM,CAACwhB,WAAW,GAAG,IAAI,IAAIpjB,gBAAgB,EAAE;MAC/CiT,QAAQ,CAACtK,KAAK,CAAC+I,OAAO,GAAG,CAAC;IAC9B,CAAC,MAAM,IAAI,CAAC1R,gBAAgB,IAAI4B,MAAM,CAACwhB,WAAW,IAAI,IAAI,EAAE;MACxD5W,UAAU,CAAC,YAAY;QACnByG,QAAQ,CAACtK,KAAK,CAAC+I,OAAO,GAAG,EAAE;MAC/B,CAAC,EAAE,GAAG,CAAC;IACX,CAAC,MAAM;MACHuB,QAAQ,CAACtK,KAAK,CAAC+I,OAAO,GAAG,EAAE;IAC/B;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN,IAAM2R,qBAAqB,GAAG,SAAxBA,qBAAqBA,CAAA,EAAS;IAChC,IAAIzhB,MAAM,CAAC0hB,UAAU,IAAI,GAAG,EAAE;MAC1BrQ,QAAQ,CAACtK,KAAK,CAAC0J,GAAG,MAAA9O,MAAA,CAAM4B,SAAS,CAAC,EAAE,CAAC,MAAG;MACxC8N,QAAQ,CAACtK,KAAK,CAAC4a,IAAI,MAAAhgB,MAAA,CAAM4B,SAAS,CAAC,EAAE,CAAC,MAAG;IAC7C,CAAC,MAAM;MACH8N,QAAQ,CAACtK,KAAK,CAAC0J,GAAG,MAAA9O,MAAA,CAAM4B,SAAS,CAAC,GAAG,CAAC,MAAG;MACzC8N,QAAQ,CAACtK,KAAK,CAAC4a,IAAI,MAAAhgB,MAAA,CAAM4B,SAAS,CAAC,EAAE,CAAC,MAAG;IAC7C;EACJ,CAAC;EAED6d,UAAU,CAACC,cAAc,CAAC;EAC1B9P,WAAW,CAAC6P,UAAU,EAAE,IAAI,EAAEC,cAAc,CAAC;EAE7CI,qBAAqB,EAAE;EACvBlQ,WAAW,CAACkQ,qBAAqB,EAAE,IAAI,CAAC;AAC5C,CAAC;AACD,IAAMG,oBAAoB,GAAG,SAAvBA,oBAAoBA,CACtBC,YAAY,EAAK;EACjBrG,uBAAuB,CACnB,SAAS,CAAC;EACd,IAAMsG,aAAa,GAAG,CAAC,OAAO,CAAC;EAC/B,IAAMrB,IAAI,GAAG9Z,QAAQ,CAChBmE,cAAc,CACX,yBAAyB,CAC5B;EACL,IAAMiX,aAAa,8EAAApgB,MAAA,CAAmDkgB,YAAY,CAAC9lB,IAAI,qDAAA4F,MAAA,CACxEkgB,YAAY,CAAC1J,KAAK,OAAAxW,MAAA,CAAIO,OAAO,CAAC2f,YAAY,CAAC1J,KAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,CAAC,uEAAAxW,MAAA,CAErFkgB,YAAY,CAAC3J,KAAK,oBAAAvW,MAAA,CAClBO,OAAO,CAAC2f,YAAY,CAAC3J,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,CAAC,6BAEhE;EACD,IAAM8J,kBAAkB,GACpBrb,QAAQ,CACHmE,cAAc,CACX,oBAAoB,CAAC;EACjC,IAAMmX,UAAU,GAAGtb,QAAQ,CACtBmE,cAAc,CACX,wBAAwB,CAC3B;EACL,IAAMoX,WAAW,GAAGvb,QAAQ,CACvBmE,cAAc,CACX,2BAA2B,CAC9B;EACL,IAAMwR,WAAW,GACbD,eAAe,EAAE;EACrB,IAAI8F,OAAO,GAAG,KAAK;EAEnB,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAS;IACxBF,WAAW,CACN/R,YAAY,CACT,SAAS,iBAAAxO,MAAA,CACMkgB,YAAY,CAACxJ,UAAU,QAAA1W,MAAA,CAAKqgB,kBAAkB,CAACznB,KAAK,OACtE;EACT,CAAC;EAEDynB,kBAAkB,CAACznB,KAAK,GAAG,CAAC;EAE5B6nB,aAAa,EAAE;EAEf,IAAMC,eAAe,GACjB/F,WAAW,CACNgG,cAAc,CAACT,YAAY,CACvBxJ,UAAU,CACVzc,QAAQ,EAAE,CAAC;EAExB,IAAI,CAACkmB,aAAa,CAACrN,QAAQ,CACfoN,YAAY,CAAC9J,IAAI,CACpB,IACD8J,YAAY,CAAC9J,IAAI,KACjB,OAAO,KACX4E,kBAAkB,CACdL,WAAW,CAAC,EAClB;IACEd,uBAAuB,CACnB,MAAM,CAAC;IACX2G,OAAO,GAAG,IAAI;IACd,IAAII,WAAW,GAAG,EAAE;IAEpB,IAAIV,YAAY,CAAC9J,IAAI,KACjB,OAAO,EAAE;MACTwK,WAAW,GACP,+EAA+E;IACvF,CAAC,MAAM,IACHF,eAAe,EAAE;MACjBE,WAAW,yOAAA5gB,MAAA,CACkCkgB,YAAY,CAAC9lB,IAAI,gHACzC;IACzB,CAAC,MAAM;MACHwmB,WAAW,GACP,oEAAoE;IAC5E;IAEA5b,QAAQ,CAACmE,cAAc,CACnB,wBAAwB,CAC3B,CACIM,SAAS,GACVmX,WAAW;EACnB;EAEA,IAAIC,WAAW,GAAG,OAAO;EAEzB,IAAIV,aAAa,CAACrN,QAAQ,CACtBoN,YAAY,CAAC9J,IAAI,CAAC,EAAE;IACpByK,WAAW,GAAG,MAAM;EACxB;EAEAR,kBAAkB,CAACjb,KAAK,CACnBC,OAAO,GACRwb,WAAW;EACfP,UAAU,CAAClb,KAAK,CAACC,OAAO,GACpBwb,WAAW;EAEf,IAAMC,QAAQ,GAAG,SAAXA,QAAQA,CAAA,EAAS;IACnB,IAAMloB,KAAK,GACPynB,kBAAkB,CACbznB,KAAK;IACdynB,kBAAkB,CACbznB,KAAK,GACNA,KAAK,CAACiG,OAAO,CACT,MAAM,EACN,EAAE,CAAC;EACf,CAAC;EAED,IAAMkiB,gBAAgB,GAClB,SADEA,gBAAgBA,CAAA,EACZ;IACFD,QAAQ,EAAE;IAEV,IAAI,CAACX,aAAa,CACbrN,QAAQ,CACLoN,YAAY,CACP9J,IAAI,CACZ,EAAE;MACH,IAAI4K,MAAM,GACN9d,QAAQ,CACJmd,kBAAkB,CACbznB,KAAK,CAAC,GACfsnB,YAAY,CACP3J,KAAK;MAEd,IACI0K,gBAAgB,GACZtG,WAAW,CACPuF,YAAY,CACPxJ,UAAU,CACd;MACb,IAAIwK,kBAAkB,GAClB,EAAE;MAEN,IAAIC,KAAK,CAACH,MAAM,CAAC,IACb,CAAC,GACD3gB,IAAI,CAAC+gB,IAAI,CACLJ,MAAM,CAAC,EAAE;QACbA,MAAM,GAAG,CAAC;MACd;MAEA,IACIC,gBAAgB,EAAE;QAClBC,kBAAkB,oMAAAlhB,MAAA,CAIRihB,gBAAgB,wDAE7B;MACD;MAEAnC,IAAI,CAACrV,SAAS,MAAAzJ,MAAA,CAAMogB,aAAa,iNAAApgB,MAAA,CAInBghB,MAAM,qCAAAhhB,MAAA,CACNO,OAAO,CAACygB,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,CAAC,wFAAAhhB,MAAA,CAGnDkhB,kBAAkB,uBACvB;MAEDT,aAAa,EAAE;IACnB;EACJ,CAAC;EAEL3B,IAAI,CAACrV,SAAS,GAAG2W,aAAa;EAE9BW,gBAAgB,EAAE;EAElBV,kBAAkB,CACb3W,gBAAgB,CACb,OAAO,EACP,UAACxD,CAAC,EAAK;IACH6a,gBAAgB,EAAE;EACtB,CAAC,CAAC;EACVtH,WAAW,EAAE;AACjB,CAAC;AAED,IAAM4H,wBAAwB,GAAG,SAA3BA,wBAAwBA,CAC1BrN,EAAE,EAAK;EACP,KAAK,IAAIzb,CAAC,GAAG,CAAC,EAAEA,CAAC,GACjBqD,qBAAqB,CAChBtD,MAAM,EAAEC,CAAC,EAAE,EAAE;IACd,IAAIqD,qBAAqB,CAACrD,CAAC,CAAC,CACvByb,EAAE,KAAK9Q,QAAQ,CAAC8Q,EAAE,CAAC,EAAE;MACtB,OAAOpY,qBAAqB,CACxBrD,CAAC,CAAC;IACV;EACJ;EAEA,OAAO,IAAI;AACf,CAAC;AAED,IAAM+oB,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAA,EAGkB;EAAA,IAHdlL,IAAI,GAAA9W,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MACA,CAAC;EAAA,IAAEiiB,MAAM,GAAAjiB,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,KAAK;EAAA,IACrBkiB,YAAY,GAAAliB,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MACR,KAAK;EACtC,IAAMmiB,SAAS,GAAGzc,QAAQ,CACrBmE,cAAc,CACX,sBAAsB,CAAC;EAC/B,IAAMuY,MAAM,GAAG,CACX,YAAY,EACZ,mBAAmB,EACnB,gBAAgB,EAChB,gBAAgB,EAChB,mBAAmB,CACtB;EACD,IAAIxY,EAAE,GAAG,IAAI;EACb,IAAIyY,EAAE,GAAG3c,QAAQ,CACZmE,cAAc,CACX,YAAY,CAAC,CAChBvQ,KAAK,CAACgpB,IAAI,EAAE;EACjB,IAAI,CAAClmB,eAAe,EAAE;IAClBwN,EAAE,GAAG,EAAE;IACPyY,EAAE,GAAG,CAAC;EACV;EACA,IAAMpT,MAAM,GAAGvJ,QAAQ,CAClBmE,cAAc,CACX,uBAAuB,GACvBD,EAAE,CACL;EACL,IAAM2Y,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAS;IACxB,KAAK,IAAItpB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmpB,MAAM,CAACppB,MAAM,EAAEC,CAAC,EAAE,EAAE;MACpC,IAAMupB,GAAE,GAAG9c,QAAQ,CAACmE,cAAc,CAACuY,MAAM,CAACnpB,CAAC,CAAC,CAAC;MAC7C,IAAImpB,MAAM,CAACnpB,CAAC,CAAC,CAACua,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC0O,YAAY,EAAE;QAC/C;MAAA,CACH,MAAM,IAAIE,MAAM,CAACnpB,CAAC,CAAC,CAACua,QAAQ,CAAC,QAAQ,CAAC,EAAE;QACrCgP,GAAE,CAAClpB,KAAK,GAAG,CAAC;MAChB,CAAC,MAAM;QACHkpB,GAAE,CAAClpB,KAAK,GAAG,EAAE;MACjB;IACJ;EACJ,CAAC;EACD,IAAI4oB,YAAY,EAAE;IACdC,SAAS,CAAChY,SAAS,GAAG,EAAE;IACxBoY,aAAa,EAAE;IACfzlB,cAAc,GAAG,EAAE;IACnBC,aAAa,GAAG,EAAE;EACtB;EACAkS,MAAM,CAACC,YAAY,CAAC,SAAS,yBAAAxO,MAAA,CACFoW,IAAI,QAAApW,MAAA,CAAMoW,IAAI,KAAK,CAAC,GAAI,CAAC,GAAGuL,EAAE,OACxD;EACDpT,MAAM,CAACI,eAAe,CAClB,UAAU,CAAC;EACfJ,MAAM,CAAClC,SAAS,GAAGkV,MAAM,GACrB,WAAW,GAAG,QAAQ;AAC9B,CAAC;AAED,IAAMQ,WAAW,GAAG,SAAdA,WAAWA,CAAIzC,OAAO,EAAE9I,KAAK,EACK;EAAA,IAAnB7P,MAAM,GAAArH,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,KAAK;EAC/B,IAAM4b,IAAI,GAAGL,OAAO,CAACC,GAAG,CACpB/f,WAAW,CAAC;EAChB,IAAMinB,WAAW,GACbtH,eAAe,EAAE;EACrB,IAAIuH,qBAAqB,GAAG,CAAC;EAC7B,IAAMC,cAAc,GAAG,KAAK;EAC5B,IAAMC,SAAS,GACX,+BAA+B;EAEnC,IAAI;IACA,IAAMC,GAAC,GAAGJ,WAAW,CACjB1C,OAAO,CAAC;IAEZ,IAAI/D,MAAM,CAACC,SAAS,CAAC4G,GAAC,CAAC,EAAE;MACrBH,qBAAqB,GACf,CAACG,GAAC;IACZ;EACJ,CAAC,CAAC,OAAOlc,CAAC,EAAE,CACZ;EAEA,IAAI,CAACqV,MAAM,CAACC,SAAS,CACjB8D,OAAO,CAAC,IAAI,CACZ/D,MAAM,CAACC,SAAS,CAAChF,KAAK,CAAC,EAAE;IACzB;EACJ,CAAC,MAAM,IAAI,CAAC,GAAGnW,IAAI,CAAC+gB,IAAI,CACpB5K,KAAK,CAAC,EAAE;IACR9T,MAAM,CACF,gDAAgD,CACnD;IACD;EACJ,CAAC,MAAM,IACHuf,qBAAqB,GACrBzL,KAAK,GAAG0L,cAAc,EAAE;IACxBxf,MAAM,4IAAA1C,MAAA,CAC2BmiB,SAAS,EAAAniB,MAAA,CAAGkiB,cAAc,aAC1D;IACD;EACJ;EAEA,IAAI,CAAChH,IAAI,EAAE;IACPL,OAAO,CAACtT,GAAG,CAACxM,WAAW,EACnBkc,IAAI,CACCC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;EAC3B;EAEA,IAAMmL,IAAI,GAAGpL,IAAI,CAAC2D,KAAK,CAACC,OAAO,CAC1BC,GAAG,CACA/f,WAAW,CAAC,CAAC;EACrB,IAAMmlB,YAAY,GACdmB,wBAAwB,CACpB/B,OAAO,CAAC;EAEhB,IAAI3Y,MAAM,EAAE;IACR,OAAO0b,IAAI,CAAC/C,OAAO,CAAC;IACpB5c,MAAM,mCAAA1C,MAAA,CACOmiB,SAAS,OAAAniB,MAAA,CAAIkgB,YAAY,CAAC9lB,IAAI,oGAC1C;EACL,CAAC,MAAM;IACH,IAAIioB,IAAI,CAAC/C,OAAO,CAAC,EAAE;MACf+C,IAAI,CAAC/C,OAAO,CAAC,GAAG+C,IAAI,CAChB/C,OAAO,CAAC,GAAG9I,KAAK;MACpB9T,MAAM,6GAAA1C,MAAA,CAAwBmiB,SAAS,OAAAniB,MAAA,CAAIwW,KAAK,0DAAAxW,MAAA,CAEtCO,OAAO,CAACiW,KAAK,EAAE,SAAS,EAAE,SAAS,EAAE,QAAQ,CAAC,kEAAAxW,MAAA,CACvCmiB,SAAS,OAAAniB,MAAA,CAAIkgB,YAAY,CAAC9lB,IAAI,oCAC9B;IACrB,CAAC,MAAM;MACHioB,IAAI,CAAC/C,OAAO,CAAC,GAAG9I,KAAK;MACrB9T,MAAM,mCAAA1C,MAAA,CACOmiB,SAAS,OAAAniB,MAAA,CAAIkgB,YAAY,CAAC9lB,IAAI,gHAC1C;IACL;EACJ;EAEAygB,OAAO,CAACtT,GAAG,CAACxM,WAAW,EAAEkc,IAAI,CACxBC,SAAS,CAACmL,IAAI,CAAC,CAAC;EACrBjJ,YAAY,EAAE;EACdkJ,UAAU,EAAE;EACZvH,eAAe,EAAE;EACjBuG,uBAAuB,EAAE;AAC7B,CAAC;AAED,IAAMiB,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAA,EACP;EAAA,IAAbC,GAAG,GAAAljB,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,CAAC,CAAC;EACR,IAAMmjB,SAAS,GAAGzd,QAAQ,CACrBka,gBAAgB,CACb,wBAAwB,CAC3B;EAEL,IAAIxjB,eAAe,EAAE;IACjB;EACJ;EAAC,IAAAgnB,MAAA,YAAAA,OAAAnqB,CAAA,EAE0C;IACvC,IAAM2Q,EAAE,GAAGuZ,SAAS,CAAClqB,CAAC,CAAC,CAAC6M,KAAK;IAE7B,IAAIqC,eAAe,CAAC+a,GAAG,CAAC,EAAE;MACtBtZ,EAAE,CAAC7D,OAAO,GAAG,MAAM;MACnB4D,UAAU,CAAC,YAAM;QACbC,EAAE,CAACiF,OAAO,GAAG,CAAC;QACdjF,EAAE,CAACqQ,SAAS,GAAG,MAAM;QACrBkJ,SAAS,CAAClqB,CAAC,CAAC,CAACoW,eAAe,CAAC,UAAU,CAAC;MAC5C,CAAC,EAAE,EAAE,CAAC;IACV,CAAC,MAAM;MACH8T,SAAS,CAAClqB,CAAC,CAAC,CAACiW,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC;MACzCtF,EAAE,CAACiF,OAAO,GAAG,CAAC;MACdjF,EAAE,CAACqQ,SAAS,GAAG,OAAO;MACtBtQ,UAAU,CAAC,YAAM;QACbC,EAAE,CAAC7D,OAAO,GAAG,MAAM;MACvB,CAAC,EAAE,GAAG,CAAC;IACX;EACJ,CAAC;EAlBD,KAAK,IAAI9M,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGkqB,SAAS,CAACnqB,MAAM,EAAEC,CAAC,EAAE;IAAAmqB,MAAA,CAAAnqB,CAAA;EAAA;AAmB7C,CAAC;AAED,IAAMoqB,eAAe,GAAG,SAAlBA,eAAeA,CAAA,EAAS;EAC1B9H,OAAO,CAAClU,MAAM,CAAC5L,WAAW,CAAC;EAC3BwnB,kBAAkB,CAAC,CAAC,CAAC,CAAC;EACtB7f,MAAM,CAAC,iBAAiB,CAAC;AAC7B,CAAC;AAED,IAAMkgB,SAAS,GAAG,SAAZA,SAASA,CAAIC,IAAI,EAAK;EACxB,IAAMC,OAAO,GAAG,KAAK;EACrB,IAAMpT,QAAQ,GAAG1K,QAAQ,CAACmE,cAAc,CACpC,sBAAsB,CAAC,CAAC/D,KAAK;EACjC,IAAIyd,IAAI,CAACE,SAAS,IAAID,OAAO,EAAE;IAC3BpT,QAAQ,CAAC3D,eAAe,UAAA/L,MAAA,CAAU6iB,IAAI,CAACE,SAAS,MAAG;EACvD,CAAC,MAAM;IACHrT,QAAQ,CAAC/B,UAAU,oDAAA3N,MAAA,CAEX8C,qBAAqB,CAAC+f,IAAI,CAAC7O,EAAE,CAAC,sCAAAhU,MAAA,CAE9B8C,qBAAqB,CAAC+f,IAAI,CAAC7O,EAAE,CAAC,mBAClB;IACpB,IAAMgP,cAAc,GAAGhe,QAAQ,CAACmE,cAAc,CAAC,qBAAqB,CAAC;IACrE,IAAI;MACA6Z,cAAc,CAAC3W,SAAS,GACpB,GAAArM,MAAA,CAAG6iB,IAAI,CAACI,UAAU,CAAC/oB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAA8F,MAAA,CAAG6iB,IAAI,CAACK,SAAS,GAAGL,IAAI,CAACK,SAAS,CAAChpB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,EAC5EipB,WAAW,EAAE;IAC1B,CAAC,CAAC,OAAOjd,CAAC,EAAE;MACR8c,cAAc,CAACvZ,SAAS,GAAG,KAAK;IACpC;EACJ;AACJ,CAAC;AAED,IAAM2Z,yBAAyB,GAAG,SAA5BA,yBAAyBA,CAAA,EAAS;EACpC3U,qBAAqB,CAAC,UAAU7Q,QAAQ,EAAE;IACtC,IAAIA,QAAQ,CAACsV,WAAW,CAACG,QAAQ,EAAE;MAC/BvF,qBAAqB,EAAE;IAC3B;EACJ,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC;AACnB,CAAC;AAED,IAAMuV,cAAc,GAAG,SAAjBA,cAAcA,CAAIR,IAAI,EAAK;EAC7BhI,OAAO,CAACtT,GAAG,CACPnK,qBAAqB,EACrB+D,WAAW,CAAC8V,IAAI,CACXC,SAAS,CACN2L,IAAI,CAAC,CAAC,CAAC;EACnBzJ,YAAY,EAAE;EACd1W,MAAM,0MAAA1C,MAAA,CAEE6iB,IAAI,CAACI,UAAU,OAAAjjB,MAAA,CAAI6iB,IAAI,CAACK,SAAS,GAAGL,IAAI,CAACK,SAAS,GAAG,EAAE,aAC9D;EAEDI,wBAAwB,EAAE;EAC1B;AACJ,CAAC;;AAED,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAsBA,CAAIpd,IAAI,EAAK;EACrC0U,OAAO,CAACtT,GAAG,CAACnK,qBAAqB,EAAE+I,IAAI,CAAC;AAC5C,CAAC;AAED,IAAMwL,eAAe,GAAG,SAAlBA,eAAeA,CAAA,EACkB;EAAA,IADdoB,GAAG,GAAAzT,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MACC,KAAK;EAC9B,IAAMkkB,YAAY,GAAG3I,OAAO,CACvBC,GAAG,CACA1d,qBAAqB,CAAC;EAC9B,IAAIomB,YAAY,EAAE;IACd,IAAIzQ,GAAG,EAAE;MACL,OAAOyQ,YAAY;IACvB,CAAC,MAAM,IAAIA,YAAY,EAAE;MACrB,OAAOvM,IAAI,CAAC2D,KAAK,CACbpZ,WAAW,CACPgiB,YAAY,CACf,CAAC;IACV;EACJ;AACJ,CAAC;AAED,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAAsB;EAAA,IAAlBC,KAAK,GAAApkB,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,KAAK;EAC9B,IAAIqkB,UAAU,GAAG,EAAE;EACnB,IAAIjoB,eAAe,EAAE;IACjBioB,UAAU,GAAG,IAAI;EACrB;EAEA,IAAMC,KAAK,GAAG5e,QAAQ,CACjBmE,cAAc,CACX,cAAc,GACdwa,UAAU,CAAC;EACnB,IAAMpV,MAAM,GAAGvJ,QAAQ,CAClBmE,cAAc,CACX,eAAe,GACfwa,UAAU,CACb;EACL,IAAI5R,IAAI,GAAG,EAAE;EAEb,IAAI;IACAA,IAAI,GAAG6R,KAAK,CAAChrB,KAAK,CAACgpB,IAAI,EAAE,CACpBuB,WAAW,EAAE;EACtB,CAAC,CAAC,OAAOjd,CAAC,EAAE,CACZ;EAEA,IAAM2d,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;IACvBnhB,MAAM,4EAAA1C,MAAA,CAC8C3D,aAAa,+DAChE;EACL,CAAC;EAED,IAAMynB,kBAAkB,GACpB,SADEA,kBAAkBA,CACnB3S,QAAQ,EAAEmO,OAAO,EAAK;IACnB,IAAInO,QAAQ,EAAE;MACV,KAAK,IAAI5Y,CAAC,GAAG,CAAC,EAAEA,CAAC,GACjB4Y,QAAQ,CACH7Y,MAAM,EAAEC,CAAC,EAAE,EACd;QACE,IAAI4Y,QAAQ,CAAC5Y,CAAC,CAAC,CACNyb,EAAE,KACP9W,cAAc,EAChB;UACE,OAAO,IAAI;QACf;MACJ;IACJ;IACA,OAAO,KAAK;EAChB,CAAC;EAEL,IAAI,CAAC6U,IAAI,CAACzZ,MAAM,EAAE;IACdoK,MAAM,CACF,qBAAqB,CAAC;IAC1B;EACJ,CAAC,MAAM,IAAIqP,IAAI,CAACzZ,MAAM,GAAG,EAAE,EAAE;IACzBoK,MAAM,CACF,uBAAuB,CAAC;IAC5B;EACJ,CAAC,MAAM,IAAI,CAAC,aAAa,CAACpI,IAAI,CAC1ByX,IAAI,CAAC,EAAE;IACPrP,MAAM,CACF,sBAAsB,CAAC;IAC3B;EACJ,CAAC,MAAM,IAAItG,cAAc,KACrB2V,IAAI,EAAE;IACNrP,MAAM,CACF,6BAA6B,CAChC;IACD;EACJ,CAAC,MAAM,IAAIrG,aAAa,KACpB0V,IAAI,EAAE;IACN8R,YAAY,EAAE;IACd;EACJ;EAEA,IAAME,UAAU,GAAG,SAAbA,UAAUA,CAAA,EACkB;IAAA,IADdxO,IAAI,GAAAjW,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MACA,KAAK;IACzB,IAAIiW,IAAI,EAAE;MACNqO,KAAK,CAACpV,YAAY,CACd,UAAU,EACV,EAAE,CAAC;MACPD,MAAM,CAACC,YAAY,CACf,UAAU,EACV,EAAE,CAAC;MACPD,MAAM,CAAClC,SAAS,GACZ,WAAW;IACnB,CAAC,MAAM;MACHuX,KAAK,CACAjV,eAAe,CACZ,UAAU,CAAC;MACnBJ,MAAM,CACDI,eAAe,CACZ,UAAU,CAAC;MACnBJ,MAAM,CAAClC,SAAS,GACZ,WAAW;IACnB;EACJ,CAAC;EAED0X,UAAU,CAAC,IAAI,CAAC;EAChB,IAAIxS,uBAAuB,EAAE,KAAK,CAAC,EAAE;IACjCO,YAAY,CAAC,UAACzL,CAAC,EAAK;MAChB;MACA,IAAIA,CAAC,EAAE;QACH,IAAMjN,IAAI,GACN,SADEA,IAAIA,CAAA,EACA;UACFgD,cAAc,GAEV2V,IAAI;UACRrP,MAAM,4EAAA1C,MAAA,CAC8C+R,IAAI,kGACvD;QACL,CAAC;QACL,IAAI,CAACrW,eAAe,EAAE;UAClBtC,IAAI,EAAE;UACN4qB,cAAc,CAEVjS,IAAI,EACJ,KAAK,CACR;QACL,CAAC,MAAM,IACH+R,kBAAkB,CACdzd,CAAC,CACI8K,QAAQ,EACbjU,cAAc,CACjB,EAAE;UACH9D,IAAI,EAAE;UACN,IAAM8P,EAAE,GACJlE,QAAQ,CACHmE,cAAc,CACX,sBAAsB,CACzB;UACTD,EAAE,CAACO,SAAS,iTAAAzJ,MAAA,CAG4C+R,IAAI,+JAAA/R,MAAA,CAGlDqG,CAAC,CAACoU,QAAQ,wCACd;QACV,CAAC,MAAM;UACH/X,MAAM,CACF,6BAA6B,CAChC;QACL;MACJ,CAAC,MAAM;QACHrG,aAAa,GACT0V,IAAI;QACR8R,YAAY,EAAE;MAClB;MAEAE,UAAU,EAAE;IAChB,CAAC,EAAEhS,IAAI,CAAC;EACZ,CAAC,MAAM;IACHrP,MAAM,CAAC,iCAAiC,CAAC;IACzCqhB,UAAU,EAAE;EAChB;AACJ,CAAC;AAED,IAAME,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAA,EACiB;EAAA,IADblO,OAAO,GAAAzW,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MACH,IAAI;EAClC,IAAMskB,KAAK,GAAG5e,QAAQ,CACjBmE,cAAc,CACX,cAAc,CAAC;EACvB,IAAMoF,MAAM,GAAGvJ,QAAQ,CAClBmE,cAAc,CACX,eAAe,CAAC;EAExB,IAAI4M,OAAO,EAAE;IACT6N,KAAK,CAACpV,YAAY,CACd,aAAa,EACb,MAAM,CAAC;IACXD,MAAM,CAACC,YAAY,CACf,SAAS,EACT,eAAe,CAAC;IACpBoV,KAAK,CAACjV,eAAe,CACjB,UAAU,CAAC;IACfJ,MAAM,CAACI,eAAe,CAClB,UAAU,CAAC;EACnB,CAAC,MAAM;IACHiV,KAAK,CAACpV,YAAY,CACd,UAAU,EACV,EAAE,CAAC;IACPoV,KAAK,CAACpV,YAAY,CACd,aAAa,EACb,mBAAmB,CAAC;IACxBD,MAAM,CAACC,YAAY,CACf,UAAU,EACV,EAAE,CAAC;EACX;AACJ,CAAC;AAED,IAAM0V,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAClBxN,UAAU,EAAK;EACf,KAAK,IAAIne,CAAC,GAAG,CAAC,EAAEA,CAAC,GACjByE,oBAAoB,CACf1E,MAAM,EAAEC,CAAC,EAAE,EAAE;IACd,IAAI2K,QAAQ,CACJlG,oBAAoB,CAChBzE,CAAC,CAAC,CAACyb,EAAE,CACZ,KACD9Q,QAAQ,CACJwT,UAAU,CAAC,EACjB;MACE,OAAO1Z,oBAAoB,CACvBzE,CAAC,CAAC;IACV;EACJ;AACJ,CAAC;AAED,IAAM4rB,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAA,EACgB;EAAA,IADZ/N,IAAI,GAAA9W,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,CAAC;EAAA,IACR8kB,GAAG,GAAA9kB,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,CAAC;EAChC,IAAIqkB,UAAU,GAAG,EAAE;EACnB,IAAIjoB,eAAe,EAAE;IACjBioB,UAAU,GAAG,IAAI;EACrB;EACA,IAAMpV,MAAM,GAAGvJ,QAAQ,CAClBmE,cAAc,CACX,uBAAuB,GACvBwa,UAAU,CAAC;EACnB,IAAIzS,QAAQ,GAAGlM,QAAQ,CAClBmE,cAAc,CACX,iBAAiB,GACjBwa,UAAU,CAAC,CACd/qB,KAAK,CAACgpB,IAAI,EAAE;EACjB,IAAI9a,KAAK,GAAG9B,QAAQ,CACfmE,cAAc,CACX,cAAc,GACdwa,UAAU,CAAC,CACd/qB,KAAK,CAACgpB,IAAI,EAAE;EACjB,IAAIvQ,MAAM,GAAG,EAAE;EACfH,QAAQ,GAAGjU,qBAAqB,CAACoW,QAAQ;EACzC,IAAMgR,OAAO,GAAG,KAAK;EACrB,IAAMlC,SAAS,GACX,+BAA+B;EAEnC,IAAI;IACA9Q,MAAM,GAAGjV,cAAc,CAClBwlB,IAAI,EAAE;EACf,CAAC,CAAC,OAAO1b,CAAC,EAAE,CACZ;EAEA,IAAIkQ,IAAI,KAAK,CAAC,EAAE;IACZ,IAAI,CAACmF,MAAM,CAACC,SAAS,CACjB4I,GAAG,CAAC,IAAI,CACR7I,MAAM,CAACC,SAAS,CAAC4I,GAAG,CAAC,EAAE;MACvB1hB,MAAM,CACF,uBAAuB,CAC1B;MACD;IACJ,CAAC,MAAM,IAAI,CAAC,GAAGrC,IAAI,CAAC+gB,IAAI,CACpBgD,GAAG,CAAC,EAAE;MACN1hB,MAAM,CACF,0CAA0C,CAC7C;MACD;IACJ,CAAC,MAAM,IAAI0hB,GAAG,GAAGC,OAAO,EAAE;MACtB3hB,MAAM,8GAAA1C,MAAA,CACsBmiB,SAAS,EAAAniB,MAAA,CAAGqkB,OAAO,aAC9C;MACD;IACJ;EACJ;EAEA,IAAI,CAACnT,QAAQ,CAAC5Y,MAAM,EAAE;IAClBoK,MAAM,CACF,gCAAgC,CACnC;IACD;EACJ,CAAC,MAAM,IAAIwO,QAAQ,CAAC5Y,MAAM,GACtB,EAAE,EAAE;IACJoK,MAAM,CACF,6BAA6B,CAChC;IACD;EACJ,CAAC,MAAM,IAAIwO,QAAQ,CAAC5Y,MAAM,GAAG,CAAC,EAAE;IAC5BoK,MAAM,CACF,8BAA8B,CACjC;IACD;EACJ,CAAC,MAAM,IAAI,CAAC,aAAa,CAACpI,IAAI,CAC1B4W,QAAQ,CAAC,EAAE;IACXxO,MAAM,CACF,iCAAiC,CACpC;IACD;EACJ;EAEA,IAAI,CAACoE,KAAK,CAACxO,MAAM,EAAE;IACfoK,MAAM,CACF,8BAA8B,CACjC;IACD;EACJ,CAAC,MAAM,IAAI,CAACmE,aAAa,CACrBC,KAAK,CAAC,EAAE;IACRpE,MAAM,CACF,sCAAsC,CACzC;IACD;EACJ;EAEA,IAAI,CAAC2O,MAAM,EAAE;IACTA,MAAM,GAAG,EAAE;EACf;EACA,IAAI3V,eAAe,EAAE;IACjByV,QAAQ,GAAG8F,IAAI,CAAC2D,KAAK,OAAA5a,MAAA,CACZ9C,cAAc,UAAA8C,MAAA,CAAMokB,GAAG,OAC/B;EACL,CAAC,MAAM;IACHjT,QAAQ,GACJuJ,eAAe,EAAE;EACzB;EAEAnM,MAAM,CAACC,YAAY,CAAC,UAAU,EAC1B,EAAE,CAAC;EACPD,MAAM,CAAClC,SAAS,GACZ,qBAAqB;EAEzB,IAAMiY,UAAU,GACZJ,gBAAgB,CACZhnB,cAAc,CAAC;EACvB+T,cAAc,CAAC,UACPsT,aAAa,EAAK;IAClB,IAAIA,aAAa,EAAE;MACfhW,MAAM,CAACI,eAAe,CAAC,UAAU,CAAC;MAClCJ,MAAM,CAAClC,SAAS,GAAG,UAAU;MAC7B,IAAIkY,aAAa,CAACC,UAAU,EAAE;QAC1BC,uBAAuB,EAAE;MAC7B,CAAC,MAAM;QACHtoB,kBAAkB,GAAGooB,aAAa,CAACnd,GAAG;QACtCmH,MAAM,CAACC,YAAY,CACf,SAAS,EACT,qBAAqB,CACxB;MACL;IACJ,CAAC,MAAM;MACH9L,MAAM,CACF,gDAAgD,CACnD;MACD4e,uBAAuB,CACtBlL,IAAI,EACDmL,MAAM,GACF,IAAI,CAAC;IACjB;EACJ,CAAC,EAAErQ,QAAQ,EAAEC,QAAQ,EACrBmT,UAAU,CAAClT,SAAS,EACpBtK,KAAK,EACLuK,MAAM,CAAC;AACf,CAAC;AAED,IAAMoT,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAA,EAAS;EAClC,IAAM1W,SAAS,GAAG/I,QAAQ,CAACmE,cAAc,CAAC,iBAAiB,CAAC;EAE5D4E,SAAS,CAACtE,SAAS,shBAalB;EAEDib,sBAAsB,EAAE;EACxBjW,qBAAqB,CAAC,UAAUvI,CAAC,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC;EAC1DlB,QAAQ,CAACgJ,aAAa,CAAC,cAAc,CAAC,CAAC3B,SAAS,GAAG,EAAE;EACrDrH,QAAQ,CAACgJ,aAAa,CAAC,gBAAgB,CAAC,CAAC/B,SAAS,CAACC,GAAG,CAAC,gBAAgB,CAAC;AAC5E,CAAC;AAED,IAAMwY,sBAAsB,GAAG,SAAzBA,sBAAsBA,CAAA,EAAS;EACjC7K,uBAAuB,CAAC,SAAS,CAAC;EAClCJ,WAAW,EAAE;EACb6H,uBAAuB,EAAE;AAC7B,CAAC;AAED,IAAMqD,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAA,EAAS;EAC5BtmB,MAAM,CAACumB,IAAI,CAACzoB,kBAAkB,EAC1B,QAAQ,CAAC;EAEb,IAAM0oB,QAAQ,GAAG7f,QAAQ,CACpBmE,cAAc,CACX,0BAA0B,CAC7B;EACL,IAAM2b,SAAS,GAAG9f,QAAQ,CACrBmE,cAAc,CACX,qBAAqB,CAAC;EAC9B,IAAM4b,OAAO,GAAG/f,QAAQ,CACnBmE,cAAc,CACX,iBAAiB,CAAC;EAC1B,IAAM2H,KAAK,GAAG9L,QAAQ,CACjBgJ,aAAa,CACV,cAAc,CAAC;EAEvB,IAAMgX,gBAAgB,GAClB,SADEA,gBAAgBA,CAAA,EACZ;IACFH,QAAQ,CAACpb,SAAS,GAAG,EAAE;IACvBqH,KAAK,CAACzE,SAAS,GAAG,EAAE;IACpByY,SAAS,CAACzY,SAAS,GACf,2BAA2B;IAC/B0Y,OAAO,CAAC3f,KAAK,CAACC,OAAO,GACjB,EAAE;IACNL,QAAQ,CACHgJ,aAAa,CACV,yBAAyB,CAC5B,CACAQ,YAAY,CAAC,KAAK,EACf,6BAA6B,CAChC;EACT,CAAC;EAEL,IAAMyW,mBAAmB,GACrB,SADEA,mBAAmBA,CAAA,EACf;IACF,IAAMvD,MAAM,GAAG,CACX,YAAY,EACZ,mBAAmB,EACnB,gBAAgB,EAChB,gBAAgB,CACnB;IACD,KAAK,IAAInpB,CAAC,GAAG,CAAC,EAAEA,CAAC,GACjBmpB,MAAM,CACDppB,MAAM,EAAEC,CAAC,EAAE,EAAE;MACdyM,QAAQ,CACHmE,cAAc,CACXuY,MAAM,CAACnpB,CAAC,CAAC,CAAC,CACbK,KAAK,GAAG,EAAE;IACnB;EACJ,CAAC;EAEL8rB,sBAAsB,EAAE;EACxBO,mBAAmB,EAAE;EACrBD,gBAAgB,EAAE;AACtB,CAAC;AAED,IAAM3O,0BAA0B,GAC5B,SADEA,0BAA0BA,CAAA,EACtB;EACF,IAAM6O,eAAe,GAAGnrB,MAAM,CACzBqE,IAAI,CACDsc,eAAe,EAAE,CAAC;EAC1B,IAAMyK,eAAe,GACjBvpB,qBAAqB;EACzB,IAAMoV,QAAQ,GAAG,EAAE;EAEnB,KAAK,IAAIzY,CAAC,GAAG,CAAC,EAAEA,CAAC,GACjB4sB,eAAe,CACV7sB,MAAM,EAAEC,CAAC,EAAE,EAAE;IACdyY,QAAQ,CAAC2F,IAAI,CACTwO,eAAe,CAAC5sB,CAAC,CAAC,CACbyb,EAAE,CAAC;EAChB;EAEA,KAAK,IAAIoR,GAAC,GAAG,CAAC,EAAEA,GAAC,GACjBF,eAAe,CACV5sB,MAAM,EAAE8sB,GAAC,EAAE,EAAE;IACd,IAAI,CAACpU,QAAQ,CAAC8B,QAAQ,CAClB5P,QAAQ,CACJgiB,eAAe,CACXE,GAAC,CAAC,CAAC,CAAC,EAAE;MACd,IAAMlK,IAAI,GAAGjE,IAAI,CAAC2D,KAAK,CACnBC,OAAO,CAACC,GAAG,CACP/f,WAAW,CAAC,CACnB;MACD,OAAOmgB,IAAI,CAAChY,QAAQ,CAChBgiB,eAAe,CACXE,GAAC,CAAC,CAAC,CAAC;MACZvK,OAAO,CAACtT,GAAG,CAACxM,WAAW,EACnBkc,IAAI,CAACC,SAAS,CACVgE,IAAI,CAAC,CACZ;MACDpb,OAAO,CAAC4X,GAAG,WAAA1X,MAAA,CACGklB,eAAe,CAACE,GAAC,CAAC,gBAC/B;IACL;EACJ;AACJ,CAAC;AAEL,IAAM9C,UAAU,GAAG,SAAbA,UAAUA,CAAA,EAAS;EACrB,IAAIE,GAAG,GAAG,CAAC,CAAC;EAEZ,IAAI;IACAA,GAAG,GAAGvL,IAAI,CAAC2D,KAAK,CAACC,OAAO,CACnBC,GAAG,CACA/f,WAAW,CAAC,CAAC;EACzB,CAAC,CAAC,OAAOmL,CAAC,EAAE,CACZ;EAEAqc,kBAAkB,CAACC,GAAG,CAAC;EACvByB,oBAAoB,CAAC,IAAI,CAAC;AAC9B,CAAC;AAED,IAAMD,cAAc,GAAG,SAAjBA,cAAcA,CAAA,EAC+B;EAAA,IAD3B3S,MAAM,GAAA/R,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,IAAI;EAAA,IACb+lB,eAAe,GAAA/lB,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,IAAI;EAC1C,IAAM4b,IAAI,GAAGR,eAAe,EAAE;EAC9B,IAAM4K,SAAS,GAAGvrB,MAAM,CAACqE,IAAI,CACzB8c,IAAI,CAAC;EACT,IAAM2J,QAAQ,GAAG7f,QAAQ,CACpBmE,cAAc,CACX,kBAAkB,CAAC;EAC3B,IAAMoc,iBAAiB,GAAG,CACtBvgB,QAAQ,CACHmE,cAAc,CACX,iBAAiB,CAAC,EAC1BnE,QAAQ,CAACmE,cAAc,CACnB,cAAc,CAAC,EACnBnE,QAAQ,CAACmE,cAAc,CACnB,cAAc,CAAC,CACtB;EACD0Q,uBAAuB,CACnB,eAAe,CAAC;EACpBJ,WAAW,EAAE;EACboL,QAAQ,CAACpb,SAAS,GAAG,EAAE;EACvB,IAAI+b,SAAS,GAAG,CAAC;EAEjB,KAAK,IAAIjtB,CAAC,GAAG,CAAC,EAAEA,CAAC,GACjBgtB,iBAAiB,CACZjtB,MAAM,EAAEC,CAAC,EAAE,EAAE;IACdgtB,iBAAiB,CAAChtB,CAAC,CAAC,CACfmR,gBAAgB,CACb,OAAO,EACP,UAACxD,CAAC,EAAK;MACHob,uBAAuB,EACrB;IACN,CAAC,CAAC;EACd;EAEA,KAAK,IAAImE,GAAC,GAAG,CAAC,EAAEA,GAAC,GAAGH,SAAS,CACxBhtB,MAAM,EAAEmtB,GAAC,EAAE,EAAE;IACd,IAAMniB,IAAI,GACN+d,wBAAwB,CACpBiE,SAAS,CAACG,GAAC,CAAC,CAAC;IACrB,IAAMlP,KAAK,GAAGjT,IAAI,CAACiT,KAAK,GACpB2E,IAAI,CACA5X,IAAI,CAAC0Q,EAAE,CAAC;IAChBwR,SAAS,IAAIjP,KAAK;IAClBsO,QAAQ,CAACpb,SAAS,GACdob,QAAQ,CACHpb,SAAS,oQAAAzJ,MAAA,CAKKsD,IAAI,CAACqE,MAAM,wCAAA3H,MAAA,CAChBsD,IAAI,CAAClJ,IAAI,2GAAA4F,MAAA,CAEqCsD,IAAI,CAACmT,WAAW,uIAAAzW,MAAA,CAGlEuW,KAAK,OAAAvW,MAAA,CAAIO,OAAO,CAACgW,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,CAAC,kCAAAvW,MAAA,CAC7Ckb,IAAI,CAAC5X,IAAI,CAAC0Q,EAAE,CAAC,yCAEhC;EACL;EAEA,IAAM0R,gBAAgB,GAClB,SADEA,gBAAgBA,CAAA,EACZ;IACFb,QAAQ,CAACpb,SAAS,GACdob,QAAQ,CAACpb,SAAS,yRAAAzJ,MAAA,CAGkCqR,MAAM,wDAExD;EACV,CAAC;EAEL,IAAMsU,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAS;IACxBd,QAAQ,CAACpb,SAAS,GACdob,QAAQ,CAACpb,SAAS,0JAAAzJ,MAAA,CAEJwlB,SAAS,OAAAxlB,MAAA,CAAIO,OAAO,CAACilB,SAAS,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,CAAC,iCACnE;EACd,CAAC;EAED,IAAInU,MAAM,EAAE;IACRqU,gBAAgB,EAAE;EACtB;EAEAC,aAAa,EAAE;EAEf,IAAIN,eAAe,EAAE;IACjBphB,OAAO,CAACnI,YAAY,CAAC;IACrBkJ,QAAQ,CACHgJ,aAAa,CACV,uBAAuB,CAC1B,CACAQ,YAAY,CACT,aAAa,EACb1S,YAAY,CAAC,CAAC,CAAC,CAAC;EAC5B;AACJ,CAAC;AAED,IAAM8pB,cAAc,GAAG,SAAjBA,cAAcA,CAAA,EAAiB;EAAA,IAAbxP,IAAI,GAAA9W,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,CAAC;EAC5B,IAAMiP,MAAM,GAAGvJ,QAAQ,CAClBmE,cAAc,CACX,yBAAyB,CAC5B;EACL,IAAIib,GAAG,GAAGpf,QAAQ,CACbmE,cAAc,CACX,YAAY,CAAC;EAErB,IAAI,CAACib,GAAG,CAACxrB,KAAK,IAAI,CAAC,SAAS,CACvB0B,IAAI,CACD8pB,GAAG,CAACxrB,KAAK,CAAC,EAAE;IAChBwrB,GAAG,GAAG,CAAC;EACX,CAAC,MAAM;IACHA,GAAG,GAAGA,GAAG,CAACxrB,KAAK;EACnB;EAEA2V,MAAM,CAACC,YAAY,CAAC,SAAS,yBAAAxO,MAAA,CACFoW,IAAI,QAAApW,MAAA,CAAMoW,IAAI,KAAK,CAAC,GAAI,CAAC,GAAGgO,GAAG,OACzD;AACL,CAAC;AAED,IAAMyB,eAAe,GAAG,SAAlBA,eAAeA,CAAIC,SAAS,EACTC,OAAO,EAC3B;EAAA,IAD6BV,eAAe,GAAA/lB,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,IAAI;EAEpD/B,iBAAiB,GAAGuoB,SAAS;EAE7B,IAAM1B,GAAG,GAAGpf,QAAQ,CACfmE,cAAc,CACX,YAAY,CAAC;EACrB,IAAM6c,cAAc,GAAGhhB,QAAQ,CAC1BmE,cAAc,CACX,mBAAmB,CAAC;EAC5B,IAAMwc,aAAa,GAAG3gB,QAAQ,CACzBmE,cAAc,CACX,sBAAsB,CAAC;EAC/B,IAAM8c,sBAAsB,GACxBjhB,QAAQ,CAACmE,cAAc,CACnB,iCAAiC,CACpC,CACI8C,SAAS;EAClB,IAAMia,kBAAkB,GACpBlhB,QAAQ,CACHmE,cAAc,CACX,kBAAkB,CAAC;EAC/B,IAAMgd,mBAAmB,GACrBnhB,QAAQ,CAACmE,cAAc,CAAC,mBAAmB,CAAC;EAChD,IAAIid,iBAAiB;EACrB,IAAMb,iBAAiB,GAAG,CACtBvgB,QAAQ,CACHmE,cAAc,CACX,YAAY,CAAC,EACrBnE,QAAQ,CACHmE,cAAc,CACX,mBAAmB,CACtB,EACLnE,QAAQ,CAACmE,cAAc,CACnB,gBAAgB,CAAC,EACrBnE,QAAQ,CAACmE,cAAc,CACnB,gBAAgB,CAAC,CACxB;EACD,IAAM2H,KAAK,GAAG9L,QAAQ,CACjBgJ,aAAa,CACV,cAAc,CAAC;EACvB,IAAIqY,SAAS;EAEb,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CACdC,UAAU,EAAK;IACfzV,KAAK,CAACzE,SAAS,GAAGyE,KAAK,CAClBzE,SAAS,CAACxN,OAAO,CACd,cAAc,CAAC,CAClB+iB,IAAI,EAAE;IACX9Q,KAAK,CAACzE,SAAS,MAAArM,MAAA,CACR8Q,KAAK,CAACzE,SAAS,QAAArM,MAAA,CAAKumB,UAAU,MAAG;EAC5C,CAAC;EAEDrpB,cAAc,GAAG6oB,OAAO;EACxB5oB,mBAAmB,GAAG+mB,gBAAgB,CAAC6B,OAAO,CAAC,CAAC3rB,IAAI;EAEpD+rB,mBAAmB,CAACvtB,KAAK,GAAG,CAAC;EAC7B2Y,uBAAuB,EAAE;EAEzB,IAAIuU,SAAS,KAAK,CAAC,IAAIA,SAAS,KAAK,CAAC,EAAE;IACpCK,mBAAmB,CAAC3X,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC;IAChDmX,aAAa,CAACvgB,KAAK,CACdC,OAAO,GACR,EAAE;IACN4gB,sBAAsB,CACjBtf,MAAM,CACH,UAAU,CAAC;IACnBsf,sBAAsB,CAAC/Z,GAAG,CACtB,QAAQ,CAAC;IACb,IAAMsa,gBAAgB,GAAGxhB,QAAQ,CAACmE,cAAc,CAAC,kBAAkB,CAAC;IACpE,IAAI2c,SAAS,KAAK,CAAC,EAAE;MACjBM,iBAAiB,y1BAGhB;MACDC,SAAS,GAAG,QAAQ;MACpBG,gBAAgB,CAACna,SAAS,GAAG,OAAO;MACpC;MACA+X,GAAG,CAAC1a,gBAAgB,CAChB,OAAO,EACP,UAACxD,CAAC,EAAK;QACH0f,cAAc,EACZ;MACN,CAAC,CAAC;IACV,CAAC,MAAM,IAAIE,SAAS,KAAK,CAAC,EAAE;MACxBM,iBAAiB,q2BAGhB;MACDC,SAAS,GAAG,OAAO;MACnBG,gBAAgB,CAACna,SAAS,GAAG,YAAY;MACzC2Z,cAAc,CACTtc,gBAAgB,CACb,OAAO,EACP,UAACxD,CAAC,EAAK;QACH0f,cAAc,CACVE,SAAS,CACZ;MACL,CAAC,CAAC;IACd;EACJ,CAAC,MAAM,IAAIA,SAAS,KAAK,CAAC,EAAE;IACxBK,mBAAmB,CAACxX,eAAe,CAAC,UAAU,CAAC;IAC/CgX,aAAa,CAACvgB,KAAK,CACdC,OAAO,GACR,MAAM;IACV4gB,sBAAsB,CACjBtf,MAAM,CACH,QAAQ,CAAC;IACjBsf,sBAAsB,CAAC/Z,GAAG,CACtB,UAAU,CAAC;IACfua,QAAQ,GAAGvC,gBAAgB,CAAChnB,cAAc,CAAC,CAACuZ,WAAW;IACvD,IAAI,CAACgQ,QAAQ,EAAE;MACXA,QAAQ,GAAG,EAAE;IACjB;IAEAL,iBAAiB,mXAAApmB,MAAA,CAIPymB,QAAQ,oCAEjB;IACDJ,SAAS,GAAGlpB,mBAAmB;IAC/B6oB,cAAc,CACTtc,gBAAgB,CACb,OAAO,EACP,UAACxD,CAAC,EAAK;MACH0f,cAAc,CACVE,SAAS,CACZ;IACL,CAAC,CAAC;EACd;EACAI,kBAAkB,CAACzc,SAAS,GACxB2c,iBAAiB,CACZtnB,UAAU,CACP,IAAI,EAAE,EAAE,CAAC;EAErB,KAAK,IAAIvG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgtB,iBAAiB,CAACjtB,MAAM,EAAEC,CAAC,EAAE,EAAE;IAC/CgtB,iBAAiB,CAAChtB,CAAC,CAAC,CACfmR,gBAAgB,CACb,OAAO,EACP,UAACxD,CAAC,EAAK;MACHob,uBAAuB,CACtBwE,SAAS,CAAC;IACf,CAAC,CAAC;EACd;EAEAjM,uBAAuB,CACnB,eAAe,CAAC;EACpBJ,WAAW,EAAE;EAEb,IAAI4L,eAAe,EAAE;IACjB,IAAMqB,UAAU,GAAG,KAAK;IACxB,IAAMC,SAAS,GAAG3hB,QAAQ,CAACgJ,aAAa,CAAC,yBAAyB,CAAC;IACnE,IAAI0Y,UAAU,EAAE;MACZziB,OAAO,CAACnI,YAAY,CAAC;MACrB6qB,SAAS,CACJnY,YAAY,CACT,aAAa,EACb1S,YAAY,CAAC,CAAC,CAAC,CAClB;IACT,CAAC,MAAM;MACH6qB,SAAS,CACJnY,YAAY,CACT,aAAa,EACbvR,qBAAqB,CAACoW,QAAQ,CACjC;MACLsT,SAAS,CAAC/tB,KAAK,GAAGqE,qBAAqB,CAACoW,QAAQ;MAChDsT,SAAS,CACJnY,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC;IACrC;EACJ;EAEA8S,uBAAuB,CACnBwE,SAAS,EACT,KAAK,EAAE,IAAI,CAAC;EAChBQ,YAAY,CAACD,SAAS,CAAC;AAC3B,CAAC;AAED,IAAMO,QAAQ,GAAG,SAAXA,QAAQA,CAAInE,SAAS,EACgB;EAAA,IAAzBoE,YAAY,GAAAvnB,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,KAAK;EAClC,IAAM4J,EAAE,GAAGlE,QAAQ,CACdmE,cAAc,CACXsZ,SAAS,CAAC;EAClB,IAAIqE,GAAG,GACH,2BAA2B;EAE/B,KAAK,IAAIvuB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0C,QAAQ,CACvB3C,MAAM,EAAEC,CAAC,EAAE,EAAE;IACd,IAAI,CAACsuB,YAAY,IAAItuB,CAAC,EAAE;MACpBuuB,GAAG,GAAG,EAAE;IACZ;IAEA5d,EAAE,CAACO,SAAS,GAAGP,EAAE,CACZO,SAAS,gBAAAzJ,MAAA,CAAe/E,QAAQ,CAAC1C,CAAC,CAAC,CAAC2C,IAAI,qDAAA8E,MAAA,CACZ8mB,GAAG,iEAAA9mB,MAAA,CACY/E,QAAQ,CAAC1C,CAAC,CAAC,CAAC6B,IAAI,sDAAA4F,MAAA,CACjC/E,QAAQ,CAAC1C,CAAC,CAAC,CAAC6B,IAAI,8BACtC;EACb;AACJ,CAAC;AAED,IAAMkV,UAAU,GAAG,SAAbA,UAAUA,CAAA,EAAS;EACrB,IAAI,CAAC3S,aAAa,EAAE;IAChBA,aAAa,GAAG,IAAI;IACpBL,YAAY,GAAG,EAAE;IACjB0L,SAAS,CAAC,UAAC+e,MAAM,EAAK;MAClBzqB,YAAY,GACRyqB,MAAM;MACV9d,UAAU,CAAC,YAAW;QAClBtM,aAAa,GAAG,KAAK;MACzB,CAAC,EAAE,IAAI,CAAC;IACZ,CAAC,CAAC;EACN;AACJ,CAAC;AAED,IAAMqqB,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAAS;EACtB,IAAIlsB,iBAAiB,CAACgY,QAAQ,CACtBzU,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAC3B,IACD9C,OAAO,EAAE;IACTuJ,QAAQ,CAACmE,cAAc,CACnB,wBAAwB,CAC3B,CACIkD,SAAS,GACV,6BAA6B;IACjCrH,QAAQ,CAACmE,cAAc,CACnB,sBAAsB,CACzB,CACIkD,SAAS,GACV,2EAA2E;EACnF;EAEAua,QAAQ,CAAC,kBAAkB,EACvB,IAAI,CAAC;EACTA,QAAQ,CACJ,sBAAsB,CAAC;AAC/B,CAAC;AAED,IAAMK,UAAU,GAAG,SAAbA,UAAUA,CAAA,EAAS;EACrBjiB,QAAQ,CAACgJ,aAAa,CAAC,MAAM,CAAC,CACzBQ,YAAY,CAAC,OAAO,EAAE,EAAE,CAAC;EAC9BxJ,QAAQ,CAACgJ,aAAa,CAAC,QAAQ,CAAC,CAC3BQ,YAAY,CAAC,OAAO,EAAE,EAAE,CAAC;EAC9B,IAAM0Y,KAAK,GACP,kJAC6C;EACjDliB,QAAQ,CAACmE,cAAc,CACnB,iBAAiB,CAAC,CACjBM,SAAS,2DAAAzJ,MAAA,CACWknB,KAAK,oGAAgC;EAC9D,IAAIxjB,UAAU,EAAE;IACZsB,QAAQ,CAACmE,cAAc,CACnB,eAAe,CAAC,CACfkD,SAAS,GACV,4CAA4C;EACpD;AACJ,CAAC;AAED,IAAM8a,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAA,EAAS;EAC9B,IAAMC,SAAS,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC;EACnC,IAAMC,YAAY,GAAGriB,QAAQ,CACxBgJ,aAAa,CACV,yBAAyB,CAC5B,CACAA,aAAa,CACV,mBAAmB,CAAC;EAE5B,IAAMsZ,WAAW,GAAG,SAAdA,WAAWA,CAAIxN,IAAI,EAAK;IAC1B,IAAIA,IAAI,KAAK,MAAM,EAAE;MACjByN,IAAI,CAACtb,SAAS,CAACC,GAAG,CAAC,WAAW,CAAC;MAC/Bmb,YAAY,CAACxd,OAAO,GAAG,IAAI;IAC/B,CAAC,MAAM;MACH0d,IAAI,CAACtb,SAAS,CACTtF,MAAM,CACH,WAAW,CACd;MACL0gB,YAAY,CAACxd,OAAO,GAAG,KAAK;IAChC;EACJ,CAAC;EAAC,IAAA2d,MAAA,YAAAA,OAAAjvB,CAAA,EAGgB;IACd,IAAM2R,QAAQ,GAAG7L,MAAM,CAClBopB,UAAU,2BAAAznB,MAAA,CACmBonB,SAAS,CAAC7uB,CAAC,CAAC,OACzC;IACL2R,QAAQ,CAACR,gBAAgB,CACrB,QAAQ,EAAE,UAAC7Q,CAAC;MAAA,OAAKA,CAAC,CACT6uB,OAAO,IACZJ,WAAW,CACPF,SAAS,CAAC7uB,CAAC,CAAC,CAAC;IAAA,EAAC;EAC9B,CAAC;EAXD,KAAK,IAAIA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6uB,SAAS,CACxB9uB,MAAM,EAAEC,CAAC,EAAE;IAAAivB,MAAA,CAAAjvB,CAAA;EAAA;AAWpB,CAAC;AAED,IAAMovB,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAA,EAAuB;EAAA,IAAnB9V,UAAU,GAAAvS,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,CAAC;EACtC,IAAIsoB,sBAAsB;EAC1B,IAAMC,sBAAsB,GAAG,KAAK;EAEpC,IAAMhD,QAAQ,GAAG7f,QAAQ,CACpBmE,cAAc,CACX,0BAA0B,CAC7B;EACL,IAAM2b,SAAS,GAAG9f,QAAQ,CACrBmE,cAAc,CACX,qBAAqB,CAAC;EAC9B,IAAM4b,OAAO,GAAG/f,QAAQ,CACnBmE,cAAc,CACX,iBAAiB,CAAC;EAC1B,IAAM2H,KAAK,GAAG9L,QAAQ,CACjBgJ,aAAa,CACV,cAAc,CAAC;EAEvBF,qBAAqB,CAAC,IAAI,CAAC;EAE3B,IAAMga,UAAU,GAAG,SAAbA,UAAUA,CAAIC,YAAY,EAAK;IACjC,IAAMC,CAAC,GAAID,YAAY,CAAE/gB,WAAW,EAAE;IAEtC,IAAIghB,CAAC,CAAClV,QAAQ,CAAC,OAAO,CAAC,EAAE;MACrB,OAAO,CAAC;IACZ,CAAC,MAAM;MACH,OAAO,CAAC;IACZ;EACJ,CAAC;EAED,IAAMmV,cAAc,GAAG,SAAjBA,cAAcA,CAAA,EAAS;IACzB,IAAMC,WAAW,GACbN,sBAAsB,CACjBtI,OAAO,CAACjI,KAAK;IACtB,IAAM8Q,YAAY,GACdP,sBAAsB,CACjBtI,OAAO,CAACllB,IAAI;IAErB,IAAI8tB,WAAW,IACXA,WAAW,CAAC5vB,MAAM,EACpB;MACE0M,QAAQ,CAACgJ,aAAa,CACd,sBAAsB,CAAC,CAAC9I,GAAG,GAAGgjB,WAAW;MACjD,IACIE,aAAa,GAAGpjB,QAAQ,CAACgJ,aAAa,CAC1B,2BAA2B,CAAC;MAC5C,IAAI6Z,sBAAsB,EAAE;QACxBO,aAAa,CAAC/b,SAAS,GAAG8b,YAAY;MAC1C,CAAC,MAAM;QACHC,aAAa,CAAChjB,KAAK,CAAC6T,YAAY,GAAG,KAAK;MAC5C;IACJ;EACJ,CAAC;EAED,IAAMoP,YAAY,GAAG,SAAfA,YAAYA,CACd/W,OAAO,EAAK;IACZ,IAAIA,OAAO,CAACgX,MAAM,IACdzW,UAAU,IAAI3O,QAAQ,CAACoO,OAAO,CAAC0C,EAAE,CAAC,EAAE;MACpC4T,sBAAsB,GAAGtW,OAAO;MAChCwT,SAAS,CAACzY,SAAS,GACf,mDAAmD;MACvD0Y,OAAO,CAAC3f,KAAK,CAACC,OAAO,GAAG,EAAE;MAE1B,IAAMkjB,mBAAmB,GAAGvjB,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MAC5DsjB,mBAAmB,CAACvU,EAAE,GAAG,2BAA2B;MACpDuU,mBAAmB,CAAC/Z,YAAY,CAAC,OAAO,EAAE,4DAA4D,CAAC;MACvG+Z,mBAAmB,CAAClc,SAAS,GAAG,cAAc;MAE9C,IAAMmc,SAAS,GACXV,UAAU,CAACxW,OAAO,CAACgO,OAAO,CAACllB,IAAI,CAAC;MAEpC,IAAIquB,eAAe,6UAAAzoB,MAAA,CAOHsR,OAAO,CAACoX,cAAc,iDAErC;MAED,IAAIC,YAAY,6SAAA3oB,MAAA,CAG4DsR,OAAO,CAACsX,QAAQ,OAAA5oB,MAAA,CAAIO,OAAO,CAAC+Q,OAAO,CAACsX,QAAQ,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,CAAC,mDAEpJ;MAED,IACIltB,eAAe,EAAE;QACjB,IAAI8sB,SAAS,KAAK,CAAC,EAAE;UACjBG,YAAY,wQAAA3oB,MAAA,CAGgEsR,OAAO,CAACsX,QAAQ,OAAA5oB,MAAA,CAAIO,OAAO,CAAC+Q,OAAO,CAACsX,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,CAAC,mEAEtJ;QACL,CAAC,MAAM,IAAIJ,SAAS,KAAK,CAAC,EAAE;UACxBG,YAAY,wQAAA3oB,MAAA,CAGgEsR,OAAO,CAACgO,OAAO,CAAC/I,KAAK,OAAAvW,MAAA,CAAIO,OAAO,CAAC+Q,OAAO,CAACsX,QAAQ,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,CAAC,mEAEzJ;UACD5jB,QAAQ,CAACgJ,aAAa,CAAC,kBAAkB,CAAC,CAAC6a,OAAO,CAACN,mBAAmB,CAAC;QAC3E;MACJ;MAEA,IAAI,CAACjX,OAAO,CAACsX,QAAQ,IAAItX,OAAO,CAACsX,QAAQ,GAAG,CAAC,EAAE;QAC3CD,YAAY,GACR,EAAE;MACV;MACA,IAAI,CAACrX,OAAO,CAACxK,KAAK,CAACxO,MAAM,IAAIgZ,OAAO,CAACxK,KAAK,CAACjH,KAAK,CAAC,WAAW,CAAC,EAAE;QAC3DyR,OAAO,CAACxK,KAAK,GAAG,YAAY;MAChC;MACA,IAAI,CAACwK,OAAO,CAACoX,cAAc,IACvBpX,OAAO,CAACoX,cAAc,CAAC7oB,KAAK,CAAC,WAAW,CAAC,EAAE;QAC3C4oB,eAAe,GAAG,EAAE;MACxB;MACA,IAAI,CAACnX,OAAO,CAACwX,UAAU,IAAI,CAACxX,OAAO,CAACwX,UAAU,CAACxwB,MAAM,EAAE;QACnDgZ,OAAO,CAACwX,UAAU,GAAG,YAAY;MACrC,CAAC,MAAM;QACH,IAAMC,WAAW,GAAG,IAAI5pB,IAAI,CAACmS,OAAO,CAACwX,UAAU,CAAC;QAChDxX,OAAO,CAACwX,UAAU,MAAA9oB,MAAA,CACX+oB,WAAW,CAACpd,kBAAkB,EAAE,OAAA3L,MAAA,CAAI+oB,WAAW,CAACnd,kBAAkB,EAAE,CAAE;MACjF;MAEA,IAAIod,oBAAoB,GAAG,EAAE;MAC7B,IAAI1X,OAAO,CAAC2X,cAAc,EAAE;QACxBD,oBAAoB,6JAAAhpB,MAAA,CAEDsR,OAAO,CAAC2X,cAAc,4bAIxC;MACL;MAEApE,QAAQ,CAACpb,SAAS,6UAAAzJ,MAAA,CAOFsR,OAAO,CAACJ,QAAQ,+VAAAlR,MAAA,CAQhBsR,OAAO,CAACxK,KAAK,sDAAA9G,MAAA,CAEvByoB,eAAe,iUAAAzoB,MAAA,CAOLsR,OAAO,CAACwX,UAAU,sDAAA9oB,MAAA,CAE5B2oB,YAAY,wBAAA3oB,MAAA,CACZgpB,oBAAoB,mBACzB;IACL,CAAC,MAAM;MACHlE,SAAS,CAACzY,SAAS,GACf,+BAA+B;MACnCrH,QAAQ,CACHgJ,aAAa,CACV,yBAAyB,CAC5B,CACAQ,YAAY,CACT,KAAK,EACL,8BAA8B,CACjC;IACT;EACJ,CAAC;EAED,IAAM0a,YAAY,GAAG,SAAfA,YAAYA,CACd5X,OAAO,EAAK;IACZ+W,YAAY,CAAC/W,OAAO,CAAC;IACrBuI,uBAAuB,CACnB,SAAS,CAAC;IACdJ,WAAW,EAAE;;IAEb;IACAwO,cAAc,EAAE;EACpB,CAAC;EAEDvS,YAAY,CAAC,UAACpE,OAAO,EAAK;IACtB,IAAI,OAAOA,OAAO,CACTgX,MAAM,KACX,WAAW,EAAE;MACbY,YAAY,CACR5X,OAAO,CAAC;MACZR,KAAK,CACAzE,SAAS,0BAAArM,MAAA,CACFsR,OAAO,CAAC0C,EAAE,CAAE;IAC5B,CAAC,MAAM;MACHtR,MAAM,CACF,oEAAoE,CACvE;IACL;EACJ,CAAC,EAAEmP,UAAU,CAAC;AAClB,CAAC;AAED,IAAMsX,UAAU,GAAG,SAAbA,UAAUA,CAAA,EAAS;EACrB,IAAM/hB,GAAG,GAAG,IAAIC,GAAG,CAAChJ,MAAM,CACrBC,QAAQ,CACRkJ,IAAI,CAAC,CACLF,YAAY;EACjB,IAAMuK,UAAU,GAAGzK,GAAG,CAAC0T,GAAG,CACtB,aAAa,CAAC;EAElB,IAAIjJ,UAAU,EAAE;IACZ8V,kBAAkB,CACd9V,UAAU,CAAC;EACnB;AACJ,CAAC;AACD,IAAMuX,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAA,EAAS;EAC3B,IAAM1Z,QAAQ,GAAG1K,QAAQ,CAACgJ,aAAa,CAAC,sBAAsB,CAAC;EAC/D,IAAMqb,IAAI,GAAGrkB,QAAQ,CAACgJ,aAAa,CAAC,MAAM,CAAC;EAE3C/F,WAAW,CAAC,UAACqhB,SAAS,EAAK;IACnB,IAAIA,SAAS,CAACC,MAAM,EAAE;MAClB,IAAMje,IAAI,GAAGge,SAAS,CAAChe,IAAI;MAE3BoE,QAAQ,CAACtK,KAAK,CAACyI,SAAS,GAAG,MAAM;MACjC6B,QAAQ,CAACtK,KAAK,CAACQ,MAAM,GAAG,MAAM;MAC9B8J,QAAQ,CAAClB,YAAY,CACjB,SAAS,+JAAAxO,MAAA,CACqGspB,SAAS,OAAI,yJAC9H;MACD5Z,QAAQ,CAACjG,SAAS,iGAAAzJ,MAAA,CACqDsL,IAAI,oEAAAtL,MAAA,CACpCspB,SAAS,OAAI,6CACvD;MAEG,IAAME,MAAM,GAAGxkB,QAAQ,CAACgJ,aAAa,CAAC,wBAAwB,CAAC,CAAC5I,KAAK;MACrEokB,MAAM,CAACvQ,YAAY,GAAG,GAAG;MACzBuQ,MAAM,CAACjc,YAAY,GAAG,SAAS;MAC/Bic,MAAM,CAACC,WAAW,GAAG,SAAS;MAC9BD,MAAM,CAACxa,UAAU,GAAG,QAAQ;;MAE5B;IACJ;EACJ,CAAC,EACD,4BAA4B,EAC5B,KAAK,EAAE,IAAI,CACd;AACL,CAAC;AACD,IAAM0a,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAA,EAAS;EAC9B,IAAMC,OAAO,GAAG,SAAVA,OAAOA,CAAA,EAAS;IAClB,IAAMC,aAAa,GAAG5kB,QAAQ,CAACgJ,aAAa,CAAC,QAAQ,CAAC,CAAC6b,YAAY;IACnE;IACA,IAAM9b,SAAS,GAAG/I,QAAQ,CAACmE,cAAc,CAAC,gBAAgB,CAAC;IAE3D,IAAM2gB,eAAe,GAAG9kB,QAAQ,CAACgJ,aAAa,CAAC,qBAAqB,CAAC;IACrE,IAAM+b,oBAAoB,GAAG/kB,QAAQ,CAACgJ,aAAa,CAAC,0BAA0B,CAAC;IAE/E,IAAI3Q,qBAAqB,KAAK,CAAC,IAAIC,0BAA0B,KAAK,CAAC,EAAE;MACjED,qBAAqB,GAAG0Q,SAAS,CAAC8b,YAAY;MAC9CvsB,0BAA0B,GAAGwsB,eAAe,CAACD,YAAY;IAC7D;IAEA9b,SAAS,CAAC3I,KAAK,CAACQ,MAAM,MAAA5F,MAAA,CAAM3C,qBAAqB,GAAGusB,aAAa,OAAI;IACrEE,eAAe,CAAC1kB,KAAK,CAACQ,MAAM,MAAA5F,MAAA,CAAM1C,0BAA0B,GAAGssB,aAAa,OAAI;IAChFG,oBAAoB,CAAC3kB,KAAK,CAACQ,MAAM,MAAA5F,MAAA,CAAM1C,0BAA0B,GAAGssB,aAAa,OAAI;IACrF7b,SAAS,CAAC3I,KAAK,CAACmU,SAAS,MAAAvZ,MAAA,CAAM4pB,aAAa,OAAI;EACpD,CAAC;EAEDD,OAAO,EAAE;EACT/Z,WAAW,CAAC+Z,OAAO,EAAE,GAAG,CAAC;AAC7B,CAAC;AACD,IAAMK,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,cAAc,EAAEC,WAAW,EAAK;EACnD,IAAMC,QAAQ,GAAGnlB,QAAQ,CAACgJ,aAAa,CAACic,cAAc,CAAC;EAEvDE,QAAQ,CAAChL,MAAM,EAAE;EACjBgL,QAAQ,CAACC,iBAAiB,CAAC,CAAC,EAAE,KAAK,CAAC;EAEpCpoB,SAAS,CAACqoB,SAAS,CAACC,SAAS,CAACH,QAAQ,CAACvxB,KAAK,CAAC;EAE7C8J,MAAM,CAACwnB,WAAW,CAAC;EACnB,OAAOC,QAAQ,CAACvxB,KAAK;AACzB,CAAC;AACD,IAAM2xB,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAAS;EACtB,IAAMC,OAAO,GAAGxlB,QAAQ,CAACmE,cAAc,CAAC,kBAAkB,CAAC;EAC3D,IAAM2L,eAAe,qPAKpB;EAEDlQ,iBAAiB,CAAC,8BAA8B,EAAErF,SAAS,EAAE,KAAK,CAAC;EACnEirB,OAAO,CAAC/gB,SAAS,GAAG+gB,OAAO,CAAC/gB,SAAS,GAAGqL,eAAe;AAC3D,CAAC;AAED,IAAM2V,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAAS;EACtB5tB,mBAAmB,GAAG,IAAI;EAC1BoM,UAAU,CAAC,YAAY;IACnBpM,mBAAmB,GAAG,KAAK;EAC/B,CAAC,EAAE,IAAI,CAAC;EAER4iB,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,oCAAoC,CAAC;EACtD/c,MAAM,CAAC,yBAAyB,CAAC;AACrC,CAAC;AAED,IAAMgoB,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAA,EAAS;EAC9BC,qBAAqB,CAAC,CAAC,QAAQ,EACvB,cAAc,CACjB,EACD,YAAM;IACFluB,gBAAgB,GACZ,IAAI;IACRqR,qBAAqB,CAEjBrR,gBAAgB,CACnB;EACL,CAAC,CAAC;AACV,CAAC;AAED,IAAMmuB,cAAc,GAAG,SAAjBA,cAAcA,CAAA,EAAS;EACzB,IAAIrQ,OAAO,GAAG,EAAE;EAChB1R,wBAAwB,CAAC,UACrBgiB,KAAK,EAAK;IACV,KAAK,IAAItyB,CAAC,GAAG,CAAC,EAAEA,CAAC,GACjBsyB,KAAK,CACAvyB,MAAM,EAAEC,CAAC,EAAE,EAAE;MACdgiB,OAAO,6NAAAva,MAAA,CAIezH,CAAC,GAAG,CAAC,wIAAAyH,MAAA,CAGsB6qB,KAAK,CAACtyB,CAAC,CAAC,CAAC+S,IAAI,yDAEzD;IACT;IACAuO,uBAAuB,CAEnB,MAAM,EAAE;MACJ/I,KAAK,EAAE,4BAA4B;MACnCyJ,OAAO,mFAAAva,MAAA,CAEDua,OAAO;IAGjB,CAAC,CAAC;IACNd,WAAW,EAAE;EACjB,CAAC,CAAC;AACN,CAAC;AAED,IAAMqR,yBAAyB,GAC3B,SADEA,yBAAyBA,CAAA,EACrB;EACFH,qBAAqB,CAAC,CACd,eAAe,CAClB,EACD,YAAM;IACFC,cAAc,EAAE;EACpB,CAAC,CAAC;AACV,CAAC;AAEL,IAAMG,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAA,EAAS;EAC3Btc,qBAAqB,CAAC,UAClBtI,IAAI,EAAK;IACT,IAAIA,IAAI,IAAIlI,qBAAqB,EAAE;MAC/B,IAAI,CAACnC,YAAY,CAACxD,MAAM,EAAE;QACtBwD,YAAY,GAAG,CAAC,QAAQ,CAAC;MAC7B;MACAmI,OAAO,CAACnI,YAAY,CAAC;MACrB+d,uBAAuB,CACtB,MAAM,EAAE;QACL/I,KAAK,EAAE,gBAAgB;QACvByJ,OAAO,wkCAAAva,MAAA,CAQ4FlE,YAAY,CAAC,CAAC,CAAC;MAqBtH,CAAC,CAAC;MACF,IAAMkvB,OAAO,GACT,IAAI;MACR,IAAM3V,QAAQ,GACVrQ,QAAQ,CACHmE,cAAc,CACX,eAAe,CAClB;MACT,IAAM8hB,KAAK,GACPjmB,QAAQ,CACHgJ,aAAa,CACV,4BAA4B,CAC/B;MACT,IAAMkd,KAAK,GAAG,GAAG;MACjB,IAAI7V,QAAQ,CAACzc,KAAK,CAACka,QAAQ,CAACoY,KAAK,CAAC3J,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE;QAC1ClM,QAAQ,CAACzc,KAAK,GAAGyc,QAAQ,CAACzc,KAAK,CAACgpB,IAAI,EAAE;MAC1C;MACAvM,QAAQ,CAAC8V,SAAS,GAAGH,OAAO;MAC5B,IAAMI,kBAAkB,GAChB,SADFA,kBAAkBA,CAAA,EACV;QACFH,KAAK,CAAC5e,SAAS,MAAArM,MAAA,CACRqV,QAAQ,CAACzc,KAAK,CAACN,MAAM,OAAA0H,MAAA,CAAIgrB,OAAO,CAAE;MAC7C,CAAC;MACTI,kBAAkB,EAAE;MACpB1hB,gBAAgB,CAEZ,SAAS,EACT,UACIxD,CAAC;QAAA,OAEDklB,kBAAkB,EAAE;MAAA,EAC3B;MACD1hB,gBAAgB,CAEZ,OAAO,EACP,UACIxD,CAAC;QAAA,OAEDklB,kBAAkB,EAAE;MAAA,EAC3B;MACD3R,WAAW,CACPC,YAAY,GACR,IAAI,CAAC;IACjB,CAAC,MAAM;MACH5Z,OAAO,CAAC4X,GAAG,CACP,2BAA2B,CAC9B;MACDzI,qBAAqB,EAAE;MACvBvM,MAAM,CACF,+CAA+C,CAClD;IACL;EACJ,CAAC,CAAC;AACN,CAAC;AACD,IAAM2oB,0BAA0B,GAC5B,SADEA,0BAA0BA,CAAA,EACtB;EACFV,qBAAqB,CAAC,CAClB,SAAS,EACT,SAAS,EAAE,KAAK,EAChB,QAAQ,CACX,EAAE,YAAM;IACLI,gBAAgB,EAAE;EACtB,CAAC,CAAC;AACN,CAAC;AAEL,IAAMJ,qBAAqB,GAAG,SAAxBA,qBAAqBA,CACvBW,UAAU,EAAExnB,MAAM,EAAK;EACvB,IAAM6lB,OAAO,GAAG,SAAVA,OAAOA,CAAA,EAAS;IAClB,IAAI2B,UAAU,CAACxY,QAAQ,CACnBtU,QAAQ,EAAE,CAAC,EAAE;MACbsF,MAAM,EAAE;IACZ;EACJ,CAAC;EAED6lB,OAAO,EAAE;EACTjgB,gBAAgB,CACZ,YAAY,EAAE,UAACxD,CAAC;IAAA,OACZyjB,OAAO,EAAE;EAAA,EAAC;AACtB,CAAC;AAED,IAAM1a,qBAAqB,GAAG,SAAxBA,qBAAqBA,CAAA,EAA2B;EAAA,IAAvBsc,UAAU,GAAAjsB,SAAA,CAAAhH,MAAA,QAAAgH,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,KAAK;EAC7CmP,qBAAqB,CAAC,UAAUC,UAAU,EAAE;IACxC,IAAI,CAACA,UAAU,EAAE;MACb5O,OAAO,CAAC4X,GAAG,CACP,4BAA4B,CAC/B;MACD;MACA,IAAM8T,sBAAsB,GACxBxmB,QAAQ,CAACC,aAAa,CAClB,QAAQ,CAAC;MAEjBumB,sBAAsB,CAACtmB,GAAG,GACtB,+CAA+C;MACnDsmB,sBAAsB,CACjBhd,YAAY,CACT,OAAO,EAAE,EAAE,CAAC;MACpBgd,sBAAsB,CACjBhd,YAAY,CACT,qBAAqB,EACrBid,qBAAqB,CAAC;MAC9BD,sBAAsB,CACjBhd,YAAY,CACT,WAAW,EAAE,OAAO,CAAC;MAC7Bgd,sBAAsB,CACjBhd,YAAY,CACT,aAAa,EAAE,GAAG,CAAC;MAC3Bgd,sBAAsB,CACjBhd,YAAY,CACT,aAAa,EACb,sBAAsB,CAAC;MAC/Bgd,sBAAsB,CACjBhd,YAAY,CAAC,qBAAqB,EAAE,OAAO,CAAC;MAEjDgd,sBAAsB,CAAC/lB,MAAM,GACzB,YAAM;QACFoU,uBAAuB,CACnB,MAAM,EAAE;UACJ/I,KAAK,EAAE,EAAE;UACTyJ,OAAO,EAAE;QACb,CAAC,CAAC;QACNd,WAAW,EAAE;MACjB,CAAC;MAEL,IAAMc,OAAO,GAAGvV,QAAQ,CACnBmE,cAAc,CACX,oBAAoB,CAAC;MAC7B,IAAM4E,SAAS,GAAG/I,QAAQ,CACrBC,aAAa,CAAC,KAAK,CAAC;MACzB,IAAMqG,IAAI,GAAGtG,QAAQ,CAChBC,aAAa,CACV,GAAG,CAAC;MAEZsV,OAAO,CAAC9Q,SAAS,GAAG,EAAE;MACtB8Q,OAAO,CAAChV,WAAW,CAACwI,SAAS,CAAC;MAC9BwM,OAAO,CAAChV,WAAW,CAAC+F,IAAI,CAAC;MACzBA,IAAI,CAAC7B,SAAS,mqDAAAzJ,MAAA,CAMGnC,mBAAmB,2HACnC;MAEDyN,IAAI,CAACkD,YAAY,CAAC,OAAO,EACrB,8BAA8B,CACjC;MACDT,SAAS,CAACiG,EAAE,GACR,yBAAyB;MAC7BjG,SAAS,CAACxI,WAAW,CACjBimB,sBAAsB,CAAC;IAC/B;EACJ,CAAC,EAAED,UAAU,CAAC;AAClB,CAAC;AAED,IAAMtY,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAS;EACxB,IAAI,CAACjX,wBAAwB,EAAE;IAC3B;EACJ;EAEA,IAAMue,OAAO,GAAGvV,QAAQ,CACnBmE,cAAc,CACX,oBAAoB,CAAC;EAC7B,IAAM4E,SAAS,GAAG/I,QAAQ,CACrBC,aAAa,CAAC,KAAK,CAAC;EACzB,IAAMqG,IAAI,GAAGtG,QAAQ,CAChBC,aAAa,CACV,GAAG,CAAC;EAEZsV,OAAO,CAAC9Q,SAAS,GAAG,EAAE;EACtB8Q,OAAO,CAAChV,WAAW,CAACwI,SAAS,CAAC;EAC9BwM,OAAO,CAAChV,WAAW,CAAC+F,IAAI,CAAC;EACzBA,IAAI,CAAC7B,SAAS,28BAAAzJ,MAAA,CAISnC,mBAAmB,2HACjC;EAETyN,IAAI,CAACkD,YAAY,CAAC,OAAO,EACrB,8BAA8B,CACjC;EACDT,SAAS,CAACiG,EAAE,GACR,oBAAoB;EAExBtR,MAAM,CACF,kCAAkC,CACrC;EAEDmX,uBAAuB,CACnB,MAAM,EAAE;IACJ/I,KAAK,EAAE,oBAAoB;IAC3ByJ,OAAO,EAAE;EACb,CAAC,CAAC;EACNd,WAAW,EAAE;AACjB,CAAC;AAED,IAAMiS,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;EACvBC,QAAQ,CAAC3mB,QAAQ,CACZka,gBAAgB,CACb,WAAW,CAAC,EAAE;IAClB0M,KAAK,EAAE,GAAG;IACVxV,IAAI,EAAE;EACV,CAAC,CAAC;AACN,CAAC;AAED,IAAMyV,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAAS;EACtB,IAAMC,kBAAkB,GAAG,EAAE,CACxB5xB,KAAK,CACLd,IAAI,CAAC4L,QAAQ,CACTka,gBAAgB,CACb,4BAA4B,CAC/B,CAAC;EACV,IAAM6M,WAAW,GACbD,kBAAkB,CACb9qB,GAAG,CAAC,UACDgrB,gBAAgB,EACf;IACDzvB,gBAAgB,GACZ,IAAI0vB,SAAS,CACRC,OAAO,CACJF,gBAAgB,EAAE;MACdziB,QAAQ;IAKZ,CAAC,CAAC;EAClB,CAAC,CAAC;EAEV,IAAIhN,gBAAgB,EAAE;IAClBqT,WAAW,CAAC,YAAM;MACdrT,gBAAgB,CACX4vB,MAAM,EAAE;IACjB,CAAC,EAAE,IAAI,CAAC;EACZ;AACJ,CAAC;AAED,IAAMC,wBAAwB,GAAG,SAA3BA,wBAAwBA,CAAA,EAAS;EACnC,IAAMC,cAAc,GAChB,IAAIC,YAAY,CAAC,SAAS,CAAC;EAE/B,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;IACvB,IAAMC,UAAU,GACZhuB,QAAQ,EAAE,CACLwI,WAAW,EAAE;IAEtB,IAAI,EAAEwlB,UAAU,IACZA,UAAU,CACLl0B,MAAM,CACd,IAAK,CACF,eAAe,CAClB,CAACwa,QAAQ,CAAC0Z,UAAU,CAAE,EAAE;MACrB;IACJ;IAEA,IAAI;MACAH,cAAc,CAACI,aAAa,CACxBznB,QAAQ,CAACgJ,aAAa,iBAAAhO,MAAA,CAAgBwsB,UAAU,SAC/C,EAAE,IAAI,EAAE;QAACE,MAAM,EAAE;MAAE,CAAC,CAAC;IAC9B,CAAC,CAAC,OAAOxmB,CAAC,EAAE;MACR;IACJ;EACJ,CAAC;EAEDqmB,YAAY,EAAE;EACdluB,MAAM,CAACsuB,YAAY,GACfJ,YAAY;AACpB,CAAC;AAED,IAAMK,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAA,EAAS;EAClC,IAAM9N,IAAI,GAAG9Z,QAAQ,CAACmE,cAAc,CAAC,gCAAgC,CAAC;EAEtE2V,IAAI,CAACrV,SAAS,w7EASb;AACL,CAAC;AAED,IAAMojB,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;EACvB,IAAMnd,QAAQ,GAAG1K,QAAQ,CAACmE,cAAc,CAAC,yBAAyB,CAAC;EAEnE,IAAM2jB,WAAW,GAAG,SAAdA,WAAWA,CAAIC,UAAU,EAAK;IAChCrd,QAAQ,CAACrD,SAAS,MAAArM,MAAA,CAAM+sB,UAAU,OAAA/sB,MAAA,CAAIO,OAAO,CACzCwsB,UAAU,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,CACpC,CAAE;EACP,CAAC;EAED,IAAMC,KAAK,GAAG,IAAI7tB,IAAI,EAAE;EACxB,IAAM8tB,KAAK,GAAG,IAAI9tB,IAAI,CAAC,YAAY,CAAC;EAEpC,IAAM+tB,gBAAgB,GAAGD,KAAK,CAAC7tB,OAAO,EAAE,GAAG4tB,KAAK,CAAC5tB,OAAO,EAAE;EAC1D,IAAM+tB,gBAAgB,GAAGjqB,QAAQ,CAACgqB,gBAAgB,IAAI,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC;EAExEJ,WAAW,CAACK,gBAAgB,CAAC;EAC7Bvd,WAAW,CAAC,YAAY;IACpBkd,WAAW,CAACK,gBAAgB,CAAC;EACjC,CAAC,EAAE,IAAI,CAAC;AACZ,CAAC;AAED,IAAM7J,wBAAwB,GAAG,SAA3BA,wBAAwBA,CAAA,EAAS;EACnC,IAAIvlB,qBAAqB,EAAE;IACvBiH,QAAQ,CAACmE,cAAc,CAAC,sBAAsB,CAAC,CAC1C/D,KAAK,CAACC,OAAO,GAAG,EAAE;EAC3B;EACAoJ,qBAAqB,CAAC,UAClBvG,OAAO,EAAK;IACZpI,OAAO,CAAC2C,KAAK,iCAAAzC,MAAA,CACuBkI,OAAO,EAC1C;IACD,IAAIA,OAAO,EAAE;MACT,IACIklB,mBAAmB,GACfpoB,QAAQ,CACHmE,cAAc,CACX,qBAAqB,CACxB;MACb,IACIkkB,WAAW,GACProB,QAAQ,CACHgJ,aAAa,CACV,mBAAmB,CACtB;MACb,IACIsf,oBAAoB,GAChBtoB,QAAQ,CACHmE,cAAc,CACX,sBAAsB,CACzB;MAEbkkB,WAAW,CACN1e,eAAe,CACZ,SAAS,CACZ;MACL,IAAI3Q,uBAAuB,EAAE;QACzBovB,mBAAmB,CACdhoB,KAAK,CACLC,OAAO,GACR,EAAE;MACV;MACAioB,oBAAoB,CACfloB,KAAK,CACLC,OAAO,GACR,EAAE;MACNud,SAAS,CAACjR,eAAe,EAAE,CAAC;IAChC;EACJ,CAAC,CAAC;EACF/B,WAAW,CAACyL,aAAa,EAAE,IAAI,CAAC;AACpC,CAAC;AAED,IAAMkS,QAAQ,GAAG,SAAXA,QAAQA,CAAA,EAAS;EACnBpvB,QAAQ,EAAE;EACVmR,UAAU,EAAE;EACZ0X,WAAW,EAAE;EACbG,mBAAmB,EAAE;EACrB1J,kBAAkB,EAAE;EACpBsB,wBAAwB,EAAE;EAC1BjW,eAAe,EAAE;EACjBkU,YAAY,EAAE;EACd/G,cAAc,EAAE;EAChB8E,eAAe,EAAE;EACjBpL,iBAAiB,EAAE;EACnB2S,UAAU,EAAE;EACZzS,cAAc,EAAE;EAChB6b,YAAY,EAAE;EACdzE,UAAU,EAAE;EACZkC,UAAU,EAAE;EACZjR,aAAa,EAAE;EACf0H,oBAAoB,EAAE;EAEtB8K,mBAAmB,EAAE;EACrBI,yBAAyB,EAAE;EAC3BO,0BAA0B,EAAE;EAE5BuB,uBAAuB,EAAE;EAEzBtJ,wBAAwB,EAAE;EAE1BuJ,YAAY,EAAE;EACdzD,gBAAgB,EAAE;EAClBM,mBAAmB,EAAE;EAErB7U,gBAAgB,EAAE;EAClB0K,iBAAiB,EAAE;EAEnBrG,YAAY,EAAE;EAEd,IAAM3B,IAAI,GAAGvS,QAAQ,CAChBmE,cAAc,CACX,kBAAkB,CAAC;EAC3BoO,IAAI,CAAClO,UAAU,CAACC,WAAW,CACvBiO,IAAI,CAAC;EAETlZ,MAAM,CAACoH,MAAM,GAAG,YAAM;IAClB,IAAI,CAAC3H,eAAe,EAAE;MAClB,IAAM0vB,SAAS,GACXxoB,QAAQ,CACHgJ,aAAa,CACV,eAAe,CAClB;MACT,IAAMyf,IAAI,GAAG,IAAI;MACjB,IAAMC,SAAS,GACX,GAAG;MACPzkB,UAAU,CACN,YAAM;QACFukB,SAAS,CACJvhB,SAAS,CACTtF,MAAM,CACH,QAAQ,CACX;QACL,IAAI,CACAlK,gBAAgB,EAClB;UACEuI,QAAQ,CACHM,IAAI,CACJF,KAAK,CACLwJ,SAAS,GACV,EAAE;QACV;QACAvQ,MAAM,CACDwQ,QAAQ,CAAC;UACNC,GAAG,EAAE;QACT,CAAC,CAAC;MACV,CAAC,EAAE2e,IAAI,CAAC;MACZxkB,UAAU,CACN,YAAM;QACFukB,SAAS,CACJ7mB,MAAM,EAAE;;QAEb;QACAklB,WAAW,EACT;QACFO,wBAAwB,EACtB;MACN,CAAC,EAAEqB,IAAI,GACPC,SAAS,CAAC;MACd9d,WAAW,CAAC,YAAM;QACdnB,qBAAqB,CAAC,UAAUvI,CAAC,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC;MAC9D,CAAC,EAAE,EAAE,GAAC,IAAI,CAAC;IACf;EACJ,CAAC;AACL,CAAC;AAEDynB,WAAW,CAACloB,MAAM,GAAG,YAAM;EACvB8nB,QAAQ,EAAE;AACd,CAAC"}